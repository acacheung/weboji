/* eslint-enable */
/* prettier-ignore */
var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,g){if(b==Array.prototype||b==Object.prototype)return b;b[d]=g.value;return b};function ha(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<b.length;++d){var g=b[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object");}var oa=ha(this);
function pa(b,d){if(d)a:{var g=oa;b=b.split(".");for(var h=0;h<b.length-1;h++){var t=b[h];if(!(t in g))break a;g=g[t]}b=b[b.length-1];h=g[b];d=d(h);d!=h&&null!=d&&ca(g,b,{configurable:!0,writable:!0,value:d})}}function sa(b){var d=0;return function(){return d<b.length?{done:!1,value:b[d++]}:{done:!0}}}function va(b){var d="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return d?d.call(b):{next:sa(b)}}
function xa(){this.J=!1;this.o=null;this.Aa=void 0;this.a=1;this.za=0;this.G=null}function Da(b){if(b.J)throw new TypeError("Generator is already running");b.J=!0}xa.prototype.S=function(b){this.Aa=b};function Fa(b,d){b.G={te:d,Se:!0};b.a=b.za}xa.prototype.return=function(b){this.G={return:b};this.a=this.za};function Ga(b){this.a=new xa;this.o=b}
function Ha(b,d){Da(b.a);var g=b.a.o;if(g)return La(b,"return"in g?g["return"]:function(h){return{value:h,done:!0}},d,b.a.return);b.a.return(d);return Ma(b)}function La(b,d,g,h){try{var t=d.call(b.a.o,g);if(!(t instanceof Object))throw new TypeError("Iterator result "+t+" is not an object");if(!t.done)return b.a.J=!1,t;var r=t.value}catch(n){return b.a.o=null,Fa(b.a,n),Ma(b)}b.a.o=null;h.call(b.a,r);return Ma(b)}
function Ma(b){for(;b.a.a;)try{var d=b.o(b.a);if(d)return b.a.J=!1,{value:d.value,done:!1}}catch(g){b.a.Aa=void 0,Fa(b.a,g)}b.a.J=!1;if(b.a.G){d=b.a.G;b.a.G=null;if(d.Se)throw d.te;return{value:d.return,done:!0}}return{value:void 0,done:!0}}
function Qa(b){this.next=function(d){Da(b.a);b.a.o?d=La(b,b.a.o.next,d,b.a.S):(b.a.S(d),d=Ma(b));return d};this.throw=function(d){Da(b.a);b.a.o?d=La(b,b.a.o["throw"],d,b.a.S):(Fa(b.a,d),d=Ma(b));return d};this.return=function(d){return Ha(b,d)};this[Symbol.iterator]=function(){return this}}function Ra(b){function d(h){return b.next(h)}function g(h){return b.throw(h)}return new Promise(function(h,t){function r(n){n.done?h(n.value):Promise.resolve(n.value).then(d,g).then(r,t)}r(b.next())})}
pa("Symbol",function(b){function d(t){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new g("jscomp_symbol_"+(t||"")+"_"+h++,t)}function g(t,r){this.a=t;ca(this,"description",{configurable:!0,writable:!0,value:r})}if(b)return b;g.prototype.toString=function(){return this.a};var h=0;return d});
pa("Symbol.iterator",function(b){if(b)return b;b=Symbol("Symbol.iterator");for(var d="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),g=0;g<d.length;g++){var h=oa[d[g]];"function"===typeof h&&"function"!=typeof h.prototype[b]&&ca(h.prototype,b,{configurable:!0,writable:!0,value:function(){return Sa(sa(this))}})}return b});function Sa(b){b={next:b};b[Symbol.iterator]=function(){return this};return b}
pa("Promise",function(b){function d(n){this.o=0;this.S=void 0;this.a=[];var k=this.G();try{n(k.resolve,k.reject)}catch(m){k.reject(m)}}function g(){this.a=null}function h(n){return n instanceof d?n:new d(function(k){k(n)})}if(b)return b;g.prototype.o=function(n){if(null==this.a){this.a=[];var k=this;this.G(function(){k.S()})}this.a.push(n)};var t=oa.setTimeout;g.prototype.G=function(n){t(n,0)};g.prototype.S=function(){for(;this.a&&this.a.length;){var n=this.a;this.a=[];for(var k=0;k<n.length;++k){var m=
n[k];n[k]=null;try{m()}catch(q){this.J(q)}}}this.a=null};g.prototype.J=function(n){this.G(function(){throw n;})};d.prototype.G=function(){function n(q){return function(B){m||(m=!0,q.call(k,B))}}var k=this,m=!1;return{resolve:n(this.$e),reject:n(this.J)}};d.prototype.$e=function(n){if(n===this)this.J(new TypeError("A Promise cannot resolve to itself"));else if(n instanceof d)this.ff(n);else{a:switch(typeof n){case "object":var k=null!=n;break a;case "function":k=!0;break a;default:k=!1}k?this.Ze(n):
this.za(n)}};d.prototype.Ze=function(n){var k=void 0;try{k=n.then}catch(m){this.J(m);return}"function"==typeof k?this.wf(k,n):this.za(n)};d.prototype.J=function(n){this.Aa(2,n)};d.prototype.za=function(n){this.Aa(1,n)};d.prototype.Aa=function(n,k){if(0!=this.o)throw Error("Cannot settle("+n+", "+k+"): Promise already settled in state"+this.o);this.o=n;this.S=k;this.Ye()};d.prototype.Ye=function(){if(null!=this.a){for(var n=0;n<this.a.length;++n)r.o(this.a[n]);this.a=null}};var r=new g;d.prototype.ff=
function(n){var k=this.G();n.Ia(k.resolve,k.reject)};d.prototype.wf=function(n,k){var m=this.G();try{n.call(k,m.resolve,m.reject)}catch(q){m.reject(q)}};d.prototype.then=function(n,k){function m(p,u){return"function"==typeof p?function(D){try{q(p(D))}catch(y){B(y)}}:u}var q,B,E=new d(function(p,u){q=p;B=u});this.Ia(m(n,q),m(k,B));return E};d.prototype.catch=function(n){return this.then(void 0,n)};d.prototype.Ia=function(n,k){function m(){switch(q.o){case 1:n(q.S);break;case 2:k(q.S);break;default:throw Error("Unexpected state: "+
q.o);}}var q=this;null==this.a?r.o(m):this.a.push(m)};d.resolve=h;d.reject=function(n){return new d(function(k,m){m(n)})};d.race=function(n){return new d(function(k,m){for(var q=va(n),B=q.next();!B.done;B=q.next())h(B.value).Ia(k,m)})};d.all=function(n){var k=va(n),m=k.next();return m.done?h([]):new d(function(q,B){function E(D){return function(y){p[D]=y;u--;0==u&&q(p)}}var p=[],u=0;do p.push(void 0),u++,h(m.value).Ia(E(p.length-1),B),m=k.next();while(!m.done)})};return d});
pa("Math.log2",function(b){return b?b:function(d){return Math.log(d)/Math.LN2}});var Ta="function"==typeof Object.assign?Object.assign:function(b,d){for(var g=1;g<arguments.length;g++){var h=arguments[g];if(h)for(var t in h)Object.prototype.hasOwnProperty.call(h,t)&&(b[t]=h[t])}return b};pa("Object.assign",function(b){return b||Ta});
function Ua(b){var d=new XMLHttpRequest;d.open("GET",c.rc+c.neuralNetworkPath,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||b(d.responseText)};d.send()}function Va(b,d){if(0===d||"object"!==typeof b)return b;b=Object.assign({},b);d=void 0===d||-1===d?-1:d-1;for(var g in b)b[g]=Va(b[g],d);return b}function Wa(b,d,g){return Math.min(Math.max((g-b)/(d-b),0),1)}
function Xa(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ya(b,d){var g=d%8;return b[(d-g)/8]>>7-g&1}
function $a(b){var d=JSON.parse(b);b=d.ne;var g=d.nf,h=d.n,t=null;"undefined"===typeof btoa?t=Buffer.from(d.data,"base64").toString("latin1"):t=atob(d.data);var r=t.length;d=new Uint8Array(r);for(var n=0;n<r;++n)d[n]=t.charCodeAt(n);t=new Float32Array(h);r=new Float32Array(g);n=b+g+1;for(var k=0;k<h;++k){for(var m=n*k,q=0===Ya(d,m)?1:-1,B=m+1,E=1,p=0,u=B+b-1;u>=B;--u)p+=E*Ya(d,u),E*=2;B=p;m=m+1+b;E=r.length;p=0;for(u=m;u<m+E;++u)r[p]=Ya(d,u),++p;for(E=m=0;E<g;++E)m+=r[E]*Math.pow(2,-E-1);t[k]=0===
m&&0===B?0:q*(1+m)*Math.pow(2,1+B-Math.pow(2,b-1))}return t}
var L=function(){function b(w,f,A){f=w.createShader(f);w.shaderSource(f,A);w.compileShader(f);return w.getShaderParameter(f,w.COMPILE_STATUS)?f:!1}function d(w,f,A){f=b(w,w.VERTEX_SHADER,f);A=b(w,w.FRAGMENT_SHADER,A);w===G&&k.push(f,A);var M=w.createProgram();w.attachShader(M,f);w.attachShader(M,A);w.linkProgram(M);return M}function g(w){return["float","sampler2D","int"].map(function(f){return"precision "+w+" "+f+";\n"}).join("")}function h(w,f){f.s=f.s?!0:!1;if(!f.s){f.ta=f.ta||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}";
f.Ga=f.Ga||["a0"];f.wa=f.wa||[2];f.precision=f.precision||p;f.id=B++;void 0!==f.Ad&&(f.Ad.forEach(function(l,C){f.c=f.c.replace(l,f.gb[C])}),f.Ad.splice(0));f.mc=0;f.wa.forEach(function(l){f.mc+=4*l});var A=g(f.precision);f.ga=d(w,A+f.ta,A+f.c);f.m={};f.f.forEach(function(l){f.m[l]=w.getUniformLocation(f.ga,l)});f.attributes={};f.xa=[];f.Ga.forEach(function(l){var C=w.getAttribLocation(f.ga,l);f.attributes[l]=C;f.xa.push(C)});if(f.g){w.useProgram(f.ga);q=f;m=f.id;for(var M in f.g)w.uniform1i(f.m[M],
f.g[M])}f.fa=!0}}function t(w){ab.Ff(Q);m!==w.id&&(Q.M(),m=w.id,q=w,G.useProgram(w.ga),w.xa.forEach(function(f){0!==f&&G.enableVertexAttribArray(f)}))}function r(w,f,A){h(w,f,A);w.useProgram(f.ga);w.enableVertexAttribArray(0);m=-1;return q=f}function n(){return{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1"],g:{u1:0}}}var k=[],m=-1,q=null,B=0,E=!1,p="highp",u=["u1"],D=["u0"],y={u1:0},e={u0:0},F={u1:0,u2:1},O={u3:0},I={s0:n(),s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
f:u,g:y,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",f:["u1","u2"],g:F},s3:{c:"uniform sampler2D u1;uniform vec2 u4,u5;varying vec2 vv0;void main(){vec2 a=vv0*u4+u5;gl_FragColor=texture2D(u1,a);}",f:["u1","u4","u5"],g:y,s:!0},s4:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:u,g:y},s5:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
f:["u1","u2"],g:F},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:u,g:y},s7:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",f:u,g:y},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],g:e},s9:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
f:["u0","u4"],g:e},s10:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",f:u,g:y},s11:{c:"uniform sampler2D u1,u6;uniform float u7;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u6,vv0);gl_FragColor=mix(b,a,u7*f);}",f:["u1","u6","u7"],g:{u1:0,u6:1}},s12:{c:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u8)+texture2D(u1,vv0+u8*vec2(1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,1.)));}",
f:["u1","u8"],g:y},s13:{c:"uniform sampler2D u1;uniform vec4 u9;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u9);gl_FragColor=j(a);}",
f:["u1","u9"],g:y},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:D,g:e,s:!0},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",f:D,g:e},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",f:D,g:e},
s17:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",f:D,g:e},s18:{c:"uniform sampler2D u0,u7,u10;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u7,vv0),d=texture2D(u10,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u7","u10"],g:{u0:0,u7:1,u10:2},s:!0},s19:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
f:D,g:e},s20:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",f:D,g:e,s:!0},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,e);float b=u12*u12;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u11","u12"],g:{u0:0,u11:1},s:!0},s22:{c:"uniform sampler2D u1;uniform vec2 u13;varying vec2 vv0;void main(){float a=u13.x*u13.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u13.y),f=floor(u13.x*fract(b*u13.y)),g=(f*u13.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
f:["u1","u13"],g:y},s23:{c:"uniform sampler2D u14,u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u16,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u14,b),f=texture2D(u15,c);gl_FragColor=d*f;}",f:["u14","u15","u16"],g:{u15:0,u14:1,u16:2},s:!0},s24:{c:"uniform float u17;uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec2 a=fract(vv0*u17);vec4 b=texture2D(u14,vv0),c=texture2D(u15,a);gl_FragColor=b*c;}",f:["u15","u14","u17"],g:{u15:0,u14:1}},s25:{c:"uniform float u17;uniform sampler2D u14,u15,u18,u19,u20,u21;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u17,l=floor(h),c=h-l;vec4 m=texture2D(u14,vv0),d=texture2D(u15,c),a=texture2D(u21,vv0);a=a*255.;vec4 n=texture2D(u18,c),o=texture2D(u19,c),p=texture2D(u20,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
f:"u14 u15 u17 u21 u18 u19 u20".split(" "),g:{u15:0,u14:1,u21:3,u18:4,u19:5,u20:6},s:!0},s26:{c:"uniform sampler2D u14,u15,u22;uniform float u17,u23,u24,u25;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u23*vv0),b=u23*vv0-a;float c=u17/u23;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u23;float k=u23*u25/u17;vec2 l=k*d,h=(l+f*u24)/u25,i=step(h,j);vec4 m=texture2D(u14,g),n=texture2D(u15,h),o=m*n*i.x*i.y,p=texture2D(u22,g);gl_FragColor=o*u24*u24+p;}",f:"u14 u15 u17 u23 u24 u25 u22".split(" "),
g:{u15:0,u14:1,u22:2}},s27:{c:"uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u14,vv0),b=texture2D(u15,vv0);gl_FragColor=a*b;}",f:["u14","u15"],g:{u15:0,u14:1},s:!0},s28:{c:"uniform sampler2D u1,u22;uniform float u26;varying vec2 vv0;void main(){gl_FragColor=texture2D(u22,vv0)+u26*texture2D(u1,vv0);}",f:["u1","u22","u26"],g:{u1:0,u22:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
f:u,g:y,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",f:["u1","u27"],g:y,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u27"],g:y,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
f:["u1","u2","u28"],g:F,s:!0},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",f:["u1","u2","u28"],g:F,s:!0},s34:{c:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u8*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*h),d=texture2D(u3,a+u8*i),j=texture2D(u3,a+u8),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
f:["u3","u8"],g:O},s35:{c:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*k),d=texture2D(u3,a+u8*l),g=texture2D(u3,a+u8),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u8*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u8*m),d=f(a+u8*2.),g=f(a+u8*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",f:["u3","u8"],g:O,s:!0},
s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",f:["u1"],g:y,precision:"lowp",s:!0},s37:{c:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u8)+2002./e*texture2D(u1,vv0-2.*u8)+3003./e*texture2D(u1,vv0-u8)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u8)+2002./e*texture2D(u1,vv0+2.*u8)+1001./e*texture2D(u1,vv0+3.*u8);gl_FragColor=a;}",f:["u8","u1"],g:y,precision:"lowp",
s:!0},s38:{c:"uniform sampler2D u1,u11,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u11,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",f:["u1","u11","u29"],g:{u1:0,u11:1,u29:2},s:!0}},S={s39:{c:"uniform float u17,u30;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u22,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u17,xyTo=floor(vv0*u17+eps2);float weightSize=toSparsity*u17;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u17,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u17","u14","u15","u22","u30"],gb:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u17,u30,u25;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u22,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u25,xyTo=floor(vv0*u17+eps2);float weightSize=fromSparsity*u25;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u17;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u25,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u17 u25 u14 u15 u22 u30".split(" "),gb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},v=null,P=null,Q={Za:function(){return E},j:function(){if(!E){v=Va(I,2);P=Va(S,2);p="highp";G.getShaderPrecisionFormat&&(G.getShaderPrecisionFormat(G.FRAGMENT_SHADER,G.MEDIUM_FLOAT),G.getShaderPrecisionFormat(G.FRAGMENT_SHADER,G.LOW_FLOAT));for(var w in v)h(G,v[w],w);L.set("s0");G.enableVertexAttribArray(0);E=!0}},uc:function(w){w.forEach(function(f){Q.tc(f)})},tc:function(w){v[w.id]=w;h(G,w,w.id)},Sc:function(w,
f,A){f||(f=w);v[f]=Object.create(P[w]);v[f].Ue=!0;P[w].gb&&P[w].gb.forEach(function(M,l){v[f].c=v[f].c.replace(new RegExp(M,"g"),A[l])});h(G,v[f],f)},set:function(w){var f=v[w];f.s&&(f.s=!1,h(G,f,w));t(f)},Ca:function(w){return r(w,n(),"s41")},bc:function(w){return r(w,{c:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",f:[],precision:p},"s42")},ue:function(w){return"undefined"===typeof v[w]?!1:v[w].fa},M:function(){-1!==m&&(m=-1,q.xa.forEach(function(w){0!==w&&G.disableVertexAttribArray(w)}))},cc:function(){var w=
0;q.xa.forEach(function(f,A){A=q.wa[A];G.vertexAttribPointer(f,A,G.FLOAT,!1,q.mc,w);w+=4*A})},eg:function(){G.enableVertexAttribArray(0)},hb:function(){Q.ib(G)},ib:function(w){w.vertexAttribPointer(q.xa[0],2,w.FLOAT,!1,8,0)},Lg:function(w,f){G.uniform1i(q.m[w],f)},F:function(w,f){G.uniform1f(q.m[w],f)},ha:function(w,f,A){G.uniform2f(q.m[w],f,A)},Mg:function(w,f){G.uniform2fv(q.m[w],f)},Dd:function(w,f){G.uniform3fv(q.m[w],f)},Ng:function(w,f,A,M){G.uniform3f(q.m[w],f,A,M)},Gf:function(w,f,A,M,l){G.uniform4f(q.m[w],
f,A,M,l)},Ed:function(w,f){G.uniform4fv(q.m[w],f)},Og:function(w,f){G.uniformMatrix2fv(q.m[w],!1,f)},Pg:function(w,f){G.uniformMatrix3fv(q.m[w],!1,f)},Qg:function(w,f){G.uniformMatrix4fv(q.m[w],!1,f)},A:function(w,f){Q.set(w);f.forEach(function(A){switch(A.type){case "4f":G.uniform4fv(q.m[A.name],A.value);break;case "3f":G.uniform3fv(q.m[A.name],A.value);break;case "2f":G.uniform2fv(q.m[A.name],A.value);break;case "1f":G.uniform1f(q.m[A.name],A.value);break;case "1i":G.uniform1i(q.m[A.name],A.value);
break;case "mat2":G.uniformMatrix2fv(q.m[A.name],!1,A.value);break;case "mat3":G.uniformMatrix3fv(q.m[A.name],!1,A.value);break;case "mat4":G.uniformMatrix4fv(q.m[A.name],!1,A.value)}})},qg:function(){return"lowp"},i:function(){G.disableVertexAttribArray(0);Q.M();for(var w in v){var f=v[w];f.fa&&(f.fa=!1,G.deleteProgram(f.ga));f.Ue&&delete v[w]}k.forEach(function(A){G.deleteShader(A)});k.splice(0);B=0;E=!1;q=null;m=-1}};return Q}(),G=null,eb=function(){function b(p){console.log("ERROR in ContextFF: ",
p);return!1}function d(p){function u(){bb.i();cb.reset();y.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;var D=document.createElement("canvas");D.setAttribute("width",5);D.setAttribute("height",5);var y=null;try{y=D.getContext("webgl2",p)}catch(e){return!1}if(!y)return!1;g(y);cb.Cc(y);p=cb.wb(y);if(!p.Z&&!p.aa)return u(),!1;p=bb.yc(y,p);u();return p?!0:!1}function g(p){p.clearColor(0,0,0,0);p.disable(p.DEPTH_TEST);
p.disable(p.BLEND);p.disable(p.DITHER);p.disable(p.STENCIL_TEST);p.disable(p.CULL_FACE);p.GENERATE_MIPMAP_HINT&&p.hint(p.GENERATE_MIPMAP_HINT,p.FASTEST);p.disable(p.SAMPLE_ALPHA_TO_COVERAGE);p.disable(p.SAMPLE_COVERAGE);p.depthFunc(p.LEQUAL);p.clearDepth(1)}var h=null,t=null,r=null,n=null,k=!0,m=null,q=null,B=[],E={u:function(){return h.width},O:function(){return h.height},Ra:function(){return h},hg:function(){return G},ba:function(){return k},flush:function(){G.flush()},Ae:function(){m||(m=new Uint8Array(h.width*
h.height*4));G.readPixels(0,0,h.width,h.height,G.RGBA,G.UNSIGNED_BYTE,m);return m},kg:function(){return h.toDataURL("image/jpeg")},lg:function(){db.L();t||(t=document.createElement("canvas"),r=t.getContext("2d"));t.width=h.width;t.height=h.height;for(var p=E.Ae(),u=r.createImageData(t.width,t.height),D=t.width,y=t.height,e=u.data,F=0;F<y;++F)for(var O=y-F-1,I=0;I<D;++I){var S=4*(F*D+I),v=4*(O*D+I);e[S]=p[v];e[S+1]=p[v+1];e[S+2]=p[v+2];e[S+3]=p[v+3]}r.putImageData(u,0,0);return t.toDataURL("image/png")},
jg:function(p){!t&&p&&(t=document.createElement("canvas"),r=t.getContext("2d"));var u=p?t:document.createElement("canvas");u.width=h.width;u.height=h.height;(p?r:u.getContext("2d")).drawImage(h,0,0);return u},j:function(p){p=Object.assign({$:null,Ub:null,Ja:null,Ac:null,width:512,height:512,premultipliedAlpha:!1,Xc:!0,antialias:!1,debug:!1,bg:!1},p);p.$?(G=p.$,h=p.$.canvas):p.Ac&&!p.Ja?h=document.getElementById(p.Ac):p.Ja&&(h=p.Ja);h||(h=document.createElement("canvas"));h.width=p.width;h.height=
p.height;if(G)k=G instanceof WebGL2RenderingContext;else{k=!0;var u={antialias:p.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:p.premultipliedAlpha,stencil:!1,depth:p.Xc};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(u.antialias=!1);var D=d(u);!D&&u.antialias&&(u.antialias=!1,D=d(u));D&&(G=h.getContext("webgl2",u));G?k=!0:((G=h.getContext("webgl",u))||(G=h.getContext("experimental-webgl",u)),k=!1)}if(!G)return b("WebGL1 and 2 are not enabled");
(n=G.getExtension("WEBGL_lose_context"))&&p.Ub&&(q=p.Ub,h.addEventListener("webglcontextlost",q,!1));if(!cb.j())return b("Not enough GL capabilities");g(G);L.j();R.j();if(!bb.yc(G,cb.ye()))return b("Cannot filter float textures");B.forEach(function(y){y(G)});B.splice(0);return!0},Xf:function(){return new Promise(function(p){G?p(G):B.push(p)})},i:function(){G&&(cb.i(),L.i(),bb.i());n&&q&&(h.removeEventListener("webglcontextlost",q,!1),n=q=null);G=m=r=t=h=null;B.splice(0)}};return E}(),ab=function(){function b(){null===
d&&("undefined"!==typeof L?d=L:"undefined"!==typeof JEShaders&&(d=JEShaders))}var d=null;return{reset:function(){d=null},Ff:function(g){d!==g&&(d&&d.M(),d=g)},Za:function(){return d.Za()},hb:function(){return d.hb()},ib:function(g){return d.ib(g)},cc:function(){return d.cc()},M:function(){return d.M()},set:function(g){b();return d.set(g)},Ca:function(g){b();return d.Ca(g)},bc:function(g){b();return d.bc(g)}}}(),U=function(){function b(l){G.bindTexture(G.TEXTURE_2D,l)}function d(l){w[0]=l;l=f[0];var C=
l>>16&32768,J=l>>12&2047,K=l>>23&255;return 103>K?C:142<K?C|31744|((255==K?0:1)&&l&8388607):113>K?(J|=2048,C|(J>>114-K)+(J>>113-K&1)):C=(C|K-112<<10|J>>1)+(J&1)}function g(l){var C=new Uint16Array(l.length);l.forEach(function(J,K){C[K]=d(J)});return C}function h(){if(null!==A.Gb)return A.Gb;var l=r(g([.5,.5,.5,.5]));return null===l?!0:A.Gb=l}function t(){if(null!==A.Hb)return A.Hb;var l=r(new Uint8Array([127,127,127,127]));return null===l?!0:A.Hb=l}function r(l){if(!ab.Za()||!y)return null;var C=
null,J=Math.sqrt(l.length/4);try{var K=G.getError();if("FUCKING_BIG_ERROR"===K)return!1;C=M.instance({isFloat:!1,H:!0,array:l,width:J});K=G.getError();if(K!==G.NO_ERROR)return!1}catch(ea){return!1}db.L();G.viewport(0,0,J,J);G.clearColor(0,0,0,0);G.clear(G.COLOR_BUFFER_BIT);ab.set("s0");C.wc(0);R.h(!0,!0);l=4*J*J;K=new Uint8Array(l);G.readPixels(0,0,J,J,G.RGBA,G.UNSIGNED_BYTE,K);J=!0;for(var ba=0;ba<l;++ba)J=J&&3>Math.abs(K[ba]-127);C.remove();db.Y();return J}var n=0,k=null,m=0,q=null,B=null,E=null,
p=null,u=null,D=null,y=!1,e=[],F={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,B:null,Oc:null,Te:!1,H:!1,ea:null,bb:4,Pb:0},O=!1,I=null,S=null,v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],P=!1,Q=!1,w=new Float32Array(1),f=new Int32Array(w.buffer),A={Gb:null,Hb:null},M={j:function(){y||(u=[G.RGBA,null,G.RGBA,G.RGBA],D=[G.RGBA,null,G.RGBA,G.RGBA],k=[G.TEXTURE0,G.TEXTURE1,
G.TEXTURE2,G.TEXTURE3,G.TEXTURE4,G.TEXTURE5,G.TEXTURE6,G.TEXTURE7],P="undefined"!==typeof JEContext,Q="undefined"!==typeof cb,P&&JEContext.Fg()&&k.push(G.TEXTURE8,G.TEXTURE9),q=[-1,-1,-1,-1,-1,-1,-1,-1],p=[G.UNSIGNED_BYTE,G.FLOAT,G.FLOAT],y=!0)},Ne:function(){if(!B){for(var l=new Float32Array(16384),C=0;16384>C;++C)l[C]=2*Math.random()-1;B={random:M.instance({isFloat:!0,isPot:!0,array:l,width:64}),Nd:M.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}M.Qf()},wg:function(){return B.Nd},
Qf:function(){p[1]=cb.Bb(G)},Df:function(){D=u=[G.RGBA,G.RGBA,G.RGBA,G.RGBA]},ud:function(l){L.set("s1");db.L();var C=l.u(),J=l.O();G.viewport(0,0,C,J);l.b(0);R.h(!1,!1)},sf:function(l,C){M.ud(l);G.readPixels(0,0,l.u(),l.O(),G.RGBA,G.UNSIGNED_BYTE,C)},tf:function(l,C){M.ud(l);return cb.ac(0,0,l.u(),l.O(),C)},Jc:function(l,C,J,K,ba,ea,ka){l.activeTexture(l.TEXTURE0);var da=l.createTexture();l.bindTexture(l.TEXTURE_2D,da);ba=ba instanceof Float32Array?ba:new Float32Array(ba);l.texParameteri(l.TEXTURE_2D,
l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,ea);l.texImage2D(l.TEXTURE_2D,0,l.RGBA,J,K,0,l.RGBA,l.FLOAT,ba);l.bindTexture(l.TEXTURE_2D,null);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1);ka&&(db.Y(),L.Ca(l));l.viewport(0,0,J,K);l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,
C,0);l.bindTexture(l.TEXTURE_2D,da);ka?R.h(!0,!0):R.Oa(l);l.deleteTexture(da);y&&(q[0]=-1,E=null,n=0)},sb:function(l){l!==n&&(G.activeTexture(k[l]),n=l)},instance:function(l){var C;function J(){V=void 0!==x.B.videoWidth?x.B.videoWidth:x.B.width;X=void 0!==x.B.videoHeight?x.B.videoHeight:x.B.height}function K(H){var W=G.getError();if("FUCKING_BIG_ERROR"===W)return!1;G.texImage2D(G.TEXTURE_2D,0,la,ia,ja,H);W=G.getError();W!==G.NO_ERROR&&ia!==G.RGBA&&(ia=G.RGBA,G.texImage2D(G.TEXTURE_2D,0,la,ia,ja,H));
return!0}function ba(){if(!fb){b(qa);wa&&G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,wa);x.isPot?(G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,x.isMirrorX?G.MIRRORED_REPEAT:G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,x.isMirrorY?G.MIRRORED_REPEAT:G.REPEAT)):(G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.CLAMP_TO_EDGE));x.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&G.texParameterf(G.TEXTURE_2D,JEContext.ng().TEXTURE_MAX_ANISOTROPY_EXT,
JESETTINGS.Tf);G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,x.isLinear?G.LINEAR:G.NEAREST);x.isLinear?G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,x.isMipmap&&!Ba?G.NEAREST_MIPMAP_LINEAR:G.LINEAR):G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,x.isMipmap&&!Ba?G.NEAREST_MIPMAP_NEAREST:G.NEAREST);ia=u[x.bb-1];la=D[x.bb-1];ja=p[na];if(cb.ba()){var H=cb.Be();ia===G.RGBA&&ja===G.FLOAT?x.isMipmap||x.isLinear?la=bb.De(G):cb.zc()?H&&(la=H):la=G.RGBA16F||G.RGBA:ia===G.RGB&&ja===G.FLOAT&&H&&(la=
H,ia=G.RGBA)}if(x.H&&!x.isFloat||x.isFloat&&x.isMipmap&&bb.Xe())la=cb.Ce(),ja=cb.Bb(G);x.Pb&&(Na=x.Pb);x.isSrgb&&4===x.bb&&(ia=JEContext.ug());if(x.B)K(x.B);else if(x.url)K(Aa);else if(ra){H=ra;try{"FUCKING_BIG_ERROR"!==G.getError()&&(G.texImage2D(G.TEXTURE_2D,0,la,V,X,0,ia,ja,H),G.getError()!==G.NO_ERROR&&(G.texImage2D(G.TEXTURE_2D,0,la,V,X,0,ia,ja,null),G.getError()!==G.NO_ERROR&&G.texImage2D(G.TEXTURE_2D,0,G.RGBA,V,X,0,G.RGBA,G.UNSIGNED_BYTE,null)))}catch(Tb){G.texImage2D(G.TEXTURE_2D,0,la,V,X,
0,ia,ja,null)}x.isKeepArray||(ra=null)}else H=G.getError(),"FUCKING_BIG_ERROR"!==H&&(G.texImage2D(G.TEXTURE_2D,0,la,V,X,0,ia,ja,null),H=G.getError(),H!==G.NO_ERROR&&(ia=G.RGBA,x.H&&ja!==G.FLOAT&&(ja=G.FLOAT,G.texImage2D(G.TEXTURE_2D,0,la,V,X,0,ia,ja,null))));if(x.isMipmap)if(!Ba&&fa)fa.zb(),Oa=!0;else if(Ba){H=Math.log2(Math.min(V,X));Ea=Array(1+H);Ea[0]=qa;for(var W=1;W<=H;++W){var ma=Math.pow(2,W),aa=V/ma;ma=X/ma;var Ca=G.createTexture();b(Ca);G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.NEAREST);
G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.NEAREST);G.texImage2D(G.TEXTURE_2D,0,la,aa,ma,0,ia,ja,null);b(null);Ea[W]=Ca}Oa=!0}b(null);q[n]=-1;wa&&G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,!1);Ia=!0;x.ea&&fa&&(x.ea(fa),x.ea=null)}}function ea(){for(var H=V*X,W=2*H,ma=3*H,aa=0;aa<H;++aa)ta[0][aa]=Ja[aa],ta[1][aa]=Ja[aa+H],ta[2][aa]=Ja[aa+W],ta[3][aa]=Ja[aa+ma]}function ka(){var H=V*X*4;ya=[new Uint8Array(H),new Uint8Array(H),new Uint8Array(H),new Uint8Array(H)];ta=[new Float32Array(ya[0].buffer),
new Float32Array(ya[1].buffer),new Float32Array(ya[2].buffer),new Float32Array(ya[3].buffer)];Pa=new Uint8Array(4*H);Ja=new Float32Array(Pa.buffer);Ka=!0}function da(){C=new Uint8Array(V*X*4);gb=new Float32Array(C.buffer);Za=!0}var x=Object.assign({},F,l),za=m++;null===x.isFlipY&&(x.isFlipY=x.url||x.array?!0:!1);x.data&&(x.array="string"===typeof x.data?$a(x.data):x.isFloat?new Float32Array(x.data):new Uint8Array(x.data),x.isFlipY=!1);var na=0,z=x.B?!0:!1,N=null,Z=null,T=!1,ua=null;x.H=x.H||x.isFloat;
x.H&&(na=1);!x.Te&&x.isFloat&&Q&&!cb.zc()&&(x.isFloat=!1);x.isFloat&&(na=2);x.isAnisotropicFiltering&&P&&!JEContext.zg()&&(x.isAnisotropicFiltering=!1);var qa=x.Oc||G.createTexture(),Aa=null,ra=!1,V=0,X=0,Ia=!1,fb=!1,Ka=!1,ta=null,ya=null,Pa=null,Ja=null,la=null,ia=null,ja=null,wa=x.isFlipY,Cb=(l=x.H&&x.isMipmap)&&bb.ce(),Ba=l&&Cb?!0:!1,Ea=null,Na=-1,Oa=!1;var Za=!1;var gb=C=null;x.width&&(V=x.width,X=x.height?x.height:V);var fa={get:function(){return qa},u:function(){return V},O:function(){return X},
xg:function(){return x.url},Ag:function(){return x.isFloat},Cg:function(){return x.H},Dg:function(){return x.isLinear},zb:function(){G.generateMipmap(G.TEXTURE_2D)},ae:function(H,W){Ba?(H||(H=fa.Mc()),M.sb(W),b(Ea[H]),q[W]=-1):fa.b(W)},Mc:function(){-1===Na&&(Na=Math.log(V)/Math.log(2));return Na},xe:function(H){if(Ba){H||(H=fa.Mc());L.set("s12");M.sb(0);for(var W=V,ma=X,aa=1;aa<=H;++aa)W/=2,ma/=2,L.ha("u8",.25/W,.25/ma),G.viewport(0,0,W,ma),b(Ea[aa-1]),G.framebufferTexture2D(db.Ta(),G.COLOR_ATTACHMENT0,
G.TEXTURE_2D,Ea[aa],0),R.h(!1,1===aa);q[0]=-1}else fa.zb()},Kg:function(H){(z=!(Array.isArray(H)||H.constructor===Float32Array||H.constructor===Uint8Array))?(ra=null,x.B=H,J()):ra=H},b:function(H){if(!Ia)return!1;M.sb(H);if(q[H]===za)return!1;b(qa);q[H]=za;return!0},wc:function(H){G.activeTexture(k[H]);n=H;b(qa);q[H]=za},l:function(){E=fa;G.framebufferTexture2D(db.Ta(),G.COLOR_ATTACHMENT0,G.TEXTURE_2D,qa,0)},P:function(){E=fa;G.viewport(0,0,V,X);G.framebufferTexture2D(db.Ta(),G.COLOR_ATTACHMENT0,
G.TEXTURE_2D,qa,0)},kc:M.kc,resize:function(H,W){V=H;X=W;ba()},clone:function(H){H=M.instance({width:V,height:X,H:x.H,isFloat:x.isFloat,isLinear:x.isLinear,isMirrorY:x.isMirrorY,isFlipY:H?!wa:wa,isPot:x.isPot});ab.set("s0");db.Y();H.l();G.viewport(0,0,V,X);fa.b(0);R.h(!0,!0);return H},Hf:function(){G.viewport(0,0,V,X)},remove:function(){G.deleteTexture(qa);fb=!0;e.splice(e.indexOf(fa),1);fa=null},refresh:function(){fa.wc(0);wa&&G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,!0);z?G.texImage2D(G.TEXTURE_2D,0,
la,ia,ja,x.B):G.texImage2D(G.TEXTURE_2D,0,la,V,X,0,ia,ja,ra);wa&&G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,!1)},$b:function(){Ka||ka();G.readPixels(0,0,V,4*X,G.RGBA,G.UNSIGNED_BYTE,Pa);ea();return ta},mf:function(){Ka||ka();return cb.ac(0,0,V,4*X,Pa).then(function(){ea();return ta})},qf:function(){Za||da();G.readPixels(0,0,V,X,G.RGBA,G.UNSIGNED_BYTE,C);return gb},pf:function(){Za||da();return cb.ac(0,0,V,X,C)},xb:function(H){db.L();L.set("s13");fa.b(0);if(H)G.viewport(0,0,V,X),L.Gf("u9",.25,.25,.25,.25),
R.h(!1,!0);else for(H=0;4>H;++H)G.viewport(0,X*H,V,X),L.Ed("u9",v[H]),R.h(!1,0===H)},lc:function(H){var W=ja===p[0]&&!t();b(qa);wa&&G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,!0);W?(T||(N=document.createElement("canvas"),N.width=V,N.height=X,Z=N.getContext("2d"),ua=Z.createImageData(V,X),T=!0),ua.data.set(H),Z.putImageData(ua,0,0),G.texImage2D(G.TEXTURE_2D,0,la,ia,ja,N)):G.texImage2D(G.TEXTURE_2D,0,la,V,X,0,ia,ja,H);q[n]=za;wa&&G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,!1)},Tg:function(H,W){b(qa);W&&G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,
!0);G.texImage2D(G.TEXTURE_2D,0,la,ia,ja,H);q[n]=za;W&&G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,!1)},Jg:function(H,W){var ma=V*X,aa=4*ma;H=x.H?H?"RGBE":"JSON":"RGBA";W&&(H=W);W=cb.ba()&&!1;var Ca=null;switch(H){case "RGBE":Ca="s43";break;case "JSON":Ca=W?"s0":"s13";break;case "RGBA":case "RGBAARRAY":Ca="s7"}Ka||("RGBA"===H||"RGBE"===H||"RGBAARRAY"===H?(ya=new Uint8Array(aa),Ka=!0):"JSON"!==H||W||ka());db.L();L.set(Ca);fa.b(0);aa=null;if("RGBA"===H||"RGBE"===H||"RGBAARRAY"===H){G.viewport(0,0,V,X);R.h(!0,
!0);G.readPixels(0,0,V,X,G.RGBA,G.UNSIGNED_BYTE,ya);if("RGBAARRAY"===H)return{data:ya};O||(I=document.createElement("canvas"),S=I.getContext("2d"),O=!0);I.width=V;I.height=X;ma=S.createImageData(V,X);ma.data.set(ya);S.putImageData(ma,0,0);aa=I.toDataURL("image/png")}else if("JSON"===H)if(W)aa=new Float32Array(ma),G.viewport(0,0,V,X),R.h(!0,!0),G.readPixels(0,0,V,X,G.RGBA,G.FLOAT,aa);else{for(aa=0;4>aa;++aa)G.viewport(0,X*aa,V,X),L.Ed("u9",v[aa]),R.h(!aa,!aa);fa.$b();aa=Array(ma);for(W=0;W<ma;++W)aa[4*
W]=ta[0][W],aa[4*W+1]=ta[1][W],aa[4*W+2]=ta[2][W],aa[4*W+3]=ta[3][W]}return{format:H,data:aa,width:V,height:X,isMirrorY:x.isMirrorY,isFlipY:"RGBA"===H?x.isFlipY:!x.isFlipY}}};x.isMipmap&&!Ba&&Ia&&!Oa&&(fa.zb(),Oa=!0);if(x.url)b(qa),G.texImage2D(G.TEXTURE_2D,0,G.RGBA,1,1,0,G.RGBA,G.UNSIGNED_BYTE,null),Aa=new Image,Aa.a="Anonymous",Aa.crossOrigin="Anonymous",Aa.src=x.url,Aa.onload=function(){V=Aa.width;X=Aa.height;ba()};else if(x.B){var hb=function(){J();V?ba():setTimeout(hb,1)};hb()}else x.array?(x.H&&
!x.isFloat?x.array instanceof Uint16Array?(ra=x.array,ba()):h()?(ra=g(x.array),ba()):(ba(),M.Jc(G,qa,fa.u(),fa.O(),x.array,wa,!0)):(ra=x.isFloat?x.array instanceof Float32Array?x.array:new Float32Array(x.array):x.array instanceof Uint8Array?x.array:new Uint8Array(x.array),ba()),x.isKeepArray||(ra&&ra!==x.array&&(ra=null),delete x.array)):x.Oc?Ia=!0:ba();fa.tg=fa.u;x.ea&&Ia&&(x.ea(fa),x.ea=null);e.push(fa);return fa},L:function(l){l!==n&&(G.activeTexture(k[l]),n=l);q[l]=-1;b(null)},Wf:function(l){B.random.b(l)},
kc:function(){E=null;G.framebufferTexture2D(db.Ta(),G.COLOR_ATTACHMENT0,G.TEXTURE_2D,null,0)},reset:function(){0!==n&&G.activeTexture(k[0]);for(var l=0;l<k.length;++l)q[l]=-1;n=-1},Ig:function(){n=-1},Mf:function(){for(var l=0;l<k.length;++l)M.L(l)},Kc:function(){B&&(B.random.remove(),B.Nd.remove())},Sg:function(l,C){if("RGBA"===l.format||"RGBE"===l.format){var J=new Image;J.src=l.data;J.onload=function(){M.instance({isMirrorY:l.isMirrorY,isFlipY:l.isFlipY,isFloat:!1,B:J,ea:function(K){if("RGBA"===
l.format)C(K);else{var ba=l.width,ea=l.height,ka=M.instance({isMirrorY:l.isMirrorY,isFloat:!0,width:ba,height:ea,isFlipY:l.isFlipY});db.Y();G.viewport(0,0,ba,ea);L.set("s44");ka.l();K.b(0);R.h(!0,!0);M.L(0);C(ka);cb.flush();setTimeout(K.remove,50)}}})}}else"JSON"===l.format?C(M.instance({isFloat:!0,isFlipY:l.isFlipY,width:l.width,height:l.height,array:new Float32Array(l.data)})):C(!1)},ge:g,i:function(){E&&(db.Y(),M.kc(),db.L());M.Mf();e.slice(0).forEach(function(l){l.remove()});e.splice(0);y=!1;
m=0;"undefined"!==typeof bb&&bb.i();B=null}};return M}(),ib={instance:function(b){var d=[U.instance(b),U.instance(b)],g=[d[1],d[0]],h=g,t={Cd:function(r){h[1].l();h[0].b(r);t.Id()},Af:function(r){h[1].P();h[0].b(r);t.Id()},Id:function(){h=h===d?g:d},refresh:function(){h[0].refresh();h[1].refresh()},b:function(r){h[0].b(r)},Vf:function(r){h[1].b(r)},Ge:function(){return h[0]},rg:function(){return h[1]},lc:function(r){h[0].lc(r);h[1].lc(r)},remove:function(){h[0].remove();h[1].remove();h=null},sync:function(){t.Af(0);
L.set("s0");R.h(!1,!1)}};return t}},R=function(){function b(m){var q={X:null,D:null};q.X=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,q.X);m.bufferData(m.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),m.STATIC_DRAW);q.D=m.createBuffer();m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,q.D);m.bufferData(m.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),m.STATIC_DRAW);return q}var d=null,g=0,h=!1,t=[],r=-2,n=-2,k={reset:function(){n=r=-2},j:function(){h||(d=b(G),k.tb(),h=!0)},instance:function(m){var q=g++,B=m.D?
m.D.length:0,E="undefined"===typeof m.mode?G.STATIC_DRAW:m.mode,p=G.createBuffer();G.bindBuffer(G.ARRAY_BUFFER,p);G.bufferData(G.ARRAY_BUFFER,m.X instanceof Float32Array?m.X:new Float32Array(m.X),E);r=q;var u=null,D=null,y=null;if(m.D){u=G.createBuffer();G.bindBuffer(G.ELEMENT_ARRAY_BUFFER,u);var e=null;65536>m.D.length?(e=Uint16Array,D=G.UNSIGNED_SHORT,y=2):(e=Uint32Array,D=G.UNSIGNED_INT,y=4);e=m.D instanceof e?m.D:new e(m.D);G.bufferData(G.ELEMENT_ARRAY_BUFFER,e,E);n=q}var F={be:function(O){r!==
q&&(G.bindBuffer(G.ARRAY_BUFFER,p),r=q);O&&ab.cc()},Zd:function(){n!==q&&(G.bindBuffer(G.ELEMENT_ARRAY_BUFFER,u),n=q)},bind:function(O){F.be(O);F.Zd()},cg:function(){G.drawElements(G.TRIANGLES,B,D,0)},dg:function(O,I){G.drawElements(G.TRIANGLES,O,D,I*y)},remove:function(){G.deleteBuffer(p);m.D&&G.deleteBuffer(u);F=null}};t.push(F);return F},tb:function(){-1!==r&&(G.bindBuffer(G.ARRAY_BUFFER,d.X),r=-1);-1!==n&&(G.bindBuffer(G.ELEMENT_ARRAY_BUFFER,d.D),n=-1)},h:function(m,q){m&&R.tb();q&&ab.hb();G.drawElements(G.TRIANGLES,
3,G.UNSIGNED_SHORT,0)},Oa:function(m){m=m||G;var q=b(m);m.bindBuffer(m.ARRAY_BUFFER,q.X);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,q.D);ab.ib(m);m.clear(m.COLOR_BUFFER_BIT);m.drawElements(m.TRIANGLES,3,m.UNSIGNED_SHORT,0);m.flush();m.bindBuffer(m.ARRAY_BUFFER,null);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,null);m.deleteBuffer(q.X);m.deleteBuffer(q.D);k.reset();h&&(k.tb(),ab.hb())},Kc:function(){var m=G,q=d;m.deleteBuffer(q.X);m.deleteBuffer(q.D)},i:function(){k.Kc();t.forEach(function(m){m.remove()});G.bindBuffer(G.ARRAY_BUFFER,
null);G.bindBuffer(G.ELEMENT_ARRAY_BUFFER,null);k.reset();h=!1;t.splice(0);g=0}};return k}(),db=function(){var b=null,d=null,g=null,h=!1,t=[],r={C:-2,Ic:1},n={Za:function(){return h},j:function(){if(!h){b=G.createFramebuffer();var k=cb.ba();d=k&&G.DRAW_FRAMEBUFFER?G.DRAW_FRAMEBUFFER:G.FRAMEBUFFER;g=k&&G.READ_FRAMEBUFFER?G.READ_FRAMEBUFFER:G.FRAMEBUFFER;h=!0}},og:function(){return d},Ee:function(){return g},Ta:function(){return G.FRAMEBUFFER},sg:function(){return r},gg:function(){return b},instance:function(k){void 0===
k.Wc&&(k.Wc=!1);var m=k.sa?k.sa:null,q=k.width,B=void 0!==k.height?k.height:k.width,E=b,p=null,u=!1,D=!1,y=0;m&&(q=q?q:m.u(),B=B?B:m.O());var e={Bd:function(){u||(E=G.createFramebuffer(),u=!0,y=r.Ic++)},Td:function(){e.Bd();e.l();p=G.createRenderbuffer();G.bindRenderbuffer(G.RENDERBUFFER,p);G.renderbufferStorage(G.RENDERBUFFER,G.DEPTH_COMPONENT16,q,B);G.framebufferRenderbuffer(d,G.DEPTH_ATTACHMENT,G.RENDERBUFFER,p);G.clearDepth(1)},bind:function(F,O){y!==r.C&&(G.bindFramebuffer(d,E),r.C=y);m&&m.l();
O&&G.viewport(0,0,q,B);F&&G.clear(G.COLOR_BUFFER_BIT|G.DEPTH_BUFFER_BIT)},Uf:function(){y!==r.C&&(G.bindFramebuffer(d,E),r.C=y)},clear:function(){G.clear(G.COLOR_BUFFER_BIT|G.DEPTH_BUFFER_BIT)},$f:function(){G.clear(G.COLOR_BUFFER_BIT)},ag:function(){G.clear(G.DEPTH_BUFFER_BIT)},Hf:function(){G.viewport(0,0,q,B)},l:function(){y!==r.C&&(G.bindFramebuffer(d,E),r.C=y)},rtt:function(F){m=F;r.C!==y&&(G.bindFramebuffer(G.FRAMEBUFFER,E),r.C=y);F.l()},L:function(){G.bindFramebuffer(d,null);r.C=-1},resize:function(F,
O){q=F;B=O;p&&(G.bindRenderbuffer(G.RENDERBUFFER,p),G.renderbufferStorage(G.RENDERBUFFER,G.DEPTH_COMPONENT16,q,B))},remove:function(){E===b||D||(G.bindFramebuffer(d,E),G.framebufferTexture2D(d,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,null,0),p&&G.framebufferRenderbuffer(d,G.DEPTH_ATTACHMENT,G.RENDERBUFFER,null),G.bindFramebuffer(d,null),G.deleteFramebuffer(E),p&&G.deleteRenderbuffer(p));D=!0}};k.Wc&&e.Td();t.push(e);return e},L:function(){G.bindFramebuffer(d,null);r.C=-1},Nf:function(){G.bindFramebuffer(d,
null);G.clear(G.COLOR_BUFFER_BIT|G.DEPTH_BUFFER_BIT);cb.Gd();r.C=-1},reset:function(){r.C=-2},Y:function(){0!==r.C&&(G.bindFramebuffer(d,b),r.C=0)},clear:function(){cb.Gd();G.clear(G.COLOR_BUFFER_BIT)},i:function(){n.L();t.forEach(function(k){k.remove()});null!==b&&(G.deleteFramebuffer(b),b=null);n.reset();h=!1;t.splice(0);r.Ic=1}};return n}(),cb=function(){function b(){t="undefined"===typeof eb?JEContext:eb;r=!0}function d(e,F){for(var O=0;O<e.length;++O){var I=F.getExtension(e[O]);if(I)return I}return null}
function g(){null!==u.mb&&(clearInterval(u.mb),u.mb=null);u.na=!1}function h(){u.ya&&(G.deleteSync(u.ya),u.ya=null)}var t=null,r=!1,n={Yc:!1,ec:null,fc:null,ad:!1,We:!1,hc:null,bd:!1,ic:null,Zc:!1,ub:null,Qe:!1,vb:null,Re:!1},k=null,m={Z:!0,aa:!0,yb:!0,td:!1},q=null,B=!0,E=null,p=null,u={na:!1,ma:null,ya:null,Eb:-1,T:null,mb:null},D="undefined"===typeof window?{}:window,y={j:function(){if(r)return!0;y.reset();r||b();var e=G;if(!k.Yc){k.ec=y.Fc(e);D.GL_EXT_FLOAT=k.ec;k.ad=k.ec?!0:!1;if(k.ad||y.ba())k.fc=
y.Gc(e),k.We=k.fc?!0:!1,D.GL_EXT_FLOATLINEAR=k.fc;k.Yc=!0}if(!k.Zc){k.hc=y.Ma(e);k.hc&&(k.bd=!0,D.GL_EXT_HALFFLOAT=k.hc);if(k.bd||y.ba())k.ic=y.Hc(e),D.GL_EXT_HALFFLOATLINEAR=k.ic;k.yg=k.ic?!0:!1;k.Zc=!0}k.ub=y.Dc(e);k.Qe=k.ub?!0:!1;D.GL_EXT_COLORBUFFERFLOAT=k.ub;k.vb=y.Ec(e);k.Re=k.vb?!0:!1;D.GL_EXT_COLORBUFFERHALFFLOAT=k.vb;db.j();U.j();if(!y.le())return!1;R.j();U.Ne();return!0},reset:function(){k=Object.assign({},n);q=Object.assign({},m)},u:function(){r||b();return t.u()},O:function(){r||b();return t.O()},
ba:function(){r||b();return t.ba()},Cc:function(e){y.Dc(e);y.Ec(e);y.Fc(e);y.Gc(e);y.Ma(e);y.Hc(e)},Dc:d.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Ec:d.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Fc:d.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Gc:d.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),
Ma:d.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Hc:d.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Bb:function(e){var F=y.Ma(e);return F&&F.HALF_FLOAT_OES?F.HALF_FLOAT_OES:e.HALF_FLOAT||e.FLOAT},Be:function(){return p||G.RGBA32F||G.RGBA},Ce:function(){return E||G.RGBA16F||G.RGBA},ye:function(){return q},zc:function(){return q.Z},Zf:function(){return q.aa},Yf:function(){return q.yb},
de:function(){return q.td&&B},Md:function(e){B=e;!e&&u.na&&(h(),G.bindBuffer(u.T,null),u.na=!1)},Eg:function(){return u.na},kb:function(e,F,O){function I(){e.bindTexture(e.TEXTURE_2D,null);e.bindFramebuffer(S,null);e.deleteTexture(Q);e.deleteFramebuffer(P)}var S=e.FRAMEBUFFER,v=e.NEAREST,P=e.createFramebuffer();e.bindFramebuffer(S,P);var Q=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,Q);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,
e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,v);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,v);e.texImage2D(e.TEXTURE_2D,0,F,3,3,0,e.RGBA,O,null);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,Q,0);if(e.checkFramebufferStatus(e.READ_FRAMEBUFFER||e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE)return I(),!1;ab.bc(e);e.clearColor(0,0,0,0);e.viewport(0,0,3,3);e.disable(e.DEPTH_TEST);e.clear(e.COLOR_BUFFER_BIT);
R.Oa(e);e.bindFramebuffer(S,null);ab.Ca(e);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,Q);R.Oa(e);F=new Uint8Array(36);e.readPixels(0,0,3,3,e.RGBA,e.UNSIGNED_BYTE,F);I();for(O=0;36>O;++O)if(3!==O%4&&3<Math.abs(F[O]-127))return!1;return!0},wb:function(e){var F={Z:!1,aa:!1};e.disable(e.BLEND);e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);e.RGBA32F&&y.kb(e,e.RGBA32F,e.FLOAT)&&(F.Z=!0,p=e.RGBA32F);!F.Z&&y.kb(e,e.RGBA,e.FLOAT)&&(F.Z=!0,p=e.RGBA);var O=y.Bb(e);E=null;e.RGBA16F&&y.kb(e,e.RGBA16F,
O)&&(F.aa=!0,E=e.RGBA16F);!F.aa&&y.kb(e,e.RGBA,O)&&(F.aa=!0,E=e.RGBA);return F},me:function(){var e=db.instance({width:2});e.Bd();var F=U.instance({width:2,isFloat:!0,bb:3});e.l();F.l();y.flush();G.checkFramebufferStatus(db.Ee())!==G.FRAMEBUFFER_COMPLETE?(U.Df(),q.yb=!1):q.yb=!0;e.remove();F.remove()},oe:function(){var e=!1;y.ba()&&(e="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(F){return"undefined"!==typeof G[F]}));
q.td=e},le:function(){var e=y.wb(G);Object.assign(q,e);if(!q.Z&&!q.aa)return!1;y.me();y.oe();return!0},rf:function(e,F,O,I,S){G.readPixels(e,F,O,I,G.RGBA,G.UNSIGNED_BYTE,S);return Promise.resolve(S,!1)},ac:function(e,F,O,I,S,v){if(!y.de())return y.rf(e,F,O,I,S);null===u.ma&&(u.T=G.PIXEL_PACK_BUFFER,u.ma=G.createBuffer(),u.Eb=-1);G.bindBuffer(u.T,u.ma);S.byteLength!==u.Eb&&(G.bufferData(u.T,S.byteLength,G.STREAM_READ),u.Eb=S.byteLength);G.readPixels(e,F,O,I,G.RGBA,G.UNSIGNED_BYTE,0);u.ya=G.fenceSync(G.SYNC_GPU_COMMANDS_COMPLETE,
0);y.flush();var P=!1;return new Promise(function(Q,w){function f(){if(!u.na)return g(),w(),!1;switch(G.clientWaitSync(u.ya,0,0)){case G.TIMEOUT_EXPIRED:case G.WAIT_FAILED:return!1;default:return g(),h(),G.getBufferSubData(u.T,0,S),G.bindBuffer(u.T,null),Q(S,P),!0}}g();u.na=!0;f()||(v&&!P&&(P=!0,v()),u.mb=setInterval(f,0))})},Gd:function(){G.viewport(0,0,y.u(),y.O())},flush:function(){G.flush()},i:function(){g();h();U.i();db.i();R.i();null!==u.ma&&(G.deleteBuffer(u.ma),u.ma=null);ab.reset();r=!1}};
return y}(),bb=function(){function b(v,P,Q,w){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,w?e.NEAREST_MIPMAP_NEAREST:e.LINEAR);var f=null;if(null!==Q)try{f=e.getError();if("FUCKING_BIG_ERROR"===f)return!1;e.texImage2D(e.TEXTURE_2D,0,v,4,4,0,e.RGBA,P,Q);f=e.getError();if(f!==e.NO_ERROR)return!1}catch(A){return!1}w&&e.generateMipmap(e.TEXTURE_2D);e.clear(e.COLOR_BUFFER_BIT);R.Oa(e);f=e.getError();if("FUCKING_BIG_ERROR"===f)return!1;e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,B);f=e.getError();
f===e.INVALID_OPERATION&&"undefined"!==typeof e.PIXEL_PACK_BUFFER&&(e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,B),f=e.getError());if(f!==e.NO_ERROR)return!1;Q=!0;for(w=0;16>w;++w)Q=Q&&4>Math.abs(B[w]-127);Q&&(m.md=P,m.Vc=v);return Q}function d(v,P){return F.Z&&b(v,e.FLOAT,new Float32Array(E),P)?(k=n.sc,!0):!1}function g(v,P,Q){if(!F.aa)return!1;var w=U.ge(E),f=cb.Ma(e);if(f&&f.HALF_FLOAT_OES&&b(v,f.HALF_FLOAT_OES,w,P)||e.HALF_FLOAT&&b(v,e.HALF_FLOAT,w,P))return k=
n.va,!0;w=new Float32Array(E);if(b(v,e.FLOAT,w,P))return k=n.va,!0;e.bindTexture(e.TEXTURE_2D,Q);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.UNSIGNED_BYTE,null);e.bindFramebuffer(m.Ka,S);U.Jc(e,Q,2,2,w,!1,!1);e.bindFramebuffer(m.Ka,null);e.bindTexture(e.TEXTURE_2D,Q);return b(v,null,null,P)?(k=n.va,!0):!1}function h(v,P,Q){q=!0;if(g(v,!0,Q)||d(P,!0))return!0;q=!1;return g(v,!1,Q)||d(P,!1)?!0:!1}function t(v){if(k===n.M){e=v||G;k=n.RGBA8;q=!0;cb.Cc(e);F||(F=cb.wb(e));db.reset();S=e.createFramebuffer();
m.Ka=e.DRAW_FRAMEBUFFER||e.FRAMEBUFFER;e.bindFramebuffer(m.Ka,null);e.clearColor(0,0,0,0);e.viewport(0,0,2,2);L.M();O=L.Ca(e);v=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,v);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);I=v;var P=v=e.RGBA,Q=e.RGBA16F,w=e.RGBA32F;w&&(v=w);Q&&(P=Q);if((Q||w)&&h(P,v,I))return r(),!0;v=P=e.RGBA;if(h(P,v,I))return r(),
!0;k=n.RGBA8;r();return!1}}function r(){e.deleteProgram(O.ga);e.deleteTexture(I);I=O=null}for(var n={M:-1,sc:3,va:2,RGBA8:0},k=n.M,m={md:null,Vc:null,Ka:null},q=!0,B=new Uint8Array(16),E=Array(64),p=0;4>p;++p)for(var u=0;4>u;++u){var D=0===(u+p)%2?1:0,y=4*p+u;E[4*y]=D;E[4*y+1]=D;E[4*y+2]=D;E[4*y+3]=D}var e=null,F=null,O=null,I=null,S=null;return{ce:function(v){t(v);return q},yc:function(v,P){k===n.M&&(typeof("undefined"!==P)&&(F=P),t(v));return k!==n.RGBA8},Bg:function(v){t(v);return k===n.sc},Xe:function(v){t(v);
return k===n.va},pg:function(v){t(v);return m.md},De:function(v){t(v);return m.Vc},i:function(){e=null;q=!0;k=n.M;F=null}}}(),jb={instance:function(b){var d=U.instance(b.alpha),g=U.instance(b.beta);return{qe:function(){d.b(1);g.b(2)}}}},mb={instance:function(b){var d=null,g=!1,h=!1,t=null,r=!1,n=!1,k=null,m="undefined"===typeof b.preprocessing?!1:b.preprocessing,q="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(g=!0,c&&void 0!==c.Yd&&(b.mask=c.Yd+b.mask),d=U.instance({isFloat:!1,
url:b.mask}));var B=!1;b.customInputShader&&(B="s45",L.tc({name:"_",id:B,c:b.customInputShader,Rg:["uSource"],precision:"lowp"}),L.A(B,[{type:"1i",name:"_",value:0}]));switch(m){case "sobel":k="s32";r=!0;break;case "meanNormalization":k="s33";r=!0;break;case "grayScale":k="s29";r=!1;break;case "grayScaleTilt":k="s30";n=!0;r=!1;break;case "rgbGrayTilt":k="s31";n=!0;r=!1;break;case "copy":k=B?B:"s0";break;case "inputLightRegulation":k=B?B:"s29";t=kb.instance({Uc:q,ld:b.size,jd:b.nBlurPass,Ya:!1});h=
!0;break;case "inputMix0":k="none";t=lb.instance({ja:q,Od:b.varianceMin,xc:b.blurKernelSizePx,Ya:!1});h=!0;break;case "direct":case "none":k="abort";break;default:k="s4"}n&&L.A(k,[{name:"u27",type:"1f",value:b.tilt}]);g&&(k+="Mask");var E=U.instance({isFloat:!1,isPot:!1,width:b.size}),p={u:function(){return q},Cb:function(){return p.u()},Ke:function(){return h?t.Db():E},K:function(u){db.Y();"abort"!==k&&("none"!==k&&(L.set(k),r&&L.F("u28",1/b.size),E.P(),g&&d.b(1),R.h(!1,!1),E.b(0),u=E),h&&t.process(u))},
i:function(){E.remove();g&&d.remove()}};return p}},sb={instance:function(b){function d(l){t.forEach(function(C,J){r[J][0]=l[0][C];r[J][1]=l[1][C];r[J][2]=l[2][C];r[J][3]=l[3][C]});return r}b.normalize=b.normalize||!1;var g={input:null,Ha:null,Ib:null,W:null,cb:null,Xb:null,Yb:null},h=null,t=[],r=[],n=!1,k=null,m=!0,q=-1,B=b.isReorganize?b.isReorganize:!1,E=b.kernelsCount?!0:!1,p=b.dynPelu?jb.instance(b.dynPelu):!1,u=p?!0:!1,D={isEnabled:!1};b.Ve?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:
b.fb.Cb(),m=!1):"full"===b.connectivityUp&&(b.sparsity=b.fb.Cb());var y={elu:"s16",elu01:"s17",relu:"s15",arctan:"s19",sigmoid:"s14",copy:"s0",softplus:"s20",dynPelu:"s18"}[b.activation],e=b.sparsity*b.sparsity,F=!1,O=b.size,I="";if(b.maxPooling){switch(b.maxPooling.size){case 2:I="s34";break;case 4:I="s35"}F=!0;O/=b.maxPooling.size;g.Xb=U.instance({isFloat:!0,isPot:!1,width:O})}var S=b.normalization?!0:!1,v=null,P=null,Q=null;if(S){v="s46"+b.index.toString();L.Sc("s46",v,[((b.normalization.n-1)/
2).toFixed(1)]);L.A(v,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u8",value:[1/b.size,1/b.size]},{type:"1f",name:"u7",value:b.normalization.alpha},{type:"1f",name:"u10",value:b.normalization.beta},{type:"1f",name:"u31",value:b.normalization.k}]);var w={isFloat:!0,isPot:!0,width:b.size};P=U.instance(w);Q=U.instance(w)}var f=-1,A=null;m&&(g.W=U.instance({isFloat:!0,isPot:!1,width:b.size}));g.Ha=U.instance(b.bias);var M={u:function(){return b.size},Cb:function(){return O},Lc:function(){return b.classesCount},
$d:function(l){h.b(l)},jf:function(){b.remap&&b.remap.isEnabled&&(D={isEnabled:!0,af:U.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),ab:b.remap.layers.map(function(l){return b.parent.He(l)}),depth:b.remap.depth})},Ef:function(){switch(b.connectivityUp){case "direct":A=nb.instance(b.connectivity);break;case "square":A=ob.instance(b.connectivity);break;case "squareFast":A=pb.instance(b.connectivity,b.activation);break;case "full":A=
qb.instance(b.connectivity);break;case "conv":q=b.kernelsCount,A=rb.instance(b.connectivity),B&&(g.cb=U.instance({width:O,isFloat:!0,isFlipY:!1,isPot:!1}))}if(A.ra){var l=b.size*b.sparsity;f=Math.log(l/b.size)/Math.log(2);g.input=U.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:l,Pb:f});g.Ib=U.instance({isFloat:!0,isPot:!0,width:b.size})}},K:function(l,C){h=l;A.ra?(g.input.P(),E&&g.Ha.b(2),A.K(D),g.input.b(0),g.input.xe(f),g.Ib.P(),E?L.set("s0"):(L.set("s28"),L.F("u26",e),g.Ha.b(1)),g.input.ae(f,
0),R.h(!1,!1),L.set(y),S?P.l():g.W.l(),g.Ib.b(0),u&&p.qe(),R.h(!1,!1)):(g.W.P(),g.Ha.b(1),A.K());S&&(L.set(v),Q.l(),P.b(0),R.h(!1,!1),L.set("s47"),L.F("u7",1),g.W.l(),Q.b(1),R.h(!1,!1));if(m)return F?(g.Xb.P(),g.W.b(0),L.set(I),L.ha("u8",1/b.size,1/b.size),R.h(!1,!1),C=g.Xb):C=g.W,C.b(0),B&&(g.cb.l(),L.set("s22"),L.ha("u13",q,O/q),R.h(!1,!1),C=g.cb,g.cb.b(0)),C;var J=g.W;b.normalize&&(L.set("gpuRawAvg"===n?"s9":"s8"),L.F("u4",1/b.size),g.Yb.P(),g.W.b(0),R.h(!1,!1),J=g.Yb);l=null;switch(n){case "cpuRGBA2Float":J.xb(!1);
C?l=M.kf(J).then(k):(J=M.lf(J),k(J));break;case "cpuMeanFloat":J.xb(!0);if(C)l=J.pf().then(k);else{J=J.qf();for(var K=0;K<J.length;++K);k(J)}break;case "gpuRawAvg":case "gpuRaw":J.b(0);case "none":null!==k&&k(J)}C&&null===l&&(l=Promise.resolve());return l},he:function(l){l&&(n=l.Zb||"none",k=l.Wb||null);g.W=U.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});l="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var C=0,J=0,K=0;C<l;++C)t.push(J+(b.size-1-K)*
b.size),r.push([-1,-1,-1,-1]),++J,J===b.size&&(J=0,++K);b.normalize&&(g.Yb=U.instance({isFloat:!0,isPot:!0,width:b.size}))},kf:function(l){return l.mf().then(d)},lf:function(l){l=l.$b();d(l);return r},i:function(){for(var l in g){var C=g[l];C&&C.remove()}A&&(A.i(),A=null)}};b.fb&&M.Ef(b.fb);return M}};
function tb(b){var d=null,g=null,h=null,t=0;this.j=function(r){this.Cf(r.ab);h.he({Zb:r.Zb,Wb:r.Wb})};this.He=function(r){return d[r]};this.Cf=function(r){var n=null;t=r.length;d=r.map(function(k,m){k=Object.assign({},k,{index:m,parent:this,fb:n,Ve:m===t-1});return n=m=0===m?mb.instance(k):sb.instance(k)});g=d[0];h=d[t-1];d.forEach(function(k,m){0!==m&&k.jf()})};this.K=function(r){var n=r;d.forEach(function(k){n=k.K(n,!1)});return n};this.Fe=function(){return g.u()};this.Le=function(){return h.u()};
this.Db=function(){return h.Ke()};this.Lc=function(){return h.Lc()};this.i=function(){d&&(d.forEach(function(r){r.i()}),h=g=d=null,t=0)};"undefined"!==typeof b&&this.j(b)}
var nb={instance:function(b){var d=U.instance(b.weights);return{ra:!0,Sa:function(){return 1},i:function(){d.remove()},Me:function(){return d},K:function(){L.set("s27");d.b(1);R.h(!1,!1)}}}},qb={instance:function(b){var d=b.fromLayerSize,g=U.instance(b.weights);return{ra:!0,Sa:function(){return d},i:function(){g.remove()},K:function(h){if(h.isEnabled){L.set("s25");h.af.b(3);var t,r=Math.min(h.ab.length,h.depth);for(t=0;t<r;++t)h.ab[t].$d(4+t)}else L.set("s24");L.F("u17",b.toLayerSize);g.b(1);R.h(!1,
!1)}}}},ob={instance:function(b){for(var d=b.fromLayerSize,g=b.toLayerSize,h=b.toSparsity,t=h*g,r=t/d,n=d/g,k=0,m=0,q=0,B=Array(h*g*h*g*4),E=Array(h*g*h*g*4),p=Array(d*d),u=0;u<p.length;++u)p[u]=0;u=Math.floor(h/2);for(var D=.5/g,y=.5/d,e=.5/t,F=0;F<g;++F)for(var O=Math.round(F*n),I=0;I<g;++I){var S=Math.round(I*n),v=F/g,P=I/g;v+=D;P+=D;for(var Q=0;Q<h;++Q){var w=O+Q-u;0>w&&(w+=d);w>=d&&(w-=d);for(var f=0;f<h;++f){var A=k/t,M=m/t,l=S+f-u;0>l&&(l+=d);l>=d&&(l-=d);var C=w/d,J=l/d;M=1-M-1/t;C+=y;J+=
y;A+=e;M+=e;var K=F*h+Q,ba=I*h+f;ba=g*h-ba-1;K=ba*g*h+K;B[4*K]=A;B[4*K+1]=M;B[4*K+2]=C;B[4*K+3]=J;J=p[l*d+w]++;K=J%r;C=w*r+K;l=l*r+(J-K)/r;l=d*r-1-l;l=l*d*r+C;E[4*l]=A;E[4*l+1]=M;E[4*l+2]=v;E[4*l+3]=P;++k>=t&&(k=0,++m);++q}}}p=null;var ea=U.instance(b.weights);delete b.weights.data;var ka=U.instance({width:t,isFloat:!0,array:new Float32Array(E),isPot:!0});E=null;var da=U.instance({width:t,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;return{ra:!0,Sa:function(){return r},i:function(){ka.remove();
da.remove();ea.remove()},K:function(){L.set("s23");ea.b(1);da.b(2);R.h(!1,!1)}}}},rb={instance:function(b){var d=b.kernelsCount,g=b.toSparsity,h=g*b.toLayerSize/b.fromLayerSize,t=U.instance(b.weights);return{ra:!0,Sa:function(){return h},vg:function(){return g},Me:function(){return t},i:function(){t.remove()},K:function(){L.set("s26");L.F("u23",d);L.F("u24",g);L.F("u17",b.toLayerSize);L.F("u25",b.fromLayerSize);t.b(1);R.h(!1,!1)}}}},pb={instance:function(b,d){var g=b.fromLayerSize,h=b.toLayerSize,
t=b.toSparsity,r=b.stride?b.stride:1,n=t*h/g,k=h<g,m=g/h,q=U.instance(b.weights),B="s48"+[g.toString(),h.toString(),t.toString(),r.toString(),d].join("_");L.ue(B)||(b=Xa(d),h=[{type:"1f",name:"u17",value:h},{type:"1f",name:"u30",value:r}],k&&h.push({type:"1f",name:"u25",value:g}),g=[(k?n:t).toFixed(1),b],k&&g.push(m.toFixed(1)),L.Sc(k?"s40":"s39",B,g),L.A(B,h.concat([{type:"1i",name:"u15",value:0},{type:"1i",name:"u22",value:1},{type:"1i",name:"u14",value:3}])));return{ra:!1,Sa:function(){return n},
i:function(){q.remove()},K:function(){L.set(B);q.b(3);R.h(!1,!1)}}}},kb={instance:function(b){var d=b.jd?b.jd:3,g=b.Uc?b.Uc:64,h=b.ld?b.ld:64,t=b.Ya?!0:!1;b={isFloat:!1,width:g,isPot:!1,isFlipY:!1};var r=U.instance(b),n=U.instance(b),k=U.instance(b),m=U.instance(b),q=U.instance({isFloat:!0,width:h,isPot:!1,isFlipY:!1}),B=1/g;return{process:function(E){L.set("s36");m.l();R.h(t,!1);L.set("s37");for(var p=0;p<d;++p)r.l(),L.ha("u8",B,0),R.h(t,!1),k.l(),m.b(0),R.h(t,!1),n.l(),r.b(0),L.ha("u8",0,B),R.h(t,
!1),m.l(),k.b(0),R.h(t,!1),p!==d-1&&n.b(0);L.set("s38");q.l();E.b(0);n.b(1);m.b(2);R.h(t,!1);q.b(0)},Db:function(){return q}}}},lb={instance:function(b){function d(m){return U.instance({isFloat:m,width:g.ja,isPot:!1,isFlipY:!1})}var g=Object.assign({Od:.1,xc:9,ja:128,Ya:!1},b),h=d(!1),t=[d(!1),d(!1),d(!1)],r=[d(!1),d(!1),d(!1)],n=d(!0),k=[h,r[0],r[1]];b={u1:0};L.uc([{id:"s50",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",
g:b,f:["u1"],precision:"lowp"},{id:"s51",name:"_",c:"uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u32;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u32*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",Math.round((g.xc-1)/2).toFixed(2)).replace("2.2222",(1/g.ja).toFixed(6)),g:b,f:["u1","u32"],precision:"lowp"},{id:"s52",name:"_",c:"uniform sampler2D u33,u34,u35,u36;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);varying vec2 vv0;void main(){vec3 a=texture2D(u33,vv0).rgb;float c=texture2D(u34,vv0).r,d=texture2D(u35,vv0).r,h=texture2D(u36,vv0).r,i=a.r*a.r;vec3 b=vec3(c,d,h),j=max(g*f,abs(i-b*b)),k=sqrt(j);gl_FragColor=vec4(a.r,(a-b)/k);}".replace("1.1111",
g.Od.toFixed(4)),g:{u33:0,u34:1,u35:2,u36:3},f:["u33","u34","u35","u36"],precision:"highp"}]);return{process:function(){L.set("s50");h.P();R.h(g.Ya,!1);L.set("s51");for(var m=0;3>m;++m)L.ha("u32",1,0),t[m].l(),k[m].b(0),R.h(!1,!1),L.ha("u32",0,1),r[m].l(),t[m].b(0),R.h(!1,!1);L.set("s52");n.l();h.b(0);r[0].b(1);r[1].b(2);r[2].b(3);R.h(!1,!1);n.b(0)},Db:function(){return n}}}};function ub(b,d){b[d]=!0;b.setAttribute(d,"true")}
function vb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function wb(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return b&&b.length&&2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}function xb(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function yb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function zb(b){if(!b)return b;var d=null;if(b.video){var g=function(h){return h&&"object"===typeof h?Object.assign({},h):h};d={};"undefined"!==typeof b.video.width&&(d.width=g(b.video.width));"undefined"!==typeof b.video.height&&(d.height=g(b.video.height));"undefined"!==typeof b.video.facingMode&&(d.facingMode=g(b.video.facingMode))}d={audio:b.audio,video:d};"undefined"!==typeof b.deviceId&&Ab(d,b.deviceId);return d}
function Ab(b,d){d&&(b.video=b.video||{},b.video.deviceId={exact:d},b.video.facingMode&&delete b.video.facingMode)}function Bb(b){var d=b.video.width;b.video.width=b.video.height;b.video.height=d;return b}
function Db(b){function d(p){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(u,D){return Math.abs(u-p)-Math.abs(D-p)})}function g(p){var u=zb(b);p=p(u);t.push(p);h(p)}function h(p){if(p.video&&p.video.facingMode&&p.video.facingMode.exact){var u=p.video.facingMode.exact;p=zb(p);delete p.video.facingMode.exact;p.video.facingMode.ideal=u;t.push(p)}}var t=[];if(!b||!b.video)return t;h(b);if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var r=
d(b.video.width.ideal).slice(0,3),n=d(b.video.height.ideal).slice(0,3),k={},m=0;for(k.da=void 0;m<r.length;k={da:k.da},++m){k.da=r[m];var q={},B=0;for(q.ca=void 0;B<n.length;q={ca:q.ca},++B)if(q.ca=n[B],k.da!==b.video.width.ideal||q.ca!==b.video.height.ideal){var E=Math.max(k.da,q.ca)/Math.min(k.da,q.ca);E<4/3-.1||E>16/9+.1||g(function(p,u){return function(D){D.video.width.ideal=p.da;D.video.height.ideal=u.ca;return D}}(k,q))}}}g(function(p){return Bb(p)})}b.video.width&&b.video.height&&(b.video.width.ideal&&
b.video.height.ideal&&g(function(p){delete p.video.width.ideal;delete p.video.height.ideal;return p}),g(function(p){delete p.video.width;delete p.video.height;return p}));b.video.facingMode&&(g(function(p){delete p.video.facingMode;return p}),b.video.width&&b.video.height&&g(function(p){Bb(p);delete p.video.facingMode;return p}));t.push({audio:b.audio,video:!0});return t}
function Eb(b){try{var d=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(h){d=window.innerHeight>window.innerWidth}if(d&&b&&b.video){d=b.video.width;var g=b.video.height;d&&g&&d.ideal&&g.ideal&&d.ideal>g.ideal&&(b.video.height=d,b.video.width=g)}}
function Fb(b){b.volume=0;ub(b,"muted");if(xb()){if(1===b.volume){var d=function(){b.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){b.volume=0;ub(b,"muted")},5)}}
function Gb(b,d,g,h){function t(n){r||(r=!0,g(n))}var r=!1;navigator.mediaDevices.getUserMedia(h).then(function(n){function k(){setTimeout(function(){if(b.currentTime){var q=b.videoWidth,B=b.videoHeight;if(0===q||0===B)t("VIDEO_NULLSIZE");else{q&&(b.style.width=q.toString()+"px");B&&(b.style.height=B.toString()+"px");q={ee:null,If:null,bf:null};try{var E=n.getVideoTracks()[0];E&&(q.bf=E,q.ee=E.getCapabilities(),q.If=E.getSettings())}catch(p){}xb()||vb()?b.parentNode&&null!==b.parentNode?(r||d(b,n,
q),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),Fb(b),r||d(b,n,q),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";Fb(b);setTimeout(function(){b.play()},100)},80)):r||d(b,n,q)}}else t("VIDEO_NOTSTARTED")},700)}function m(){b.removeEventListener("loadeddata",m,!1);var q=b.play();Fb(b);"undefined"===typeof q?k():q.then(function(){k()}).catch(function(){t("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==
typeof b.srcObject?b.srcObject=n:(b.src=window.URL.createObjectURL(n),b.videoStream=n);Fb(b);b.addEventListener("loadeddata",m,!1)}).catch(function(n){t(n)})}
function Hb(b,d,g){var h=yb()?document.createElement("video"):!1;if(h)if(yb()){if(g&&g.video){if(vb()){var t=wb();0!==t[0]&&(12>t[0]||12===t[0]&&2>t[1])&&Eb(g)}g.video.width&&g.video.width.ideal&&(h.style.width=g.video.width.ideal+"px");g.video.height&&g.video.height.ideal&&(h.style.height=g.video.height.ideal+"px")}ub(h,"autoplay");ub(h,"playsinline");g&&g.audio?h.volume=0:ub(h,"muted");Gb(h,b,function(){function r(k){if(0===k.length)d("INVALID_FALLBACKCONSTRAINTS");else{var m=k.shift();Gb(h,b,function(){r(k)},
m)}}var n=Db(g);r(n)},g)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}
var Ib=function(){function b(D,y,e,F,O,I,S){if(!p)if(S===I.length)O();else{switch(I[S]){case "A":e();break;case "D":D();break;case "S":y().then(function(v,P){u.Ld();b(D,y,e,P?null:F,O,I,++S)}).catch(function(v){O();throw v;});return;case "R":F&&F()}b(D,y,e,F,O,I,++S)}}var d={n:5,Rb:1,gd:0,Qa:[35,49],La:[2,200],k:.7,Pf:200,hf:.05},g=-1,h=null,t=-1,r=-1,n=0,k=-1,m=-1,q=0,B=0,E=d.La[1],p=!0,u={Ie:function(){switch(g){case -1:return-1;case 0:return m+h.gd;case 1:return q}},ze:function(D){return Math.pow(Math.min(Math.max(k,
0),h.n-1)/(h.n-1),D||1)},j:function(D){h=Object.assign({},d,D);k=m=h.Rb;g=0;u.reset()},Ld:function(D){D=("undefined"===typeof D?Date.now():D)||0;var y=Math.min(Math.max(D-B,h.La[0]),h.La[1]);E=y;B=D;var e=-1===t?0:h.k;t=Math.min(Math.max(1E3/y,5),120)*(1-e)+t*e;D-r>h.Pf&&5<++n&&(y=h.k,k=k*(1-y)+(t<h.Qa[0]?m-1:t>h.Qa[1]?m+1:m)*y,Math.abs(k-m)>1-h.hf&&(y=Math.min(Math.max(Math.round(k),0),h.n-1),y!==m&&(k=m=y,t=(h.Qa[1]-h.Qa[0])/2)),r=D)},vd:function(D,y,e,F,O,I){p=!1;b(D,y,e,F,O,I,0)},stop:function(){p=
!0},Bf:function(D){q=D;g=1},Of:function(){g=0;u.reset()},reset:function(){E=d.La[1];r=t=-1;n=0},mg:function(){return E}};return u}(),Jb=function(){function b(){g(y+u.Qb);e.port.postMessage("DONE")}function d(){var f=u.N;v.isEnabled&&(f=Math.max(f,v.N));S.Fa=0===f?O(g):O(h)}function g(f){I.oa&&null!==D&&(f-=y,f=Math.min(Math.max(f,u.Bc[0]),u.Bc[1]),y+=f,r(),v.isEnabled&&v.Ba&&I.V&&y-v.Mb>u.qc&&(q(),v.Mb=y),D(y))}function h(f){I.oa&&(S.timeout=window.setTimeout(g.bind(null,f),u.N))}function t(){D=null;
I.oa=!1;r()}function r(){S.Fa&&(window.cancelAnimationFrame(S.Fa),S.Fa=null);S.timeout&&(window.clearTimeout(S.timeout),S.timeout=null)}function n(f){f&&!I.V?(I.V=!0,F&&Ib.Of(),e.port.postMessage("STOP"),cb.Md(!0),d()):!f&&I.V&&(I.V=!1,F&&Ib.Bf(1),cb.Md(!1),e.port.postMessage("START"))}function k(f){f.target.hidden?Q():P()}function m(f,A,M){A=f.createShader(A);f.shaderSource(A,M);f.compileShader(A);return A}function q(){v.Ba=!1;var f=v.$,A=v.Ua,M=v.Va,l=v.T;f.uniform1f(v.Pc,Math.random());v.pa?A.beginQueryEXT(l,
M):f.beginQuery(l,M);f.drawElements(f.POINTS,1,f.UNSIGNED_SHORT,0);v.pa?A.endQueryEXT(l):f.endQuery(l);cb.flush();E().then(function(C){C=u.Qd*u.oc*1E3/C;v.nb=(v.nb+1)%u.ua;v.Ob[v.nb]=C;if(++v.cd>u.ua){v.$a.set(v.Ob);v.$a.sort(function(K,ba){return K-ba});C=v.$a[Math.floor(u.ua/2)];v.Na=Math.max(v.Na,C);var J=0;for(J=0;J<v.jc&&!(C>v.Na*(1-(u.pc[J]+u.Rd*(J>=v.lb?1:-1))));++J)J===v.jc-1&&++J;J!==v.lb&&(console.log("THERMAL THROTTLING LEVEL = "+J.toString()),v.lb=J,v.N=0===J?0:u.Pd[J-1],u.nc&&u.nc(J))}v.Ba=
!0}).catch(function(){v.Ba=!0})}function B(f){var A=v.$,M=v.Ua,l=v.Va,C=!1;v.pa?C=M.fg(l,M.QUERY_RESULT_AVAILABLE_EXT):C=A.getQueryParameter(l,A.QUERY_RESULT_AVAILABLE);A=A.getParameter(M.GPU_DISJOINT_EXT);C?f(!A):setTimeout(B.bind(null,f),.1)}function E(){return new Promise(function(f,A){B(function(M){if(M){M=v.$;var l=v.Ua,C=v.Va;M=v.pa?l.getQueryObjectEXT(C,l.QUERY_RESULT_EXT):M.getQueryParameter(C,M.QUERY_RESULT);f(M)}else A()})})}var p={$c:!0,Bc:[1,200],Qb:20,N:0,Sd:!1,oc:50,Qd:240,qc:3E3,ua:3,
pc:[.2,.35,.5],Rd:.05,Pd:[8,20,40],nc:null},u=null,D=null,y=0,e=null,F=!1,O=null,I={fa:!1,V:!0,Lb:!1,Kb:!1,Jb:!1,oa:!1},S={Fa:null,timeout:null},v={isEnabled:!1,Ba:!1,$:null,Ua:null,Va:null,T:null,Pc:null,pa:!0,lb:0,jc:0,N:0,Mb:0,cd:0,Ob:null,$a:null,nb:0,Na:0},P=n.bind(null,!0),Q=n.bind(null,!1),w={j:function(f){u=Object.assign(p,f);Object.assign(I,{V:!0,fa:!0,oa:!1});O=window.requestPostAnimationFrame||window.requestAnimationFrame;if(u.Sd){f=document.createElement("canvas");f.setAttribute("width",
"1");f.setAttribute("height","1");var A={antialias:!1};f=f.getContext("webgl2",A)||f.getContext("webgl",A);if(A=f.getExtension("EXT_disjoint_timer_query")||f.getExtension("EXT_disjoint_timer_query_webgl2")){v.$=f;v.Ua=A;v.isEnabled=!0;v.pa=A.beginQueryEXT?!0:!1;var M=m(f,f.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),l=m(f,f.FRAGMENT_SHADER,"precision lowp float;uniform float u37;void main(){vec4 a=u37*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
u.oc.toString())),C=f.createProgram();f.attachShader(C,M);f.attachShader(C,l);f.linkProgram(C);M=f.getAttribLocation(C,"a0");v.Pc=f.getUniformLocation(C,"u37");f.useProgram(C);f.enableVertexAttribArray(M);C=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,C);f.bufferData(f.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),f.STATIC_DRAW);f.vertexAttribPointer(M,4,f.FLOAT,!1,16,0);C=f.createBuffer();f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,C);f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),f.STATIC_DRAW);
f.disable(f.DEPTH_TEST);f.disable(f.DITHER);f.disable(f.STENCIL_TEST);f.viewport(0,0,1,1);C=v.pa?A.createQueryEXT():f.createQuery();v.Va=C;v.T=A.TIME_ELAPSED_EXT||f.TIME_ELAPSED;v.lb=0;v.jc=u.pc.length;v.N=0;v.Mb=-u.qc;v.Ob=new Float32Array(u.ua);v.$a=new Float32Array(u.ua);v.Na=0;v.nb=0;v.cd=0;v.Ba=!0}}if(u.$c){f=!1;try{if("undefined"===typeof SharedWorker){var J=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
u.Qb.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),K=new Worker(J);K.addEventListener("message",b);e={nd:K,port:K};I.Lb=!0}else{var ba=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
u.Qb.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ea=new SharedWorker(ba);ea.port.start();ea.port.addEventListener("message",b);e={nd:ea,port:ea.port};I.Kb=!0}f=!0}catch(ka){}f&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",k):(window.addEventListener("blur",Q),window.addEventListener("focus",P)),I.Jb=
!0)}F="undefined"!==typeof Ib},i:function(){t();I.Jb&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",k):(window.removeEventListener("blur",Q),window.removeEventListener("focus",P)),I.Jb=!1);I.Kb?(e.port.close(),I.Kb=!1):I.Lb&&(e.nd.terminate(),I.Lb=!1);Object.assign(I,{V:!0,fa:!1,oa:!1});D=null},Gg:function(){return I.V},update:function(f){Object.assign(u,f)},vd:function(f){I.fa||w.j({});r();I.oa=!0;D=f;I.V&&d()},stop:t};return w}(),Kb=function(){var b={kd:4,eb:[1.5,
1.5,2],ia:[.1,.1,.1],xd:1,ja:-1,Fb:-1,Kf:2,gf:1,zd:!0,se:.8},d=null,g=[],h=[0],t=[.5,.5,1];return{j:function(r){d=Object.assign({},b,r);g.splice(0);r=d.eb[0]*d.ia[0];var n=d.eb[1]*d.ia[1],k=1/(1+d.eb[2]*d.ia[2]),m=d.xd*Math.min(d.ja,d.Fb),q=m/d.ja;m/=d.Fb;var B=.5*d.se;B*=B;for(var E=0;E<d.kd;++E){var p=Math.pow(k,E),u=q*p,D=m*p;p=u*d.gf;var y=u*r,e=D*n;u/=2;D/=2;for(var F=1+(1-u-u)/y,O=1+(1-D-D)/e,I=0;I<O;++I)for(var S=D+I*e,v=S-.5,P=0;P<F;++P){var Q=u+P*y,w=Q-.5;w*w+v*v>B||g.push([Q,S,p])}}d.zd&&
g.sort(function(f,A){var M=f[0]-.5;f=f[1]-.5;var l=A[0]-.5;A=A[1]-.5;return M*M+f*f-(l*l+A*A)})},get:function(r){var n=g.length;if(0===n)return t;for(;r>=h.length;)h.push(0);h[r]>=n&&(h[r]=0);var k=g[Math.floor(h[r])];h[r]=(h[r]+1/d.Kf)%n;return k},reset:function(){for(var r=g.length/h.length,n=0;n<h.length;++n)h[n]=Math.floor(n*r)}}}(),Lb={Ab:function(){return Date.now()},ig:function(){return performance.now()}},Mb=function(){var b=0,d=null,g=null,h=null,t=null;return{j:function(r,n){b=r.length;
d=n;g=r;h=new Float32Array(b);t=new Float32Array(b)},Je:function(){return t},Jf:function(r,n,k){r.forEach(function(m,q){var B=Math.min(1,g[q]*k*(n+.33*(1-n)));m=B*m+(1-B)*h[q];h[q]=m;m=d[q](m);m=Math.min(Math.max(m,0),1);t[q]=m})}}}(),Y={VERSION:"1.3.3",ka:[],qb:!1,rb:!1,pb:!1,Ea:!0,Da:!1,ready:!1,initialized:!1},Nb={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280,rotate:0,isAudio:!0,disableRendering:!1},c={neuralNetworkPath:"jeelizFaceExpressionsNNC.json",
rc:"../../",N:0,width:512,height:512,Lf:40,yd:[.6,5.8],ia:[.1,.1,.3],zf:.7,xf:2,yf:[2,2,2],Pa:!0,we:.1,threshold:.8,Jd:.7,Kd:.03,re:.06,ve:.02,Vd:[1,.05],Sf:10,Pe:!1,ob:[2,7],I:{Qc:[3,7],quality:[0,6],position:[0,7],rotation:[5,7]},Tb:11,hd:1,cf:1,Wd:[.1,.01],uf:[.4,-.7,-.4],vf:[.3,0,0],pe:!1,Xd:.001,vc:[Math.PI/10,Math.PI/6],pd:[.1,.4],qd:[.009,.02],rd:[.1,.2],Sb:5,Rc:.1,Ud:[.2,.2,.15,.15,.15,.15,.5,.2,.3,.3,.2],df:[Wa.bind(null,.1,.7),Wa.bind(null,.1,.7),Wa.bind(null,.05,.4),Wa.bind(null,.05,.4),
Wa.bind(null,.05,.6),Wa.bind(null,.05,.6),Wa.bind(null,.1,.5),Wa.bind(null,.3,.7),Wa.bind(null,.7,.8),Wa.bind(null,.7,.8),Wa.bind(null,.15,.6)]};Y.get_nMorphs=function(){return c.Tb};var Ob=null,Pb=null,Qb=null,Rb=[];
function Sb(){function b(){1===++ba&&(Mb.j(c.Ud,c.df),d(),Y.ready=!0,Y.ka.forEach(function(z){z()}),Y.ka.splice(0,Y.ka.length),g(),ba=0)}function d(){I=new Float32Array(c.Tb);S=new Float32Array(c.Tb);v=new Uint8Array(y*y*4);Y.get_morphTargetInfluences=function(){return I};Y.get_morphTargetInfluencesStabilized=function(){return Mb.Je()};Y.set_morphUpdateCallback=function(z){P=z};Y.get_rotation=function(){return f};Y.get_positionScale=function(){var z=F.Hd.Ge();z.xb(!1);z=z.$b();l[0]=1-z[1][0];l[1]=
z[2][0];l[2]=z[3][0]*e[0];return l};Y.get_rotationStabilized=function(){return M};Y.switch_sleep=function(z){ka!==ea.dc||z?ka=z?ea.dc:ea.play:g()};Y.on_detect=function(z){z(da.U);da.Vb.push(z)};Y.is_detected=function(){return da.U};Y.set_animateDelay=function(z){u=z;Jb.update({N:u})}}function g(){ka!==ea.play&&(ka=ea.play,Jb.stop(),h())}function h(){var z,N;return Ra(new Qa(new Ga(function(Z){switch(Z.a){case 1:a:{if("VIDEO"===K.element.nodeName){var T=K.element.currentTime-za;0>T&&(za=K.element.currentTime);
if(1E3*T<c.Sf)break a;za+=T}K.sa.refresh();T=na.Nc();T[0]===K.la[0]&&T[1]===K.la[1]||q()}z=Ib.Ie();N=0;case 2:if(!(N<z)){Z.a=4;break}T=F;var ua=D;L.set("s54");db.Y();T.Wa.P();K.sa.b(0);T.jb.b(1);c.Pa&&L.F("u38",C);R.h(!1,!1);T.Wa.b(0);ua.K(T.Wa);c.Pe?T=U.tf(Q,v).then(t):(U.sf(Q,v),t(),T=Promise.resolve());Z.a=3;return{value:T};case 3:++N;Z.a=2;break;case 4:Nb.disableRendering||(T=F,db.Y(),O.P(),L.set("s57"),c.Pa&&L.F("u38",C),T.jb.b(0),R.h(!1,!1)),T=Ib.ze(),J=3*(1-T)+1*T,Ib.Ld(),Y.Ea&&(db.Nf(),L.set("s53"),
K.sa.b(0),R.h(!1,!1),G.enable(G.BLEND),G.blendFunc(G.SRC_ALPHA,G.ONE),O.b(0),R.h(!1,!1),G.disable(G.BLEND)),G.flush(),ka!==ea.dc&&Jb.vd(h),Z.a=0}})))}function t(){k();if(!c.pe&&da.U){for(var z=0,N=0;3>N;++N)z=n(N+c.I.rotation[0],c.I.rotation[1]),z=(2*z-1)*c.uf[N],z+=c.vf[N],w[N]=z;c.Pa&&(N=c.we,C=C*(1-N)+(-z+C)*N)}r();z=Lb.Ab();N=z-x.ed;var Z=n(c.I.quality[0],c.I.quality[1]);x.od=Wa(c.pd[0],c.pd[1],Z);Z=n(c.I.position[0],c.I.position[1]);var T=n(c.I.position[0]+1,c.I.position[1]),ua=n(c.I.position[0]+
2,c.I.position[1]);x.wd=1-Wa(c.rd[0],c.rd[1],Math.sqrt(Z*Z+T*T+ua*ua)/N);Z=x.qa[0]-w[0];T=x.qa[1]-w[1];ua=x.qa[2]-w[2];N=Math.sqrt(Z*Z+T*T+ua*ua)/N;x.qa[0]=w[0];x.qa[1]=w[1];x.qa[2]=w[2];x.sd=1-Wa(c.qd[0],c.qd[1],N);x.R=x.od*x.wd*x.sd;x.ed=z;x.dd[x.Nb]=x.R;x.Nb=(x.Nb+1)%c.Sb;for(z=0;z<c.Sb;++z)x.R=Math.min(x.dd[z],x.R);Mb.Jf(I,x.R,J,S);P&&P(x.R,J);if(da.U){z=x.R;N=c.Wd;z=J*(N[0]*(1-z)+N[1]*z);for(N=0;3>N;++N)f[N]=z*w[N]+(1-z)*f[N],M[N]=f[N];M[2]-=C}else z=Lb.Ab()*c.Xd,A[0]=c.vc[0]*Math.sin(z),A[1]=
c.vc[1]*Math.cos(z),M[0]=A[0],M[1]=A[1],M[2]=A[2]}function r(){var z=n(c.I.Qc[0],c.I.Qc[1]);da.Xa=c.Rc*z+(1-c.Rc)*da.Xa;da.Xa>c.Jd+c.Kd&&!da.U?(da.Vb.forEach(function(N){N(!0)}),da.U=!0):da.Xa<c.Jd-c.Kd&&da.U&&(da.Vb.forEach(function(N){N(!1)}),da.U=!1,C=0)}function n(z,N){z+=y*N;return(v[4*z]+v[4*z+1]+v[4*z+2]+v[4*z+3])/1020}function k(){I.forEach(function(z,N){if(da.U){var Z=(c.hd+N)%y,T=c.cf+Math.floor((c.hd+N)/y);T=y-1-T;Z+=y*T;T=v.slice(4*Z,4*Z+4);Z=(T[0]+T[1]+T[2]+T[3])/1020;T=c.ve*Math.sqrt((T[0]*
T[0]+T[1]*T[1]+T[2]*T[2]+T[3]*T[3])/1020-Z*Z);I[N]=z>Z-T&&z<Z+T?z:Z}else I[N]=0})}function m(z){D=new tb({ab:z.layers,Zb:"gpuRaw",Wb:function(N){var Z=F;Z.jb.Cd(1);G.viewport(0,0,1,1);L.set("s55");c.Pa&&L.F("u38",C);L.F("u39",x.R);L.Dd("u40",Kb.get(0));L.Dd("u41",c.ia);R.h(!1,!1);Z.Hd.Cd(1);L.set("s56");L.F("u39",x.R);Z.jb.b(0);R.h(!1,!1);Q=N}});z=D.Fe();z!==p&&(p=z,na.Tc(),F.Wa.resize(p,p),na.Fd());y=D.Le();b()}function q(){var z=na.Nc();K.la[0]=z[0];K.la[1]=z[1];eb.Ra().width=z[0];eb.Ra().height=
z[1];c.width=z[0];c.height=z[1];z=K.Rf;var N=K.la[1]/K.la[0],Z=eb.O()/eb.u();N>Z?1>=N?z[0]*=N:z[1]/=N:(z[0]*=N,N=1/Z,z[0]*=N,z[1]*=N);z[1]*=Z;Z=[{name:"u42",type:"1f",value:Z}];L.A("s55",Z);L.A("s57",Z);K.v[0]=0;K.v[1]=0;K.v[2]=0;K.v[3]=0;switch(Nb.rotate){case 0:K.v[0]=z[0];K.v[3]=z[1];break;case 180:K.v[0]=-z[0];K.v[3]=-z[1];break;case 90:K.v[1]=z[0];K.v[2]=-z[1];break;case -90:K.v[1]=-z[0],K.v[2]=z[1]}z=[{type:"mat2",name:"u43",value:K.v}];L.A("s54",z);L.A("s53",z);L.A("s57",[{type:"mat2",name:"u43",
value:90===Math.abs(Nb.rotate)?[0,-K.v[1],-K.v[2],0]:K.v}])}var B=-1,E=-1,p=64,u=c.N,D=null,y=0,e=null,F={},O=null,I=null,S=null,v=null,P=null,Q=null,w=[0,0,0],f=[0,0,0],A=[0,0,0],M=[0,0,0],l=[0,0,0],C=0,J=1,K={Rf:[.5,.5],v:[.5,0,0,.5],element:null,sa:null,la:[-1,-1]},ba=0,ea={ke:-4,ef:-3,Hg:-2,dc:-1,play:0},ka=ea.ef,da={Xa:0,U:!1,Vb:[]},x={R:1,wd:1,od:1,sd:1,qa:[0,0,0],ed:Lb.Ab(),dd:new Float32Array(c.Sb),Nb:0},za=0,na={Tc:function(){B=c.width;E=c.height;Kb.j({eb:c.yf,kd:c.xf,ja:B,Fb:E,xd:c.zf,ia:c.ia,
zd:!0});e=[1,B/E]},Fd:function(){L.A("s53",[{type:"1i",name:"u1",value:0}]);L.A("s54",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u44",value:1},{type:"1f",name:"u38",value:0},{type:"2f",name:"u45",value:e}]);L.A("s57",[{type:"1i",name:"u44",value:0},{type:"2f",name:"u45",value:e},{type:"1f",name:"u38",value:0},{type:"3f",name:"u46",value:[0,.5,1]}]);L.A("s55",[{type:"1i",name:"u47",value:0},{type:"1i",name:"u44",value:1},{type:"1f",name:"u48",value:c.yd[0]},{type:"1f",name:"u49",value:c.yd[1]},
{type:"1f",name:"u50",value:c.Lf},{type:"1f",name:"u51",value:c.threshold},{type:"1f",name:"u52",value:c.re},{type:"1f",name:"u53",value:e[0]},{type:"1f",name:"u38",value:0}]);L.A("s56",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u6",value:1},{type:"2f",name:"u54",value:c.Vd}])},ie:function(){L.uc([{id:"s53",name:"_",ta:"attribute vec2 a0;uniform mat2 u43;varying vec2 vv0;const vec2 f=vec2(.5,.5);void main(){gl_Position=vec4(a0,0.,1.),vv0=f+u43*a0;}",Ga:["a0"],wa:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
f:["u1","u43"],precision:"lowp"},{id:"s54",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ta:"attribute vec2 a0;uniform sampler2D u44;uniform mat2 u43;uniform vec2 u45;uniform float u38;const vec2 e=vec2(.25,.5),f=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u44,e);vec2 d=a.gb,h=a.a*u45;float b=cos(u38),c=sin(u38);vec2 i=mat2(b,c,-c,b)*a0,j=d+i*.5*h,k=j-.5;vv0=f+2.*u43*k,gl_Position=vec4(a0,0.,1.);}",Ga:["a0"],wa:[2],f:["u1","u44","u45",
"u43","u38"],precision:"lowp"},{id:"s55",name:"_",ta:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u47,u44;uniform vec3 u40,u41;uniform float u48,u49,u50,u51,u53,u39,u52,u38,u42;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 i=texture2D(u47,vec2(.4375,.9375)),j=texture2D(u47,vec2(.5625,.9375));float k=dot(i-j,e);bool l=k>u51;vec4 a=texture2D(u44,vec2(.5,.5));l?a.r=2.:a.r>u50?a.r=0.:a.r>1.9&&(a.a>u49||a.a<u48)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u40,a.r=1.;else{float c=dot(e,texture2D(u47,vec2(.0625,.9375))),d=dot(e,texture2D(u47,vec2(.1875,.9375))),f=dot(e,texture2D(u47,vec2(.3125,.9375))),b;a.r>1.9?(b=1.-u39,b*=1.-step(abs(c),u52)*step(abs(d),u52)*step(abs(f),u52)):(b=1.,a.r=0.);float m=a.a*u53,g=cos(u38),h=sin(u38);vec2 n=mat2(g,h/u42,-h*u42,g)*vec2(c,d);a.gba+=vec3(n,f)*u41*b*m;}gl_FragColor=a;}",
f:"u47 u44 u40 u48 u49 u50 u51 u41 u53 u39 u52 u38 u42".split(" ")},{id:"s57",name:"_",ta:"attribute vec2 a0;uniform mat2 u43;varying vec2 vv0;const vec2 f=vec2(.5,.5);void main(){gl_Position=vec4(a0,0.,1.),vv0=f+u43*a0;}",c:"uniform sampler2D u44;uniform vec3 u46;uniform vec2 u45;uniform float u38,u42;varying vec2 vv0;const vec2 l=vec2(1.,1.),e=vec2(.5,.5),m=vec2(.25,.5);void main(){float f=cos(u38),g=-sin(u38);mat2 h=mat2(f,g/u42,-g*u42,f);vec2 b=h*(vv0-e);vec4 i=texture2D(u44,m);vec2 c=h*(i.gb-e);float n=i.a;vec2 d=.5*n*u45,o=c+d,p=c-d,j=step(p,b)*step(b,o);float q=j.x*j.y;vec2 a=abs(c-b)/d;a=pow(a,3.*l),gl_FragColor=vec4(q*u46*max(a.x,a.y),1.);}",
f:"u44 u45 u46 u43 u38 u42".split(" "),precision:"lowp"},{id:"s56",name:"_",c:"uniform sampler2D u1,u6;uniform vec2 u54;uniform float u39;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u6,vv0);float c=mix(u54.x,u54.y,u39);gl_FragColor=mix(b,a,c*f);}",f:["u1","u6","u54","u39"]}])},Oe:function(z){var N=new Float32Array([0,.5,.5,0]);z.Wa=U.instance({isPot:!0,isFloat:!1,width:p});N={width:1,height:1,isFloat:!0,isPot:!1,array:N};z.jb=ib.instance(N);z.Hd=
ib.instance(N)},je:function(){K.sa=U.instance({B:K.element,isPot:!1,isFloat:!1,isFlipY:!0});O=U.instance({isPot:!1,isFloat:!1,width:B,height:E})},j:function(){na.je();na.Oe(F);Jb.j({$c:!1,N:u});Ib.j({Rb:0,n:c.ob[1]-c.ob[0]+1,gd:c.ob[0]});Qb?m(Qb):Ua(function(z){z=JSON.parse(z);m(z)})},i:function(){Jb.stop();D&&(D.i(),D=null);ka=ea.ke},fe:function(z){Y.qb&&Y.qb();var N={video:{facingMode:{ideal:Nb.facingMode},width:{min:Nb.minWidth,max:Nb.maxWidth,ideal:Nb.idealWidth},height:{min:Nb.minHeight,max:Nb.maxHeight,
ideal:Nb.idealHeight}},audio:Nb.isAudio};Ab(N,Nb.deviceId);Hb(function(Z,T){Ob=T;Y.rb&&Y.rb();z(Z)},function(){window.a&&window.a("WEBCAM_UNAVAILABLE")},N)},fd:function(z,N){na.ie();K.element=z;Pb=K.element;q();na.Tc();na.Fd();na.j();N&&N()},Nc:function(){var z=[-1,-1],N=K.element;"VIDEO"===N.nodeName?(z[0]=N.videoWidth,z[1]=N.videoHeight):(z[0]=N.width,z[1]=N.height);90===Math.abs(Nb.rotate)&&z.reverse();return z}};Rb.push(na);return na}Y.onLoad=function(b){Y.ready?b():Y.ka.push(b)};
Y.switch_displayVideo=function(b){Y.Ea=b;Y.Da&&(Y.Da.style.display=Y.Ea?"block":"none")};Y.onWebcamAsk=function(b){Y.qb=b};Y.onContextLost=function(b){Y.pb=b};Y.onWebcamGet=function(b){Y.rb=b};Y.destroy=function(){Jb.i();Pb&&Pb.srcObject&&Pb.srcObject.getTracks().forEach(function(b){b.stop()});Rb.forEach(function(b){b.i()});Rb.splice(0);eb.i();Y.switch_displayVideo(!1);Y.initialized=!1;Y.ka.splice(0)};Y.set_size=function(b,d){c.width=b;c.height=d};Y.get_size=function(){return{width:c.width,height:c.height}};
Y.get_videoStream=function(){return Ob};Y.get_video=function(){return Pb};Y.get_cv=function(){return eb.Ra()};Y.set_color=function(b){L.A("s57",[{type:"3f",name:"u46",value:b}])};
Y.init=function(b){var d=Sb(),g=b.callbackReady||function(r){console.log("ERR:",r)},h=b.callbackReady?b.callbackReady.bind(null,!1):null;if(b.canvasId||b.canvas){var t=b.canvas?b.canvas:document.getElementById(b.canvasId);if(t)if(Y.initialized)g("ALREADY_INITIALIZED");else{Y.initialized=!0;window.a=g?function(r){g(r);window.a=!1}:!1;b.NNCPath&&(c.rc=b.NNCPath);"undefined"!==typeof b.NNC&&(Qb="string"===typeof b.NNC?JSON.parse(b.NNC):b.NNC);h&&Y.ka.push(h);if(!eb.j({Ja:t,width:c.width,height:c.height,
debug:!1,Xc:!1,Ub:function(){Y.pb&&Y.pb()},premultipliedAlpha:!1}))return g("GL_INCOMPATIBLE"),!1;Y.Da=eb.Ra();Y.Ea||(Y.Da.style.display="none");b.videoSettings&&b.videoSettings.videoElement?d.fd(b.videoSettings.videoElement,!1):(b.videoSettings&&Object.assign(Nb,b.videoSettings),d.fe(function(r){d.fd(r,!1)}));return!0}else g("INVALID_CANVAS")}else g("NO_CANVASID")};const JEELIZFACEEXPRESSIONS=Y;
if(typeof(module)!=='undefined'){module.exports=JEELIZFACEEXPRESSIONS;}
