 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACETRANSFERAPI=(function(){/*
 SharedContext.is_webgl2() &&*/
function ca(){this.ua=!1;this.Z=null;this.ud=void 0;this.Y=1;this.uc=this.Id=0;this.pa=null}function ea(a){if(a.ua)throw new TypeError("Generator is already running");a.ua=!0}ca.prototype.va=function(a){this.ud=a};ca.prototype.xa=function(a){this.pa={Ud:a,re:!0};this.Y=this.Id||this.uc};ca.prototype.return=function(a){this.pa={return:a};this.Y=this.uc};function ma(a){this.o=new ca;this.Ie=a}ma.prototype.va=function(a){ea(this.o);if(this.o.Z)return oa(this,this.o.Z.next,a,this.o.va);this.o.va(a);return sa(this)};
function ta(a,c){ea(a.o);var d=a.o.Z;if(d)return oa(a,"return"in d?d["return"]:function(h){return{value:h,done:!0}},c,a.o.return);a.o.return(c);return sa(a)}ma.prototype.xa=function(a){ea(this.o);if(this.o.Z)return oa(this,this.o.Z["throw"],a,this.o.va);this.o.xa(a);return sa(this)};
function oa(a,c,d,h){try{var q=c.call(a.o.Z,d);if(!(q instanceof Object))throw new TypeError("Iterator result "+q+" is not an object");if(!q.done)return a.o.ua=!1,q;var p=q.value}catch(l){return a.o.Z=null,a.o.xa(l),sa(a)}a.o.Z=null;h.call(a.o,p);return sa(a)}
function sa(a){for(;a.o.Y;)try{var c=a.Ie(a.o);if(c)return a.o.ua=!1,{value:c.value,done:!1}}catch(d){a.o.ud=void 0,a.o.xa(d)}a.o.ua=!1;if(a.o.pa){c=a.o.pa;a.o.pa=null;if(c.re)throw c.Ud;return{value:c.return,done:!0}}return{value:void 0,done:!0}}function wa(a){this.next=function(c){return a.va(c)};this.throw=function(c){return a.xa(c)};this.return=function(c){return ta(a,c)};this[Symbol.iterator]=function(){return this}}
function Ba(a){function c(h){return a.next(h)}function d(h){return a.throw(h)}return new Promise(function(h,q){function p(l){l.done?h(l.value):Promise.resolve(l.value).then(c,d).then(p,q)}p(a.next())})}function Fa(a){var c=new XMLHttpRequest;c.open("GET",b.Yb+b.neuralNetworkPath,!0);c.withCredentials=!1;c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&0!==c.status||a(c.responseText)};c.send()}function Ga(){for(var a=b.Tc,c=Array(a),d=0;d<a;++d)c[d]=0;return c}
function Ha(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=Ha(a[d],c);return a}function Ia(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)}function Ja(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)}function Na(a,c,d,h){return Math.pow(Math.min(Math.max((h-a)/(c-a),0),1),d)}
function Oa(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Pa(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}
function Qa(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,h=c.n;var q="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var p=q.length;c=new Uint8Array(p);for(var l=0;l<p;++l)c[l]=q.charCodeAt(l);q=new Float32Array(h);p=new Float32Array(d);l=a+d+1;for(var t=0;t<h;++t){for(var e=l*t,w=0===Pa(c,e)?1:-1,z=e+1,n=1,k=0,y=z+a-1;y>=z;--y)k+=n*Pa(c,y),n*=2;z=k;e=e+1+a;n=p.length;k=0;for(y=e;y<e+n;++y)p[k]=Pa(c,y),++k;for(n=e=0;n<d;++n)e+=p[n]*Math.pow(2,-n-1);q[t]=0===e&&0===
z?0:w*(1+e)*Math.pow(2,1+z-Math.pow(2,a-1))}return q}
var F=function(){function a(u,r,B){r=u.createShader(r);u.shaderSource(r,B);u.compileShader(r);return u.getShaderParameter(r,u.COMPILE_STATUS)?r:!1}function c(u,r,B){r=a(u,u.VERTEX_SHADER,r);B=a(u,u.FRAGMENT_SHADER,B);u===C&&l.push(r,B);var N=u.createProgram();u.attachShader(N,r);u.attachShader(N,B);u.linkProgram(N);return N}function d(u,r){r.B=r.B?!0:!1;if(!r.B){void 0===r.ya&&(r.ya="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===
r.Ca&&(r.Ca=["a0"]);void 0===r.qa&&(r.qa=[2]);if(void 0===r.precision||"highp"===r.precision)r.precision=n;r.id=w++;void 0!==r.jd&&(r.jd.forEach(function(N,Q){r.h=r.h.replace(N,r.Ya[Q])}),r.jd.splice(0));r.Xb=0;r.qa.forEach(function(N){r.Xb+=4*N});r.ca=c(u,r.ya,"precision "+r.precision+" float;\n"+r.h);r.v={};r.i.forEach(function(N){r.v[N]=u.getUniformLocation(r.ca,N)});r.attributes={};r.ra=[];r.Ca.forEach(function(N){var Q=u.getAttribLocation(r.ca,N);r.attributes[N]=Q;r.ra.push(Q)});if(r.j){u.useProgram(r.ca);
e=r;t=r.id;for(var B in r.j)u.uniform1i(r.v[B],r.j[B])}r.ka=!0}}function h(u){Ra.Ze(J);t!==u.id&&(J.N(),t=u.id,e=u,C.useProgram(u.ca),u.ra.forEach(function(r){0!==r&&C.enableVertexAttribArray(r)}))}function q(u,r,B){d(u,r,B);u.useProgram(r.ca);u.enableVertexAttribArray(0);t=-1;return e=r}function p(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var l=[],t=-1,e=null,w=0,z=!1,n="highp",k=["u1"],y=["u0"],x={u1:0},g={u0:0},m={u1:0,u2:1},
I={u3:0},O={s0:p(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:k,j:x,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:m},s3:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:k,j:x},s4:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:m},s5:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:k,j:x},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:k,j:x},s7:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],j:g},s8:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
i:["u0","u4"],j:g},s9:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:k,j:x},s10:{h:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",i:["u1","u5","u6"],j:{u1:0,u5:1}},s11:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",
i:["u1","u7"],j:x},s12:{h:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
i:["u1","u8"],j:x},s13:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:y,j:g,B:!0},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:y,j:g},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:y,j:g},
s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:y,j:g},s17:{h:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u6","u9"],j:{u0:0,u6:1,u9:2},B:!0},s18:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
i:y,j:g},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",i:y,j:g,B:!0},s20:{h:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u10","u11"],j:{u0:0,u10:1},B:!0},s21:{h:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u12"],j:x},s22:{h:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",i:["u13","u14","u15"],j:{u14:0,u13:1,u15:2},B:!0},s23:{h:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",i:["u14","u13","u16"],j:{u14:0,u13:1}},s24:{h:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u13 u14 u16 u20 u17 u18 u19".split(" "),j:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6},B:!0},s25:{h:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",i:"u13 u14 u16 u22 u23 u24 u21".split(" "),
j:{u14:0,u13:1,u21:2}},s26:{h:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",i:["u13","u14"],j:{u14:0,u13:1},B:!0},s27:{h:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",i:["u1","u21","u25"],j:{u1:0,u21:1}},s28:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:k,j:x,precision:"lowp"},s29:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u26"],j:x,precision:"lowp"},s30:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u26"],j:x,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u27"],j:m,B:!0},s32:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u27"],j:m,B:!0},s33:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u7"],j:I},s34:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u7"],j:I,B:!0},
s35:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:x,precision:"lowp",B:!0},s36:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",i:["u7","u1"],j:x,precision:"lowp",
B:!0},s37:{h:"uniform sampler2D u1,u10,u28;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u10,vv0),b=texture2D(u28,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u10","u28"],j:{u1:0,u10:1,u28:2},B:!0}},L={s38:{h:"uniform float u16,u29;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u29*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u16","u13","u14","u21","u29"],Ya:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{h:"uniform float u16,u29,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u29*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u16 u24 u13 u14 u21 u29".split(" "),Ya:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},R=null,H=null,J={Sa:function(){return z},s:function(){if(!z){R=Ha(O,2);H=Ha(L,2);n="highp";for(var u in R)d(C,R[u],u);F.set("s0");C.enableVertexAttribArray(0);z=!0}},bc:function(u){u.forEach(function(r){J.ac(r)})},ac:function(u){R[u.id]=u;d(C,u,u.id)},Dc:function(u,r,B){r||(r=u);R[r]=Object.create(H[u]);R[r].te=!0;H[u].Ya&&H[u].Ya.forEach(function(N,Q){R[r].h=R[r].h.replace(new RegExp(N,"g"),B[Q])});d(C,R[r],
r)},set:function(u){u=R[u];u.B&&(u.B=!1,d(C,u,u.id));h(u)},wa:function(u){return q(u,p(),"s40")},Ob:function(u){return q(u,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"},"s41")},Vd:function(u){return"undefined"===typeof R[u]?!1:R[u].ka},N:function(){-1!==t&&(t=-1,e.ra.forEach(function(u){0!==u&&C.disableVertexAttribArray(u)}))},Qb:function(){var u=0;e.ra.forEach(function(r,B){B=e.qa[B];C.vertexAttribPointer(r,B,C.FLOAT,!1,e.Xb,u);u+=4*B})},Af:function(){C.enableVertexAttribArray(0)},
Za:function(){J.$a(C)},$a:function(u){u.vertexAttribPointer(e.ra[0],2,u.FLOAT,!1,8,0)},dg:function(u,r){C.uniform1i(e.v[u],r)},L:function(u,r){C.uniform1f(e.v[u],r)},da:function(u,r,B){C.uniform2f(e.v[u],r,B)},eg:function(u,r){C.uniform2fv(e.v[u],r)},md:function(u,r){C.uniform3fv(e.v[u],r)},fg:function(u,r,B,N){C.uniform3f(e.v[u],r,B,N)},gg:function(u,r,B,N,Q){C.uniform4f(e.v[u],r,B,N,Q)},Pb:function(u,r){C.uniform4fv(e.v[u],r)},hg:function(u,r){C.uniformMatrix2fv(e.v[u],!1,r)},ig:function(u,r){C.uniformMatrix3fv(e.v[u],
!1,r)},jg:function(u,r){C.uniformMatrix4fv(e.v[u],!1,r)},I:function(u,r){J.set(u);r.forEach(function(B){switch(B.type){case "4f":C.uniform4fv(e.v[B.name],B.value);break;case "3f":C.uniform3fv(e.v[B.name],B.value);break;case "2f":C.uniform2fv(e.v[B.name],B.value);break;case "1f":C.uniform1f(e.v[B.name],B.value);break;case "1i":C.uniform1i(e.v[B.name],B.value);break;case "mat2":C.uniformMatrix2fv(e.v[B.name],!1,B.value);break;case "mat3":C.uniformMatrix3fv(e.v[B.name],!1,B.value);break;case "mat4":C.uniformMatrix4fv(e.v[B.name],
!1,B.value)}})},Kf:function(){return"lowp"},m:function(){C.disableVertexAttribArray(0);J.N();for(var u in R){var r=R[u];r.ka&&(r.ka=!1,C.deleteProgram(r.ca));r.te&&delete R[u]}l.forEach(function(B){C.deleteShader(B)});l.splice(0);w=0;z=!1;e=null;t=-1}};return J}(),C=null,Wa=function(){function a(n){console.log("ERROR in ContextFF: ",n);return!1}function c(n){function k(){Sa.m();Ta.reset();x.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var y=document.createElement("canvas");y.setAttribute("width",5);y.setAttribute("height",5);var x=null;try{x=y.getContext("webgl2",n)}catch(g){return!1}if(!x)return!1;d(x);Ta.mc(x);n=Ta.ob(x);if(!n.V&&!n.W)return k(),!1;n=Sa.hc(x,n);k();return n?!0:!1}function d(n){n.clearColor(0,0,0,0);n.disable(n.DEPTH_TEST);n.disable(n.BLEND);n.disable(n.DITHER);n.disable(n.STENCIL_TEST);n.disable(n.CULL_FACE);n.GENERATE_MIPMAP_HINT&&n.hint(n.GENERATE_MIPMAP_HINT,n.FASTEST);n.disable(n.SAMPLE_ALPHA_TO_COVERAGE);
n.disable(n.SAMPLE_COVERAGE);n.depthFunc(n.LEQUAL);n.clearDepth(1)}var h=null,q=null,p=null,l=null,t=!0,e=null,w=null,z={A:function(){return h.width},J:function(){return h.height},Ka:function(){return h},Cf:function(){return C},X:function(){return t},flush:function(){C.flush()},Zd:function(){e||(e=new Uint8Array(h.width*h.height*4));C.readPixels(0,0,h.width,h.height,C.RGBA,C.UNSIGNED_BYTE,e);return e},Ef:function(){return h.toDataURL("image/jpeg")},Ff:function(){Va.M();q||(q=document.createElement("canvas"),
p=q.getContext("2d"));q.width=h.width;q.height=h.height;for(var n=z.Zd(),k=p.createImageData(q.width,q.height),y=q.width,x=q.height,g=k.data,m=0;m<x;++m)for(var I=x-m-1,O=0;O<y;++O){var L=4*(m*y+O),R=4*(I*y+O);g[L]=n[R];g[L+1]=n[R+1];g[L+2]=n[R+2];g[L+3]=n[R+3]}p.putImageData(k,0,0);return q.toDataURL("image/png")},Df:function(n){!q&&n&&(q=document.createElement("canvas"),p=q.getContext("2d"));var k=n?q:document.createElement("canvas");k.width=h.width;k.height=h.height;(n?p:k.getContext("2d")).drawImage(h,
0,0);return k},s:function(n){n.kc&&!n.jc?h=document.getElementById(n.kc):n.jc&&(h=n.jc);h||(h=document.createElement("canvas"));h.width=n&&void 0!==n.width?n.width:512;h.height=n&&void 0!==n.height?n.height:512;"undefined"===typeof n&&(n={});void 0===n.premultipliedAlpha&&(n.premultipliedAlpha=!1);void 0===n.Ab&&(n.Ab=!0);void 0===n.antialias&&(n.antialias=!1);if(C)t=C instanceof WebGL2RenderingContext;else{t=!0;var k={antialias:n.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:n.premultipliedAlpha,
stencil:!1,depth:n.Ab};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(k.antialias=!1);var y=c(k);!y&&k.antialias&&(k.antialias=!1,y=c(k));y&&(C=h.getContext("webgl2",k));C?t=!0:((C=h.getContext("webgl",k))||(C=h.getContext("experimental-webgl",k)),t=!1)}if(!C)return a("WebGL1 and 2 are not enabled");(l=C.getExtension("WEBGL_lose_context"))&&n.Vc&&(w=n.Vc,h.addEventListener("webglcontextlost",w,!1));if(!Ta.s())return a("Not enough GL capabilities");d(C);F.s();
M.s();return Sa.hc(C,Ta.Xd())?!0:a("Cannot filter float textures")},m:function(){C&&(Ta.m(),Sa.m());l&&w&&(h.removeEventListener("webglcontextlost",w,!1),l=w=null);C=e=p=q=h=null}};return z}(),Ra=function(){function a(){null===c&&("undefined"!==typeof F?c=F:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;a();return{Ze:function(d){c!==d&&(c&&c.N(),c=d)},Sa:function(){return c.Sa()},Za:function(){return c.Za()},$a:function(d){return c.$a(d)},Qb:function(){return c.Qb()},N:function(){return c.N()},
set:function(d){return c.set(d)},wa:function(d){a();return c.wa(d)},Ob:function(d){a();return c.Ob(d)},m:function(){return c.m()}}}(),P=function(){function a(f){C.bindTexture(C.TEXTURE_2D,f)}function c(f){r[0]=f;f=B[0];var K=f>>16&32768,E=f>>12&2047,S=f>>23&255;return 103>S?K:142<S?K|31744|((255==S?0:1)&&f&8388607):113>S?(E|=2048,K|(E>>114-S)+(E>>113-S&1)):K=(K|S-112<<10|E>>1)+(E&1)}function d(f){var K=new Uint16Array(f.length);f.forEach(function(E,S){K[S]=c(E)});return K}function h(){if(null!==N.xb)return N.xb;
var f=p(d([.5,.5,.5,.5]));return null===f?!0:N.xb=f}function q(){if(null!==N.yb)return N.yb;var f=p(new Uint8Array([127,127,127,127]));return null===f?!0:N.yb=f}function p(f){if(!Ra.Sa()||!g)return null;var K=null,E=Math.sqrt(f.length/4);try{var S=C.getError();if("FUCKING_BIG_ERROR"===S)return!1;K=Q.instance({isFloat:!1,G:!0,array:f,width:E});S=C.getError();if(S!==C.NO_ERROR)return!1}catch(X){return!1}Va.M();C.viewport(0,0,E,E);C.clearColor(0,0,0,0);C.clear(C.COLOR_BUFFER_BIT);Ra.set("s0");K.ec(0);
M.l(!0,!0);f=4*E*E;S=new Uint8Array(f);C.readPixels(0,0,E,E,C.RGBA,C.UNSIGNED_BYTE,S);E=!0;for(var Z=0;Z<f;++Z)E=E&&3>Math.abs(S[Z]-127);K.remove();Va.U();return E}var l=0,t=null,e=0,w=null,z=null,n=null,k=null,y=null,x=null,g=!1,m=[],I={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,F:null,Ac:null,se:!1,G:!1,ba:null,Ua:4,Db:0},O=!1,L=null,R=null,H=[[1,0,0,0],[0,1,
0,0],[0,0,1,0],[0,0,0,1]],J=!1,u=!1,r=new Float32Array(1),B=new Int32Array(r.buffer),N={xb:null,yb:null},Q={s:function(){g||(y=[C.RGBA,null,C.RGBA,C.RGBA],x=[C.RGBA,null,C.RGBA,C.RGBA],t=[C.TEXTURE0,C.TEXTURE1,C.TEXTURE2,C.TEXTURE3,C.TEXTURE4,C.TEXTURE5,C.TEXTURE6,C.TEXTURE7],J="undefined"!==typeof JEContext,u="undefined"!==typeof Ta,J&&JEContext.Yf()&&t.push(C.TEXTURE8,C.TEXTURE9),w=[-1,-1,-1,-1,-1,-1,-1,-1],k=[C.UNSIGNED_BYTE,C.FLOAT,C.FLOAT],g=!0)},le:function(){if(!z){for(var f=new Float32Array(16384),
K=0;16384>K;++K)f[K]=2*Math.random()-1;z={random:Q.instance({isFloat:!0,isPot:!0,array:f,width:64}),rd:Q.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}Q.jf()},Qf:function(){return z.rd},jf:function(){k[1]=Ta.sb(C)},Xe:function(){x=y=[C.RGBA,C.RGBA,C.RGBA,C.RGBA]},dd:function(f){F.set("s1");Va.M();var K=f.A(),E=f.J();C.viewport(0,0,K,E);f.g(0);M.l(!1,!1)},Oe:function(f,K){Q.dd(f);C.readPixels(0,0,f.A(),f.J(),C.RGBA,C.UNSIGNED_BYTE,K)},Pe:function(f,K){Q.dd(f);return Ta.Nb(0,
0,f.A(),f.J(),K)},tc:function(f,K,E,S,Z,X,v){f.activeTexture(f.TEXTURE0);var da=f.createTexture();f.bindTexture(f.TEXTURE_2D,da);Z=Z instanceof Float32Array?Z:new Float32Array(Z);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,X);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,
E,S,0,f.RGBA,f.FLOAT,Z);f.bindTexture(f.TEXTURE_2D,null);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);v&&(Va.U(),F.wa(f));f.viewport(0,0,E,S);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,K,0);f.bindTexture(f.TEXTURE_2D,da);v?M.l(!0,!0):M.Ia(f);f.deleteTexture(da);g&&(w[0]=-1,n=null,l=0)},jb:function(f){f!==l&&(C.activeTexture(t[f]),l=f)},instance:function(f){function K(D){var T=C.getError();if("FUCKING_BIG_ERROR"===T)return!1;C.texImage2D(C.TEXTURE_2D,0,ia,ha,ja,D);T=C.getError();
T!==C.NO_ERROR&&ha!==C.RGBA&&(ha=C.RGBA,C.texImage2D(C.TEXTURE_2D,0,ia,ha,ja,D));return!0}function E(){if(!Za){a(la);pa&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,pa);v.isPot?(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,v.isMirrorX?C.MIRRORED_REPEAT:C.REPEAT),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,v.isMirrorY?C.MIRRORED_REPEAT:C.REPEAT)):(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE));v.isAnisotropicFiltering&&"undefined"!==
typeof JESETTINGS&&C.texParameterf(C.TEXTURE_2D,JEContext.Hf().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.pf);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,v.isLinear?C.LINEAR:C.NEAREST);v.isLinear?C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,v.isMipmap&&!ya?C.NEAREST_MIPMAP_LINEAR:C.LINEAR):C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,v.isMipmap&&!ya?C.NEAREST_MIPMAP_NEAREST:C.NEAREST);ha=y[v.Ua-1];ia=x[v.Ua-1];ja=k[A];if(Ta.X()){var D=Ta.$d();ha===C.RGBA&&ja===C.FLOAT?v.isMipmap||v.isLinear?
ia=Sa.be(C):Ta.ic()?D&&(ia=D):ia=C.RGBA16F||C.RGBA:ha===C.RGB&&ja===C.FLOAT&&D&&(ia=D,ha=C.RGBA)}if(v.G&&!v.isFloat||v.isFloat&&v.isMipmap&&Sa.ye())ia=Ta.ae(),ja=Ta.sb(C);v.Db&&(Ka=v.Db);v.isSrgb&&4===v.Ua&&(ha=JEContext.Of());if(v.F)K(v.F);else if(v.url)K(xa);else if(qa){D=qa;try{"FUCKING_BIG_ERROR"!==C.getError()&&(C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,D),C.getError()!==C.NO_ERROR&&(C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,null),C.getError()!==C.NO_ERROR&&C.texImage2D(C.TEXTURE_2D,0,C.RGBA,
U,W,0,C.RGBA,C.UNSIGNED_BYTE,null)))}catch(Ib){C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,null)}v.isKeepArray||(qa=null)}else D=C.getError(),"FUCKING_BIG_ERROR"!==D&&(C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,null),D=C.getError(),D!==C.NO_ERROR&&(ha=C.RGBA,v.G&&ja!==C.FLOAT&&(ja=C.FLOAT,C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,null))));if(v.isMipmap)if(!ya&&fa)fa.rb(),La=!0;else if(ya){D=Math.log2(Math.min(U,W));Aa=Array(1+D);Aa[0]=la;for(var T=1;T<=D;++T){var ka=Math.pow(2,T),aa=U/ka;ka=W/ka;
var za=C.createTexture();a(za);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST);C.texImage2D(C.TEXTURE_2D,0,ia,aa,ka,0,ha,ja,null);a(null);Aa[T]=za}La=!0}a(null);w[l]=-1;pa&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1);Ca=!0;v.ba&&fa&&(v.ba(fa),v.ba=null)}}function S(){for(var D=U*W,T=2*D,ka=3*D,aa=0;aa<D;++aa)na[0][aa]=Da[aa],na[1][aa]=Da[aa+D],na[2][aa]=Da[aa+T],na[3][aa]=Da[aa+ka]}function Z(){var D=U*W*4;ua=[new Uint8Array(D),
new Uint8Array(D),new Uint8Array(D),new Uint8Array(D)];na=[new Float32Array(ua[0].buffer),new Float32Array(ua[1].buffer),new Float32Array(ua[2].buffer),new Float32Array(ua[3].buffer)];Ma=new Uint8Array(4*D);Da=new Float32Array(Ma.buffer);Ea=!0}function X(){va.lb=new Uint8Array(U*W*4);va.vc=new Float32Array(va.buffer);va.Bb=!0}var v=Object.assign({},I,f),da=e++;null===v.isFlipY&&(v.isFlipY=v.url||v.array?!0:!1);v.data&&(v.array="string"===typeof v.data?Qa(v.data):v.isFloat?new Float32Array(v.data):
new Uint8Array(v.data),v.isFlipY=!1);var A=0,G=v.F?!0:!1,ba=null,Y=null,ra=!1,Ua=null;v.G=v.G||v.isFloat;v.G&&(A=1);!v.se&&v.isFloat&&u&&!Ta.ic()&&(v.isFloat=!1);v.isFloat&&(A=2);v.isAnisotropicFiltering&&J&&!JEContext.Tf()&&(v.isAnisotropicFiltering=!1);var la=v.Ac||C.createTexture(),xa=null,qa=!1,U=0,W=0,Ca=!1,Za=!1,Ea=!1,na=null,ua=null,Ma=null,Da=null,ia=null,ha=null,ja=null,pa=v.isFlipY,rb=(f=v.G&&v.isMipmap)&&Sa.Ed(),ya=f&&rb?!0:!1,Aa=null,Ka=-1,La=!1,va={Bb:!1,lb:null,vc:null};v.width&&(U=
v.width,W=v.height?v.height:U);var fa={get:function(){return la},A:function(){return U},J:function(){return W},Rf:function(){return v.url},Uf:function(){return v.isFloat},Wf:function(){return v.G},Xf:function(){return v.isLinear},rb:function(){C.generateMipmap(C.TEXTURE_2D)},Cd:function(D,T){ya?(D||(D=fa.yc()),Q.jb(T),a(Aa[D]),w[T]=-1):fa.g(T)},yc:function(){-1===Ka&&(Ka=Math.log(U)/Math.log(2));return Ka},Wd:function(D){if(ya){D||(D=fa.yc());F.set("s11");Q.jb(0);for(var T=U,ka=W,aa=1;aa<=D;++aa)T/=
2,ka/=2,F.da("u7",.25/T,.25/ka),C.viewport(0,0,T,ka),a(Aa[aa-1]),C.framebufferTexture2D(Va.Ma(),C.COLOR_ATTACHMENT0,C.TEXTURE_2D,Aa[aa],0),M.l(!1,1===aa);w[0]=-1}else fa.rb()},g:function(D){if(!Ca)return!1;Q.jb(D);if(w[D]===da)return!1;a(la);w[D]=da;return!0},ec:function(D){C.activeTexture(t[D]);l=D;a(la);w[D]=da},u:function(){n=fa;C.framebufferTexture2D(Va.Ma(),C.COLOR_ATTACHMENT0,C.TEXTURE_2D,la,0)},P:function(){n=fa;C.viewport(0,0,U,W);C.framebufferTexture2D(Va.Ma(),C.COLOR_ATTACHMENT0,C.TEXTURE_2D,
la,0)},Wb:Q.Wb,resize:function(D,T){U=D;W=T;E()},clone:function(D){D=Q.instance({width:U,height:W,G:v.G,isFloat:v.isFloat,isLinear:v.isLinear,isMirrorY:v.isMirrorY,isFlipY:D?!pa:pa,isPot:v.isPot});Ra.set("s0");Va.U();D.u();C.viewport(0,0,U,W);fa.g(0);M.l(!0,!0);return D},$e:function(){C.viewport(0,0,U,W)},remove:function(){C.deleteTexture(la);Za=!0;m.splice(m.indexOf(fa),1);fa=null},refresh:function(){fa.ec(0);pa&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!0);G?C.texImage2D(C.TEXTURE_2D,0,ia,ha,C.UNSIGNED_BYTE,
v.F):C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,qa);pa&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1)},Mb:function(){Ea||Z();C.readPixels(0,0,U,4*W,C.RGBA,C.UNSIGNED_BYTE,Ma);S();return na},Le:function(){Ea||Z();return Ta.Nb(0,0,U,4*W,Ma).then(function(){S();return na})},Ne:function(){va.Bb||X();C.readPixels(0,0,U,W,C.RGBA,C.UNSIGNED_BYTE,va.lb);return va.vc},Me:function(){va.Bb||X();return Ta.Nb(0,0,U,W,va.lb)},pb:function(D){Va.M();F.set("s12");fa.g(0);if(D)C.viewport(0,0,U,W),F.Pb("u8",.25,.25,.25,.25),
M.l(!1,!0);else for(D=0;4>D;++D)C.viewport(0,W*D,U,W),F.Pb("u8",H[D]),M.l(!1,0===D)},ng:function(D){var T=ja===k[0]&&!q();a(la);pa&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!0);T?(ra||(ba=document.createElement("canvas"),ba.width=U,ba.height=W,Y=ba.getContext("2d"),Ua=Y.createImageData(U,W),ra=!0),Ua.data.set(D),Y.putImageData(Ua,0,0),C.texImage2D(C.TEXTURE_2D,0,ia,ha,ja,ba)):C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,D);w[l]=da;pa&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1)},og:function(D,T){a(la);T&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,
!0);C.texImage2D(C.TEXTURE_2D,0,ia,ha,ja,D);w[l]=da;T&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1)},ag:function(D,T){var ka=U*W,aa=4*ka;D=v.G?D?"RGBE":"JSON":"RGBA";T&&(D=T);T=Ta.X()&&!1;var za=null;switch(D){case "RGBE":za="s42";break;case "JSON":za=T?"s0":"s12";break;case "RGBA":case "RGBAARRAY":za="s6"}Ea||("RGBA"===D||"RGBE"===D||"RGBAARRAY"===D?(ua=new Uint8Array(aa),Ea=!0):"JSON"!==D||T||Z());Va.M();F.set(za);fa.g(0);aa=null;if("RGBA"===D||"RGBE"===D||"RGBAARRAY"===D){C.viewport(0,0,U,W);M.l(!0,
!0);C.readPixels(0,0,U,W,C.RGBA,C.UNSIGNED_BYTE,ua);if("RGBAARRAY"===D)return{data:ua};O||(L=document.createElement("canvas"),R=L.getContext("2d"),O=!0);L.width=U;L.height=W;ka=R.createImageData(U,W);ka.data.set(ua);R.putImageData(ka,0,0);aa=L.toDataURL("image/png")}else if("JSON"===D)if(T)aa=new Float32Array(ka),C.viewport(0,0,U,W),M.l(!0,!0),C.readPixels(0,0,U,W,C.RGBA,C.FLOAT,aa);else{for(aa=0;4>aa;++aa)C.viewport(0,W*aa,U,W),F.Pb("u8",H[aa]),M.l(!aa,!aa);fa.Mb();aa=Array(ka);for(T=0;T<ka;++T)aa[4*
T]=na[0][T],aa[4*T+1]=na[1][T],aa[4*T+2]=na[2][T],aa[4*T+3]=na[3][T]}return{format:D,data:aa,width:U,height:W,isMirrorY:v.isMirrorY,isFlipY:"RGBA"===D?v.isFlipY:!v.isFlipY}}};v.isMipmap&&!ya&&Ca&&!La&&(fa.rb(),La=!0);if(v.url)a(la),C.texImage2D(C.TEXTURE_2D,0,C.RGBA,1,1,0,C.RGBA,C.UNSIGNED_BYTE,null),xa=new Image,xa.xf="Anonymous",xa.crossOrigin="Anonymous",xa.src=v.url,xa.onload=function(){U=xa.width;W=xa.height;E()};else if(v.F){var $a=function(){U=void 0!==v.F.videoWidth?v.F.videoWidth:v.F.width;
W=void 0!==v.F.videoHeight?v.F.videoHeight:v.F.height;U?E():setTimeout($a,1)};$a()}else v.array?(v.G&&!v.isFloat?v.array instanceof Uint16Array?(qa=v.array,E()):h()?(qa=d(v.array),E()):(E(),Q.tc(C,la,fa.A(),fa.J(),v.array,pa,!0)):(qa=v.isFloat?v.array instanceof Float32Array?v.array:new Float32Array(v.array):v.array instanceof Uint8Array?v.array:new Uint8Array(v.array),E()),v.isKeepArray||(qa&&qa!==v.array&&(qa=null),delete v.array)):v.Ac?Ca=!0:E();fa.Nf=fa.A;v.ba&&Ca&&(v.ba(fa),v.ba=null);m.push(fa);
return fa},M:function(f){f!==l&&(C.activeTexture(t[f]),l=f);w[f]=-1;a(null)},sf:function(f){z.random.g(f)},Wb:function(){n=null;C.framebufferTexture2D(Va.Ma(),C.COLOR_ATTACHMENT0,C.TEXTURE_2D,null,0)},reset:function(){0!==l&&C.activeTexture(t[0]);for(var f=0;f<t.length;++f)w[f]=-1;l=-1},$f:function(){l=-1},ff:function(){for(var f=0;f<t.length;++f)Q.M(f)},wc:function(){z&&(z.random.remove(),z.rd.remove())},lg:function(f,K){if("RGBA"===f.format||"RGBE"===f.format){var E=new Image;E.src=f.data;E.onload=
function(){Q.instance({isMirrorY:f.isMirrorY,isFlipY:f.isFlipY,isFloat:!1,F:E,ba:function(S){if("RGBA"===f.format)K(S);else{var Z=f.width,X=f.height,v=Q.instance({isMirrorY:f.isMirrorY,isFloat:!0,width:Z,height:X,isFlipY:f.isFlipY});Va.U();C.viewport(0,0,Z,X);F.set("s43");v.u();S.g(0);M.l(!0,!0);Q.M(0);K(v);C.flush();setTimeout(S.remove,50)}}})}}else"JSON"===f.format?K(Q.instance({isFloat:!0,isFlipY:f.isFlipY,width:f.width,height:f.height,array:new Float32Array(f.data)})):K(!1)},Jd:d,m:function(){n&&
(Va.U(),Q.Wb(),Va.M());Q.ff();m.slice(0).forEach(function(f){f.remove()});m.splice(0);g=!1;e=0;"undefined"!==typeof Sa&&Sa.m();z=null}};return Q}(),Xa={instance:function(a){var c=[P.instance(a),P.instance(a)],d=[c[1],c[0]],h=d,q={ld:function(p){h[1].u();h[0].g(p);q.pd()},bg:function(p){h[1].P();h[0].g(p);q.pd()},pd:function(){h=h===c?d:c},refresh:function(){h[0].refresh();h[1].refresh()},g:function(p){h[0].g(p)},rf:function(p){h[1].g(p)},ee:function(){return h[0]},Lf:function(){return h[1]},remove:function(){h[0].remove();
h[1].remove();h=null}};return q}},M=function(){function a(e){var w={T:null,D:null};w.T=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,w.T);e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),e.STATIC_DRAW);w.D=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,w.D);e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),e.STATIC_DRAW);return w}var c=null,d=0,h=!1,q=[],p=-2,l=-2,t={reset:function(){l=p=-2},s:function(){h||(c=a(C),t.kb(),h=!0)},instance:function(e){var w=d++,z=e.D?
e.D.length:0,n="undefined"===typeof e.mode?C.STATIC_DRAW:e.mode,k=C.createBuffer();C.bindBuffer(C.ARRAY_BUFFER,k);C.bufferData(C.ARRAY_BUFFER,e.T instanceof Float32Array?e.T:new Float32Array(e.T),n);p=w;var y=null,x=null,g=null;if(e.D){y=C.createBuffer();C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,y);var m=null;65536>e.D.length?(m=Uint16Array,x=C.UNSIGNED_SHORT,g=2):(m=Uint32Array,x=C.UNSIGNED_INT,g=4);m=e.D instanceof m?e.D:new m(e.D);C.bufferData(C.ELEMENT_ARRAY_BUFFER,m,n);l=w}var I={Dd:function(O){p!==
w&&(C.bindBuffer(C.ARRAY_BUFFER,k),p=w);O&&Ra.Qb()},Ad:function(){l!==w&&(C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,y),l=w)},bind:function(O){I.Dd(O);I.Ad()},yf:function(){C.drawElements(C.TRIANGLES,z,x,0)},zf:function(O,L){C.drawElements(C.TRIANGLES,O,x,L*g)},remove:function(){C.deleteBuffer(k);e.D&&C.deleteBuffer(y);I=null}};q.push(I);return I},kb:function(){-1!==p&&(C.bindBuffer(C.ARRAY_BUFFER,c.T),p=-1);-1!==l&&(C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,c.D),l=-1)},l:function(e,w){e&&M.kb();w&&Ra.Za();C.drawElements(C.TRIANGLES,
3,C.UNSIGNED_SHORT,0)},Ia:function(e){e=e||C;var w=a(e);e.bindBuffer(e.ARRAY_BUFFER,w.T);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,w.D);Ra.$a(e);e.clear(e.COLOR_BUFFER_BIT);e.drawElements(e.TRIANGLES,3,e.UNSIGNED_SHORT,0);e.flush();e.bindBuffer(e.ARRAY_BUFFER,null);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);e.deleteBuffer(w.T);e.deleteBuffer(w.D);t.reset();h&&(t.kb(),Ra.Za())},wc:function(){var e=C,w=c;e.deleteBuffer(w.T);e.deleteBuffer(w.D)},m:function(){t.wc();q.forEach(function(e){e.remove()});C.bindBuffer(C.ARRAY_BUFFER,
null);C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,null);t.reset();h=!1;q.splice(0);d=0}};return t}(),Va=function(){var a=null,c=null,d=null,h=!1,q=[],p={C:-2,sc:1},l={Sa:function(){return h},s:function(){if(!h){a=C.createFramebuffer();var t=Ta.X();c=t&&C.DRAW_FRAMEBUFFER?C.DRAW_FRAMEBUFFER:C.FRAMEBUFFER;d=t&&C.READ_FRAMEBUFFER?C.READ_FRAMEBUFFER:C.FRAMEBUFFER;h=!0}},If:function(){return c},ce:function(){return d},Ma:function(){return C.FRAMEBUFFER},Mf:function(){return p},Bf:function(){return a},instance:function(t){void 0===
t.Hc&&(t.Hc=!1);var e=t.na?t.na:null,w=t.width,z=void 0!==t.height?t.height:t.width,n=a,k=null,y=!1,x=!1,g=0;e&&(w=w?w:e.A(),z=z?z:e.J());var m={kd:function(){y||(n=C.createFramebuffer(),y=!0,g=p.sc++)},vd:function(){m.kd();m.u();k=C.createRenderbuffer();C.bindRenderbuffer(C.RENDERBUFFER,k);C.renderbufferStorage(C.RENDERBUFFER,C.DEPTH_COMPONENT16,w,z);C.framebufferRenderbuffer(c,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,k);C.clearDepth(1)},bind:function(I,O){g!==p.C&&(C.bindFramebuffer(c,n),p.C=g);e&&e.u();
O&&C.viewport(0,0,w,z);I&&C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT)},qf:function(){g!==p.C&&(C.bindFramebuffer(c,n),p.C=g)},clear:function(){C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT)},vf:function(){C.clear(C.COLOR_BUFFER_BIT)},wf:function(){C.clear(C.DEPTH_BUFFER_BIT)},$e:function(){C.viewport(0,0,w,z)},u:function(){g!==p.C&&(C.bindFramebuffer(c,n),p.C=g)},rtt:function(I){e=I;p.C!==g&&(C.bindFramebuffer(C.FRAMEBUFFER,n),p.C=g);I.u()},M:function(){C.bindFramebuffer(c,null);p.C=-1},resize:function(I,
O){w=I;z=O;k&&(C.bindRenderbuffer(C.RENDERBUFFER,k),C.renderbufferStorage(C.RENDERBUFFER,C.DEPTH_COMPONENT16,w,z))},remove:function(){n===a||x||(C.bindFramebuffer(c,n),C.framebufferTexture2D(c,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,null,0),k&&C.framebufferRenderbuffer(c,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,null),C.bindFramebuffer(c,null),C.deleteFramebuffer(n),k&&C.deleteRenderbuffer(k));x=!0}};t.Hc&&m.vd();q.push(m);return m},M:function(){C.bindFramebuffer(c,null);p.C=-1},gf:function(){C.bindFramebuffer(c,
null);C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT);C.viewport(0,0,Ta.A(),Ta.J());p.C=-1},reset:function(){p.C=-2},U:function(){0!==p.C&&(C.bindFramebuffer(c,a),p.C=0)},clear:function(){C.viewport(0,0,Ta.A(),Ta.J());C.clear(C.COLOR_BUFFER_BIT)},m:function(){l.M();q.forEach(function(t){t.remove()});C.deleteFramebuffer(a);l.reset();h=!1;q.splice(0);p.C=-2;p.sc=1}};return l}(),Ta=function(){function a(){h="undefined"===typeof Wa?JEContext:Wa;q=!0}function c(g,m){for(var I=0;I<g.length;++I){var O=m.getExtension(g[I]);
if(O)return O}return null}function d(){null!==k.cb&&(clearInterval(k.cb),k.cb=null);k.sa=!1}var h=null,q=!1,p={Ic:!1,Sb:null,Tb:null,Lc:!1,we:!1,Ub:null,Mc:!1,Vb:null,Jc:!1,mb:null,pe:!1,nb:null,qe:!1},l=null,t={V:!0,W:!0,qb:!0,cd:!1},e=null,w=!0,z=null,n=null,k={sa:!1,ia:null,Na:null,vb:-1,ja:null,cb:null},y="undefined"===typeof window?{}:window,x={s:function(){if(q)return!0;x.reset();q||a();var g=C;if(!l.Ic){l.Sb=x.pc(g);y.GL_EXT_FLOAT=l.Sb;l.Lc=l.Sb?!0:!1;if(l.Lc||x.X())l.Tb=x.qc(g),l.we=l.Tb?
!0:!1,y.GL_EXT_FLOATLINEAR=l.Tb;l.Ic=!0}if(!l.Jc){l.Ub=x.Ha(g);l.Ub&&(l.Mc=!0,y.GL_EXT_HALFFLOAT=l.Ub);if(l.Mc||x.X())l.Vb=x.rc(g),y.GL_EXT_HALFFLOATLINEAR=l.Vb;l.Sf=l.Vb?!0:!1;l.Jc=!0}l.mb=x.nc(g);l.pe=l.mb?!0:!1;y.GL_EXT_COLORBUFFERFLOAT=l.mb;l.nb=x.oc(g);l.qe=l.nb?!0:!1;y.GL_EXT_COLORBUFFERHALFFLOAT=l.nb;Va.s();P.s();if(!x.Od())return!1;M.s();P.le();return!0},reset:function(){l=Object.assign({},p);e=Object.assign({},t)},A:function(){q||a();return h.A()},J:function(){q||a();return h.J()},X:function(){q||
a();return h.X()},mc:function(g){x.nc(g);x.oc(g);x.pc(g);x.qc(g);x.Ha(g);x.rc(g)},nc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),oc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),pc:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),qc:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),Ha:c.bind(null,
["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),rc:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),sb:function(g){var m=x.Ha(g);return m&&m.HALF_FLOAT_OES?m.HALF_FLOAT_OES:g.HALF_FLOAT||g.FLOAT},$d:function(){return n||C.RGBA32F||C.RGBA},ae:function(){return z||C.RGBA16F||C.RGBA},Xd:function(){return e},ic:function(){return e.V},uf:function(){return e.W},tf:function(){return e.qb},Fd:function(){return e.cd&&
w},qd:function(g){w=g;!g&&k.sa&&(C.deleteSync(k.Na),C.bindBuffer(k.ja,null),k.sa=!1)},bb:function(g,m,I){function O(){g.bindTexture(g.TEXTURE_2D,null);g.bindFramebuffer(L,null);g.deleteTexture(J);g.deleteFramebuffer(H)}var L=g.FRAMEBUFFER,R=g.NEAREST,H=g.createFramebuffer();g.bindFramebuffer(L,H);var J=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,J);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,R);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,R);g.texImage2D(g.TEXTURE_2D,0,m,3,3,0,g.RGBA,I,null);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,J,0);if(g.checkFramebufferStatus(g.READ_FRAMEBUFFER||g.FRAMEBUFFER)!==g.FRAMEBUFFER_COMPLETE)return O(),!1;Ra.Ob(g);g.clearColor(0,0,0,0);g.viewport(0,0,3,3);g.disable(g.DEPTH_TEST);g.clear(g.COLOR_BUFFER_BIT);M.Ia(g);g.bindFramebuffer(L,null);
Ra.wa(g);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,J);M.Ia(g);m=new Uint8Array(36);g.readPixels(0,0,3,3,g.RGBA,g.UNSIGNED_BYTE,m);O();for(I=0;36>I;++I)if(3!==I%4&&3<Math.abs(m[I]-127))return!1;return!0},ob:function(g){var m={V:!1,W:!1};g.disable(g.BLEND);g.clearColor(0,0,0,0);g.clear(g.COLOR_BUFFER_BIT);g.RGBA32F&&x.bb(g,g.RGBA32F,g.FLOAT)&&(m.V=!0,n=g.RGBA32F);!m.V&&x.bb(g,g.RGBA,g.FLOAT)&&(m.V=!0,n=g.RGBA);var I=x.sb(g);z=null;g.RGBA16F&&x.bb(g,g.RGBA16F,I)&&(m.W=!0,z=g.RGBA16F);!m.W&&
x.bb(g,g.RGBA,I)&&(m.W=!0,z=g.RGBA);return m},Pd:function(){var g=Va.instance({width:2});g.kd();var m=P.instance({width:2,isFloat:!0,Ua:3});g.u();m.u();C.flush();C.checkFramebufferStatus(Va.ce())!==C.FRAMEBUFFER_COMPLETE?(P.Xe(),e.qb=!1):e.qb=!0;g.remove();m.remove()},Qd:function(){var g=!1;x.X()&&(g="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(m){return"undefined"!==typeof C[m]}));e.cd=g},Od:function(){var g=x.ob(C);
Object.assign(e,g);if(!e.V&&!e.W)return!1;x.Pd();x.Qd();return!0},Nb:function(g,m,I,O,L){if(!x.Fd())return C.readPixels(g,m,I,O,C.RGBA,C.UNSIGNED_BYTE,L),Promise.resolve(L);null===k.ia&&(k.ja=C.PIXEL_PACK_BUFFER,k.ia=C.createBuffer(),k.vb=-1);C.bindBuffer(k.ja,k.ia);L.byteLength!==k.vb&&(C.bufferData(k.ja,L.byteLength,C.STREAM_READ),k.vb=L.byteLength);C.readPixels(g,m,I,O,C.RGBA,C.UNSIGNED_BYTE,0);k.Na=C.fenceSync(C.SYNC_GPU_COMMANDS_COMPLETE,0);C.flush();return new Promise(function(R,H){function J(){if(!k.sa)return d(),
H(),!1;switch(C.clientWaitSync(k.Na,0,0)){case C.TIMEOUT_EXPIRED:return!1;case C.WAIT_FAILED:return d(),H(),!1;default:return d(),C.deleteSync(k.Na),C.getBufferSubData(k.ja,0,L),C.bindBuffer(k.ja,null),R(L),!0}}d();k.sa=!0;J()||(k.cb=setInterval(J,0))})},m:function(){P.m();Ra.m();Va.m();M.m();null!==k.ia&&(C.deleteBuffer(k.ia),k.ia=null);q=!1}};return x}(),Sa=function(){function a(H,J,u,r){m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,r?m.NEAREST_MIPMAP_NEAREST:m.LINEAR);var B=null;if(null!==
u)try{B=m.getError();if("FUCKING_BIG_ERROR"===B)return!1;m.texImage2D(m.TEXTURE_2D,0,H,4,4,0,m.RGBA,J,u);B=m.getError();if(B!==m.NO_ERROR)return!1}catch(N){return!1}r&&m.generateMipmap(m.TEXTURE_2D);m.clear(m.COLOR_BUFFER_BIT);M.Ia(m);B=m.getError();if("FUCKING_BIG_ERROR"===B)return!1;m.readPixels(0,0,2,2,m.RGBA,m.UNSIGNED_BYTE,z);B=m.getError();B===m.INVALID_OPERATION&&"undefined"!==typeof m.PIXEL_PACK_BUFFER&&(m.bindBuffer(m.PIXEL_PACK_BUFFER,null),m.readPixels(0,0,2,2,m.RGBA,m.UNSIGNED_BYTE,z),
B=m.getError());if(B!==m.NO_ERROR)return!1;u=!0;for(r=0;16>r;++r)u=u&&4>Math.abs(z[r]-127);u&&(e.Xc=J,e.Gc=H);return u}function c(H,J){return I.V&&a(H,m.FLOAT,new Float32Array(n),J)?(t=l.Zb,!0):!1}function d(H,J,u){if(!I.W)return!1;var r=P.Jd(n),B=Ta.Ha(m);if(B&&B.HALF_FLOAT_OES&&a(H,B.HALF_FLOAT_OES,r,J)||m.HALF_FLOAT&&a(H,m.HALF_FLOAT,r,J))return t=l.oa,!0;r=new Float32Array(n);if(a(H,m.FLOAT,r,J))return t=l.oa,!0;m.bindTexture(m.TEXTURE_2D,u);m.texImage2D(m.TEXTURE_2D,0,m.RGBA,2,2,0,m.RGBA,m.UNSIGNED_BYTE,
null);m.bindFramebuffer(e.Fa,R);P.tc(m,u,2,2,r,!1,!1);m.bindFramebuffer(e.Fa,null);m.bindTexture(m.TEXTURE_2D,u);return a(H,null,null,J)?(t=l.oa,!0):!1}function h(H,J,u){w=!0;if(d(H,!0,u)||c(J,!0))return!0;w=!1;return d(H,!1,u)||c(J,!1)?!0:!1}function q(H){if(t===l.N){m=H||C;t=l.RGBA8;w=!0;Ta.mc(m);I||(I=Ta.ob(m));Va.reset();R=m.createFramebuffer();e.Fa=m.DRAW_FRAMEBUFFER||m.FRAMEBUFFER;m.bindFramebuffer(e.Fa,null);m.clearColor(0,0,0,0);m.viewport(0,0,2,2);F.N();O=F.wa(m);H=m.createTexture();m.activeTexture(m.TEXTURE0);
m.bindTexture(m.TEXTURE_2D,H);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);L=H;var J=H=m.RGBA,u=m.RGBA16F,r=m.RGBA32F;r&&(H=r);u&&(J=u);if((u||r)&&h(J,H,L))return p(),!0;H=J=m.RGBA;if(h(J,H,L))return p(),!0;t=l.RGBA8;p();return!1}}function p(){m.deleteProgram(O.ca);m.deleteTexture(L);L=O=null}for(var l={N:-1,Zb:3,oa:2,RGBA8:0},t=l.N,e={Xc:null,Gc:null,Fa:null},w=!0,z=new Uint8Array(16),
n=Array(64),k=0;4>k;++k)for(var y=0;4>y;++y){var x=0===(y+k)%2?1:0,g=4*k+y;n[4*g]=x;n[4*g+1]=x;n[4*g+2]=x;n[4*g+3]=x}var m=null,I=null,O=null,L=null,R=null;return{Ed:function(H){q(H);return w},hc:function(H,J){t===l.N&&(typeof("undefined"!==J)&&(I=J),q(H));return t!==l.RGBA8},Vf:function(H){q(H);return t===l.Zb},ye:function(H){q(H);return t===l.oa},Jf:function(H){q(H);return e.Xc},be:function(H){q(H);return e.Gc},m:function(){m=null;w=!0;t=l.N;I=null}}}(),Ya={instance:function(a){var c=P.instance(a.alpha),
d=P.instance(a.beta);return{Sd:function(){c.g(1);d.g(2)}}}},cb={instance:function(a){var c=null,d=!1,h=!1,q=null,p=!1,l=!1,t=null,e="undefined"===typeof a.preprocessing?!1:a.preprocessing,w="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,b&&void 0!==b.zd&&(a.mask=b.zd+a.mask),c=P.instance({isFloat:!1,url:a.mask}));var z=!1;a.customInputShader&&(z="s44",F.ac({name:"_",id:z,h:a.customInputShader,kg:["uSource"],precision:"lowp"}),F.I(z,[{type:"1i",name:"_",value:0}]));
switch(e){case "sobel":t="s31";p=!0;break;case "meanNormalization":t="s32";p=!0;break;case "grayScale":t="s28";p=!1;break;case "grayScaleTilt":t="s29";l=!0;p=!1;break;case "rgbGrayTilt":t="s30";l=!0;p=!1;break;case "copy":t=z?z:"s0";break;case "inputLightRegulation":t=z?z:"s28";q=ab.instance({Fc:w,Wc:a.size,Sc:a.nBlurPass,Qa:!1});h=!0;break;case "inputMix0":t="none";q=bb.instance({fa:w,td:a.varianceMin,fc:a.blurKernelSizePx,Qa:!1});h=!0;break;case "direct":case "none":t="abort";break;default:t="s3"}l&&
F.I(t,[{name:"u26",type:"1f",value:a.tilt}]);d&&(t+="Mask");var n=P.instance({isFloat:!1,isPot:!1,width:a.size}),k={A:function(){return w},tb:function(){return k.A()},ie:function(){return h?q.ub():n},K:function(y){Va.U();"abort"!==t&&("none"!==t&&(F.set(t),p&&F.L("u27",1/a.size),n.P(),d&&c.g(1),M.l(!1,!1),n.g(0),y=n),h&&q.process(y))},m:function(){n.remove();d&&c.remove()}};return k}},jb={instance:function(a){function c(f){q.forEach(function(K,E){p[E][0]=f[0][K];p[E][1]=f[1][K];p[E][2]=f[2][K];p[E][3]=
f[3][K]});return p}"undefined"===typeof a.normalize&&(a.normalize=!1);var d={input:null,Da:null,zb:null,S:null,Va:null,Jb:null,Kb:null},h=null,q=[],p=[],l=!1,t=null,e=!0,w=-1,z=a.isReorganize?a.isReorganize:!1,n=a.kernelsCount?!0:!1,k=a.dynPelu?Ya.instance(a.dynPelu):!1,y=k?!0:!1,x={isEnabled:!1};a.ue?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Xa.tb(),e=!1):"full"===a.connectivityUp&&(a.sparsity=a.Xa.tb());var g={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",
softplus:"s19",dynPelu:"s17"}[a.activation],m=a.sparsity*a.sparsity,I=!1,O=a.size,L="";if(a.maxPooling){switch(a.maxPooling.size){case 2:L="s33";break;case 4:L="s34"}I=!0;O/=a.maxPooling.size;d.Jb=P.instance({isFloat:!0,isPot:!1,width:O})}var R=void 0!==a.De&&a.De?!0:!1,H=null,J=null,u=null;if(R){H="s45"+a.index.toString();F.Dc("s45",H,[((a.normalization.n-1)/2).toFixed(1)]);F.I(H,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},
{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u30",value:a.normalization.k}]);var r={isFloat:!0,isPot:!0,width:a.size};J=P.instance(r);u=P.instance(r)}var B=-1,N=null;e&&(d.S=P.instance({isFloat:!0,isPot:!1,width:a.size}));d.Da=P.instance(a.bias);var Q={A:function(){return a.size},tb:function(){return O},xc:function(){return a.classesCount},Bd:function(f){h.g(f)},He:function(){a.remap&&a.remap.isEnabled&&(x={isEnabled:!0,ze:P.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),
width:a.remap.maskTexture.width,isPot:!1}),Ta:a.remap.layers.map(function(f){return a.parent.fe(f)}),depth:a.remap.depth})},Ye:function(){switch(a.connectivityUp){case "direct":N=db.instance(a.connectivity);break;case "square":N=fb.instance(a.connectivity);break;case "squareFast":N=gb.instance(a.connectivity,a.activation);break;case "full":N=hb.instance(a.connectivity);break;case "conv":w=a.kernelsCount,N=ib.instance(a.connectivity),z&&(d.Va=P.instance({width:O,isFloat:!0,isFlipY:!1,isPot:!1}))}if(N.ma){var f=
a.size*a.sparsity;B=Math.log(f/a.size)/Math.log(2);d.input=P.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:f,Db:B});d.zb=P.instance({isFloat:!0,isPot:!0,width:a.size})}},K:function(f,K){h=f;N.ma?(d.input.P(),n&&d.Da.g(2),N.K(x),d.input.g(0),d.input.Wd(B),d.zb.P(),n?F.set("s0"):(F.set("s27"),F.L("u25",m),d.Da.g(1)),d.input.Cd(B,0),M.l(!1,!1),F.set(g),R?J.u():d.S.u(),d.zb.g(0),y&&k.Sd(),M.l(!1,!1)):(d.S.P(),d.Da.g(1),N.K());R&&(F.set(H),u.u(),J.g(0),M.l(!1,!1),F.set("s46"),F.L("u6",1),d.S.u(),u.g(1),
M.l(!1,!1));if(e)return I?(d.Jb.P(),d.S.g(0),F.set(L),F.da("u7",1/a.size,1/a.size),M.l(!1,!1),K=d.Jb):K=d.S,K.g(0),z&&(d.Va.u(),F.set("s21"),F.da("u12",w,O/w),M.l(!1,!1),K=d.Va,d.Va.g(0)),K;var E=d.S;a.normalize&&(F.set("gpuRawAvg"===l?"s8":"s7"),F.L("u4",1/a.size),d.Kb.P(),d.S.g(0),M.l(!1,!1),E=d.Kb);f=null;switch(l){case "cpuRGBA2Float":E.pb(!1);K?f=Q.Je(E).then(t):(E=Q.Ke(E),t(E));break;case "cpuMeanFloat":E.pb(!0);K?f=E.Me().then(t):(E=E.Ne(),t(E));break;case "gpuRawAvg":case "gpuRaw":E.g(0);
case "none":null!==t&&t(E)}K&&null===f&&(f=Promise.resolve());return f},Kd:function(f){f&&(l=f.Lb||"none",t=f.Ib||null);d.S=P.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});f="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var K=0,E=0,S=0;K<f;++K)q.push(E+(a.size-1-S)*a.size),p.push([-1,-1,-1,-1]),++E,E===a.size&&(E=0,++S);a.normalize&&(d.Kb=P.instance({isFloat:!0,isPot:!0,width:a.size}))},Je:function(f){return f.Le().then(c)},Ke:function(f){f=f.Mb();
c(f);return p},m:function(){for(var f in d){var K=d[f];K&&K.remove()}N&&(N.m(),N=null)}};a.Xa&&Q.Ye(a.Xa);return Q}};
function kb(a){var c=null,d=null,h=null,q=0;this.s=function(p){this.We(p.Ta);h.Kd({Lb:p.Lb,Ib:p.Ib})};this.fe=function(p){return c[p]};this.We=function(p){var l=null;q=p.length;c=p.map(function(t,e){t=Object.assign({},t,{index:e,parent:this,Xa:l,ue:e===q-1});return l=e=0===e?cb.instance(t):jb.instance(t)});d=c[0];h=c[q-1];c.forEach(function(t,e){0!==e&&t.He()})};this.K=function(p){var l=p;c.forEach(function(t){l=t.K(l,!1)});return l};this.de=function(){return d.A()};this.je=function(){return h.A()};
this.ub=function(){return h.ie()};this.xc=function(){return h.xc()};this.m=function(){c&&(c.forEach(function(p){p.m()}),h=d=c=null,q=0)};"undefined"!==typeof a&&this.s(a)}
var db={instance:function(a){var c=P.instance(a.weights);return{ma:!0,La:function(){return 1},m:function(){c.remove()},ke:function(){return c},K:function(){F.set("s26");c.g(1);M.l(!1,!1)}}}},hb={instance:function(a){var c=a.fromLayerSize,d=P.instance(a.weights);return{ma:!0,La:function(){return c},m:function(){d.remove()},K:function(h){if(h.isEnabled){F.set("s24");h.ze.g(3);var q,p=Math.min(h.Ta.length,h.depth);for(q=0;q<p;++q)h.Ta[q].Bd(4+q)}else F.set("s23");F.L("u16",a.toLayerSize);d.g(1);M.l(!1,
!1)}}}},fb={instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,h=a.toSparsity,q=h*d,p=q/c,l=c/d,t=0,e=0,w=0,z=Array(h*d*h*d*4),n=Array(h*d*h*d*4),k=Array(c*c),y=0;y<k.length;++y)k[y]=0;y=Math.floor(h/2);for(var x=.5/d,g=.5/c,m=.5/q,I=0;I<d;++I)for(var O=Math.round(I*l),L=0;L<d;++L){var R=Math.round(L*l),H=I/d,J=L/d;H+=x;J+=x;for(var u=0;u<h;++u){var r=O+u-y;0>r&&(r+=c);r>=c&&(r-=c);for(var B=0;B<h;++B){var N=t/q,Q=e/q,f=R+B-y;0>f&&(f+=c);f>=c&&(f-=c);var K=r/c,E=f/c;Q=1-Q-1/q;K+=g;E+=
g;N+=m;Q+=m;var S=I*h+u,Z=L*h+B;Z=d*h-Z-1;S=Z*d*h+S;z[4*S]=N;z[4*S+1]=Q;z[4*S+2]=K;z[4*S+3]=E;E=k[f*c+r]++;S=E%p;K=r*p+S;f=f*p+(E-S)/p;f=c*p-1-f;f=f*c*p+K;n[4*f]=N;n[4*f+1]=Q;n[4*f+2]=H;n[4*f+3]=J;++t>=q&&(t=0,++e);++w}}}k=null;var X=P.instance(a.weights);delete a.weights.data;var v=P.instance({width:q,isFloat:!0,array:new Float32Array(n),isPot:!0});n=null;var da=P.instance({width:q,isFloat:!0,array:new Float32Array(z),isPot:!0});z=null;return{ma:!0,La:function(){return p},m:function(){v.remove();
da.remove();X.remove()},K:function(){F.set("s22");X.g(1);da.g(2);M.l(!1,!1)}}}},ib={instance:function(a){var c=a.kernelsCount,d=a.toSparsity,h=d*a.toLayerSize/a.fromLayerSize,q=P.instance(a.weights);return{ma:!0,La:function(){return h},Pf:function(){return d},ke:function(){return q},m:function(){q.remove()},K:function(){F.set("s25");F.L("u22",c);F.L("u23",d);F.L("u16",a.toLayerSize);F.L("u24",a.fromLayerSize);q.g(1);M.l(!1,!1)}}}},gb={instance:function(a,c){var d=a.fromLayerSize,h=a.toLayerSize,q=
a.toSparsity,p=a.stride?a.stride:1,l=q*h/d,t=h<d,e=d/h,w=P.instance(a.weights),z="s47"+[d.toString(),h.toString(),q.toString(),p.toString(),c].join("_");F.Vd(z)||(a=Oa(c),h=[{type:"1f",name:"u16",value:h},{type:"1f",name:"u29",value:p}],t&&h.push({type:"1f",name:"u24",value:d}),d=[(t?l:q).toFixed(1),a],t&&d.push(e.toFixed(1)),F.Dc(t?"s39":"s38",z,d),F.I(z,h.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{ma:!1,La:function(){return l},
m:function(){w.remove()},K:function(){F.set(z);w.g(3);M.l(!1,!1)}}}},ab={instance:function(a){var c=a.Sc?a.Sc:3,d=a.Fc?a.Fc:64,h=a.Wc?a.Wc:64,q=a.Qa?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=P.instance(a),l=P.instance(a),t=P.instance(a),e=P.instance(a),w=P.instance({isFloat:!0,width:h,isPot:!1,isFlipY:!1}),z=1/d;return{process:function(n){F.set("s35");e.u();M.l(q,!1);F.set("s36");for(var k=0;k<c;++k)p.u(),F.da("u7",z,0),M.l(q,!1),t.u(),e.g(0),M.l(q,!1),l.u(),p.g(0),F.da("u7",0,z),M.l(q,
!1),e.u(),t.g(0),M.l(q,!1),k!==c-1&&l.g(0);F.set("s37");w.u();n.g(0);l.g(1);e.g(2);M.l(q,!1);w.g(0)},ub:function(){return w}}}},bb={instance:function(a){function c(e){return P.instance({isFloat:e,width:d.fa,isPot:!1,isFlipY:!1})}var d=Object.assign({td:.1,fc:9,fa:128,Qa:!1},a),h=c(!1),q=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],l=c(!0),t=[h,p[0],p[1]];a={u1:0};F.bc([{id:"s49",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",
j:a,i:["u1"],precision:"lowp"},{id:"s50",name:"_",h:"uniform sampler2D u1;\n        const float HALFKERNELSIZE = "+Math.round((d.fc-1)/2).toFixed(2)+";\n        const float DXY = "+(1/d.fa).toFixed(6)+"HALFKERNELSIZE",j:a,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",h:"uniform sampler2D u32, u33, u34, u35;\n        const float VARIANCEMIN = "+d.td.toFixed(4)+"u32",j:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){F.set("s49");h.P();M.l(d.Qa,
!1);F.set("s50");for(var e=0;3>e;++e)F.da("u31",1,0),q[e].u(),t[e].g(0),M.l(!1,!1),F.da("u31",0,1),p[e].u(),q[e].g(0),M.l(!1,!1);F.set("s51");l.u();h.g(0);p[0].g(1);p[1].g(2);p[2].g(3);M.l(!1,!1);l.g(0)},ub:function(){return l}}}};function lb(a,c){a[c]=!0;a.setAttribute(c,"true")}function mb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function nb(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]}function ob(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function pb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function qb(a){if(!a)return a;var c=null;if(a.video){var d=function(h){return h&&"object"===typeof h?Object.assign({},h):h};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&(c.deviceId=a.deviceId);return c}
function sb(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a}
function tb(a){function c(k){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(y,x){return Math.abs(y-k)-Math.abs(x-k)})}function d(k){var y=qb(a);k=k(y);q.push(k);h(k)}function h(k){if(k.video&&k.video.facingMode&&k.video.facingMode.exact){var y=k.video.facingMode.exact;k=qb(k);delete k.video.facingMode.exact;k.video.facingMode.ideal=y;q.push(k)}}var q=[];if(!a||!a.video)return q;h(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=
c(a.video.width.ideal).slice(0,3),l=c(a.video.height.ideal).slice(0,3),t={},e=0;for(t.aa=void 0;e<p.length;t={aa:t.aa},++e){t.aa=p[e];var w={},z=0;for(w.$=void 0;z<l.length;w={$:w.$},++z)if(w.$=l[z],t.aa!==a.video.width.ideal||w.$!==a.video.height.ideal){var n=Math.max(t.aa,w.$)/Math.min(t.aa,w.$);n<4/3-.1||n>16/9+.1||d(function(k,y){return function(x){x.video.width.ideal=k.aa;x.video.height.ideal=y.$;return x}}(t,w))}}}d(function(k){return sb(k)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&d(function(k){delete k.video.width.ideal;delete k.video.height.ideal;return k}),d(function(k){delete k.video.width;delete k.video.height;return k}));a.video.facingMode&&(d(function(k){delete k.video.facingMode;return k}),a.video.width&&a.video.height&&d(function(k){sb(k);delete k.video.facingMode;return k}));q.push({audio:a.audio,video:!0});return q}
function ub(a){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(h){c=window.innerHeight>window.innerWidth}if(c&&a&&a.video){c=a.video.width;var d=a.video.height;c&&d&&c.ideal&&d.ideal&&c.ideal>d.ideal&&(a.video.height=c,a.video.width=d)}}
function vb(a){a.volume=0;lb(a,"muted");if(ob()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;lb(a,"muted")},5)}}
function wb(a,c,d,h){function q(l){p||(p=!0,d(l))}var p=!1;navigator.mediaDevices.getUserMedia(h).then(function(l){function t(){setTimeout(function(){if(a.currentTime){var e=a.videoWidth,w=a.videoHeight;if(0===e||0===w)q("VIDEO_NULLSIZE");else{e&&(a.style.width=e.toString()+"px");w&&(a.style.height=w.toString()+"px");e={Gd:null,af:null,Ae:null};try{var z=l.getVideoTracks()[0];z&&(e.Ae=z,e.Gd=z.getCapabilities(),e.af=z.getSettings())}catch(n){}ob()||mb()?a.parentNode&&null!==a.parentNode?(p||c(a,l,
e),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),vb(a),p||c(a,l,e),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";vb(a);setTimeout(function(){a.play()},100)},80)):p||c(a,l,e)}}else q("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof a.srcObject?a.srcObject=l:(a.src=window.URL.createObjectURL(l),a.videoStream=l);vb(a);a.addEventListener("loadeddata",function(){var e=a.play();vb(a);"undefined"===typeof e?
t():e.then(function(){t()}).catch(function(){q("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(l){q(l)})}
function xb(a,c,d){var h=pb()?document.createElement("video"):!1;if(h)if(pb()){if(d&&d.video){if(mb()){var q=nb();0!==q[0]&&(12>q[0]||12===q[0]&&2>q[1])&&ub(d)}d.video.width&&d.video.width.ideal&&(h.style.width=d.video.width.ideal+"px");d.video.height&&d.video.height.ideal&&(h.style.height=d.video.height.ideal+"px")}lb(h,"autoplay");lb(h,"playsinline");d&&d.audio?h.volume=0:lb(h,"muted");wb(h,a,function(){function p(t){if(0===t.length)c("INVALID_FALLBACKCONSTRAINTS");else{var e=t.shift();wb(h,a,function(){p(t)},
e)}}var l=tb(d);p(l)},d)}else c&&c("MEDIASTREAMAPI_NOTFOUND");else c&&c("VIDEO_NOTPROVIDED")}
var yb=function(){var a={n:5,Fb:1,Qc:0,Ja:[30,45],Ga:[2,200],k:.7,hf:200,Ge:.05},c=-1,d=null,h=-1,q=-1,p=0,l=-1,t=-1,e=0,w=0,z=a.Ga[1],n={ge:function(){switch(c){case -1:return-1;case 0:return t+d.Qc;case 1:return e}},Yd:function(k){return Math.pow(Math.min(Math.max(l,0),d.n-1)/(d.n-1),k||1)},s:function(k){d=Object.assign({},a,k);l=t=d.Fb;c=0;n.reset()},df:function(k){k=("undefined"===typeof k?Date.now():k)||0;var y=Math.min(Math.max(k-w,d.Ga[0]),d.Ga[1]);z=y;w=k;var x=-1===h?0:d.k;h=Math.min(Math.max(1E3/
y,5),120)*(1-x)+h*x;k-q>d.hf&&5<++p&&(y=d.k,l=l*(1-y)+(h<d.Ja[0]?t-1:h>d.Ja[1]?t+1:t)*y,Math.abs(l-t)>1-d.Ge&&(y=Math.min(Math.max(Math.round(l),0),d.n-1),y!==t&&(l=t=y,h=(d.Ja[1]-d.Ja[0])/2)),q=k)},cg:function(k){e=k;c=1},mg:function(){c=0;n.reset()},reset:function(){z=a.Ga[1];q=h=-1;p=0},Gf:function(){return z}};return n}(),zb=function(){var a={Uc:4,Wa:[1.5,1.5,2],ea:[.1,.1,.1],fd:1,fa:-1,wb:-1,cf:2,Fe:1,hd:!0,Td:.8},c=null,d=[],h=0,q=[.5,.5,1];return{s:function(p){c=Object.assign({},a,p);d.splice(0);
p=c.Wa[0]*c.ea[0];var l=c.Wa[1]*c.ea[1],t=1/(1+c.Wa[2]*c.ea[2]),e=c.fd*Math.min(c.fa,c.wb),w=e/c.fa;e/=c.wb;var z=.5*c.Td;z*=z;for(var n=0;n<c.Uc;++n){var k=Math.pow(t,n),y=w*k,x=e*k;k=y*p;var g=x*l,m=y/2;x/=2;for(var I=1+(1-m-m)/k,O=1+(1-x-x)/g,L=0;L<O;++L)for(var R=x+L*g,H=R-.5,J=0;J<I;++J){var u=m+J*k,r=u-.5;r*r+H*H>z||d.push([u,R,y*c.Fe])}}c.hd&&d.sort(function(B,N){var Q=B[0]-.5;B=B[1]-.5;var f=N[0]-.5;N=N[1]-.5;return Q*Q+B*B-(f*f+N*N)})},get:function(){var p=d.length;if(0===p)return q;h>=p&&
(h=0);var l=d[Math.floor(h)];h=(h+1/c.cf)%p;return l}}}(),Ab=function(){function a(){d(z+e.Eb)}function c(){y.Ba=0===e.ha?window.requestAnimationFrame(d):window.requestAnimationFrame(h)}function d(g){k.ta&&null!==w&&(g-=z,g=Math.min(Math.max(g,e.lc[0]),e.lc[1]),z+=g,q(),w(z))}function h(g){k.ta&&(y.timeout=window.setTimeout(d.bind(null,g),e.ha))}function q(){y.Ba&&(window.cancelAnimationFrame(y.Ba),y.Ba=null);y.timeout&&(window.clearTimeout(y.timeout),y.timeout=null)}function p(g){g?(k.Ra=!0,n.postMessage("STOP"),
Ta.qd(!0),c()):(k.Ra=!1,Ta.qd(!1),n.postMessage("START"))}function l(){window.addEventListener("blur",function(){p(!1)});window.addEventListener("focus",function(){p(!0)})}var t={Kc:!0,lc:[1,200],Eb:50,ha:0},e=null,w=null,z=0,n=null,k={ka:!1,Ra:!0,xe:!1,ve:!1,ta:!1},y={Ba:null,timeout:null},x={s:function(g){e=Object.assign(t,g);Object.assign(k,{Ra:!0,ka:!0,ta:!1});if(e.Kc){g=!1;try{if("undefined"===typeof SharedWorker){var m=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        switch (e.data) {\n          case 'START':\n            if (handler === null){\n              handler = setInterval(function(){\n                self.postMessage('tick');\n              }, "+
e.Eb.toString()+");\n            }\n            break;\n          case 'STOP':\n            if (handler !== null){\n              clearInterval(handler);\n              handler = null;\n            }\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),I=new Worker(m);I.addEventListener("message",a);n=I;k.xe=!0}else{var O=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          switch (e.data) {\n            case 'START':\n              if (handler === null){\n                handler = setInterval(function(){\n                  port.postMessage('tick');\n                }, "+
e.Eb.toString()+");\n              }\n              break;\n            case 'STOP':\n              if (handler !== null){\n                clearInterval(handler);\n                handler = null;\n              }\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),L=new SharedWorker(O);L.port.start();L.port.addEventListener("message",a);n=L.port;k.ve=!0}g=!0}catch(R){}g&&l()}},update:function(g){Object.assign(e,
g)},Se:function(g){k.ka||x.s({});q();k.ta=!0;w=g;k.Ra&&c()},stop:function(){w=null;k.ta=!1;q()}};return x}(),Bb=function(){var a=0,c=null,d=null,h=null,q=null;return{s:function(p,l){a=p.length;c=l;d=p;h=new Float32Array(a);q=new Float32Array(a)},he:function(){return q},bf:function(p,l,t){p.forEach(function(e,w){var z=Math.min(1,d[w]*t*(l+.33*(1-l)));e=z*e+(1-z)*h[w];h[w]=e;q[w]=c[w](e)})}}}(),V={VERSION:"1.2.2",ga:[],hb:!1,ib:!1,gb:!1,$b:!1,Aa:!0,za:!1,ready:!1,initialized:!1},Cb={facingMode:"user",
idealWidth:800,idealHeight:600,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280},b={neuralNetworkPath:"jeelizFaceTransferNNC.json",Yb:"../../",ha:0,width:512,height:512,ef:55,gd:[.6,5.8],ea:[.06,.08,.15],Ve:.6,Te:2,Ue:[2,2,3],threshold:1.1,xd:[.03,1],mf:20,oe:!1,fb:[2,7],H:{Bc:[3,7],quality:[0,6],position:[0,7],rotation:[5,7]},Tc:11,Rc:1,Be:1,cc:[.1,.01],Qe:[.4,-.7,-.4],Re:[.3,0,0],Rd:!1,yd:.001,dc:[Math.PI/10,Math.PI/6],Zc:[.1,.4],$c:[.009,
.02],ad:[.02,.04],Gb:5,Cc:.05,wd:[.2,.2,.15,.15,.15,.15,.2,.2,.15,.15,.2],Ce:[Ia.bind(null,.05,.7),Ia.bind(null,.05,.7),Ia.bind(null,0,.4),Ia.bind(null,0,.4),Ia.bind(null,0,.6),Ia.bind(null,0,.6),Ja.bind(null,.05,.5),Ia.bind(null,.2,.6),Na.bind(null,.7,.8,2),Na.bind(null,.7,.8,2),Ia.bind(null,.15,.5)]};V.get_nMorphs=function(){return b.Tc};var Db=null,Eb=null,Fb=null,Gb=[];
function Hb(){function a(){1===++K&&(Bb.s(b.wd,b.Ce),c(),V.ready=!0,V.ga.forEach(function(A){A()}),V.ga.splice(0,V.ga.length),d(),K=0)}function c(){O=Ga();L=new Uint8Array(x*x*4);V.get_morphTargetInfluences=function(){return O};V.get_morphTargetInfluencesStabilized=function(){return Bb.he()};V.set_morphUpdateCallback=function(A){R=A};V.get_rotation=function(){return u};V.get_positionScale=function(){var A=m.od.ee();A.pb(!1);A=A.Mb();N[0]=1-A[1][0];N[1]=A[2][0];N[2]=A[3][0]*g[0];return N};V.get_rotationStabilized=
function(){return B};V.switch_sleep=function(A){S!==E.Rb||A?S=A?E.Rb:E.play:d()};V.on_detect=function(A){A(Z.R);Z.Hb.push(A)};V.is_detected=function(){return Z.R};V.set_animateDelay=function(A){k=A;Ab.update({ha:k})}}function d(){S!==E.play&&(S=E.play,Ab.stop(),h())}function h(){var A,G;return Ba(new wa(new ma(function(ba){switch(ba.Y){case 1:a:{if("VIDEO"===f.element.nodeName){var Y=f.element.currentTime-v;0>Y&&(v=f.element.currentTime);if(1E3*Y<b.mf)break a;v+=Y}f.na.refresh();Y=da.zc();Y[0]===
f.Ea[0]&&Y[1]===f.Ea[1]||da.sd()}A=yb.ge();G=0;case 2:if(!(G<A)){ba.Y=4;break}Y=m;var ra=y;F.set("s53");Va.U();Y.Oa.P();f.na.g(0);Y.ab.g(1);M.l(!1,!1);Y.Oa.g(0);ra.K(Y.Oa);b.oe?Y=P.Pe(H,L).then(q):(P.Oe(H,L),q(),Y=Promise.resolve());ba.Y=3;return{value:Y};case 3:++G;ba.Y=2;break;case 4:Y=m,Va.U(),I.P(),F.set("s56"),Y.ab.g(0),M.l(!1,!1),Y=yb.Yd(),Q=3*(1-Y)+1*Y,yb.df(),V.Aa&&(Va.gf(),F.set("s52"),f.na.g(0),M.l(!1,!1),C.enable(C.BLEND),C.blendFunc(C.SRC_ALPHA,C.ONE),I.g(0),M.l(!1,!1),C.disable(C.BLEND)),
C.flush(),S!==E.Rb&&Ab.Se(h),ba.Y=0}})))}function q(){t();if(!b.Rd&&Z.R)for(var A=0;3>A;++A){var G=l(A+b.H.rotation[0],b.H.rotation[1]);G=(2*G-1)*b.Qe[A];G+=b.Re[A];J[A]=G}p();A=Date.now();G=A-X.Oc;var ba=l(b.H.quality[0],b.H.quality[1]);X.Yc=Ja(b.Zc[0],b.Zc[1],ba);ba=l(b.H.position[0],b.H.position[1]);var Y=l(b.H.position[0]+1,b.H.position[1]),ra=l(b.H.position[0]+2,b.H.position[1]);X.ed=1-Ja(b.ad[0],b.ad[1],Math.sqrt(ba*ba+Y*Y+ra*ra)/G);ba=X.la[0]-J[0];Y=X.la[1]-J[1];ra=X.la[2]-J[2];G=Math.sqrt(ba*
ba+Y*Y+ra*ra)/G;X.la[0]=J[0];X.la[1]=J[1];X.la[2]=J[2];X.bd=1-Ja(b.$c[0],b.$c[1],G);X.O=X.Yc*X.ed*X.bd;X.Oc=A;X.Nc[X.Cb]=X.O;X.Cb=(X.Cb+1)%b.Gb;for(A=0;A<b.Gb;++A)X.O=Math.min(X.Nc[A],X.O);Bb.bf(O,X.O,Q);R&&R(X.O,Q);if(Z.R)for(A=b.cc[1]*X.O+b.cc[0]*(1-X.O),A*=Q,G=0;3>G;++G)u[G]=A*J[G]+(1-A)*u[G],B[G]=u[G];else A=Date.now()*b.yd,r[0]=b.dc[0]*Math.sin(A),r[1]=b.dc[1]*Math.cos(A),B[0]=r[0],B[1]=r[1],B[2]=r[2]}function p(){var A=l(b.H.Bc[0],b.H.Bc[1]);Z.Pa=b.Cc*A+(1-b.Cc)*Z.Pa;.6<Z.Pa&&!Z.R?(Z.Hb.forEach(function(G){G(!0)}),
Z.R=!0):.4>Z.Pa&&Z.R&&(Z.Hb.forEach(function(G){G(!1)}),Z.R=!1)}function l(A,G){A+=x*G;return(L[4*A]+L[4*A+1]+L[4*A+2]+L[4*A+3])/1020}function t(){O.forEach(function(A,G){if(Z.R){A=(b.Rc+G)%x;var ba=b.Be+Math.floor((b.Rc+G)/x);ba=x-1-ba;A=l(A,ba);O[G]=A}else O[G]=0})}function e(A){y=new kb({Ta:A.layers,Lb:"gpuRaw",Ib:function(G){var ba=m;ba.ab.ld(1);C.viewport(0,0,1,1);F.set("s54");F.L("u36",X.O);F.md("u37",zb.get());F.md("u38",b.ea);M.l(!1,!1);ba.od.ld(1);F.set("s55");F.L("u36",X.O);ba.ab.g(0);M.l(!1,
!1);H=G}});A=y.de();A!==n&&(n=A,da.Ec(),m.Oa.resize(n,n),da.nd());x=y.je();a()}var w=-1,z=-1,n=64,k=b.ha,y=null,x=0,g=null,m={},I=null,O=null,L=null,R=null,H=null,J=[0,0,0],u=[0,0,0],r=[0,0,0],B=[0,0,0],N=[0,0,0],Q=1,f={lf:[.5,.5],kf:[.5,.5],element:null,na:null,Ea:[-1,-1]},K=0,E={Nd:-4,Ee:-3,Zf:-2,Rb:-1,play:0},S=E.Ee,Z={Pa:0,R:!1,Hb:[]},X={O:1,ed:1,Yc:1,bd:1,la:[0,0,0],Oc:Date.now(),Nc:new Float32Array(b.Gb),Cb:0},v=0,da={Ec:function(){w=b.width;z=b.height;zb.s({Wa:b.Ue,Uc:b.Te,fa:w,wb:z,fd:b.Ve,
ea:b.ea,hd:!0});g=[1,w/z]},nd:function(){F.I("s52",[{type:"1i",name:"u1",value:0}]);F.I("s53",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u39",value:1},{type:"2f",name:"u40",value:g}]);F.I("s56",[{type:"1i",name:"u39",value:0},{type:"2f",name:"u40",value:g},{type:"3f",name:"u41",value:[0,.5,1]}]);F.I("s54",[{type:"1i",name:"u42",value:0},{type:"1i",name:"u39",value:1},{type:"1f",name:"u43",value:b.gd[0]},{type:"1f",name:"u44",value:b.gd[1]},{type:"1f",name:"u45",value:b.ef},{type:"1f",name:"u46",
value:b.threshold},{type:"1f",name:"u47",value:g[0]}]);F.I("s55",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u5",value:1},{type:"2f",name:"u48",value:b.xd}])},Ld:function(){F.bc([{id:"s52",name:"_",ya:"attribute vec2 a0;uniform vec2 u49,u50;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u50+u49*a0;}",Ca:["a0"],qa:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u49","u50"],precision:"lowp"},{id:"s53",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
ya:"attribute vec2 a0;uniform sampler2D u39;uniform vec2 u40,u49,u50;const vec2 f=vec2(.25,.5),i=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u39,f);vec2 b=a.gb,c=a.a*u40,d=a0*.5+e,h=b+(d-e)*c;vv0=u50+u49*2.*(h-.5),gl_Position=vec4(a0,0.,1.);}",Ca:["a0"],qa:[2],i:["u1","u39","u40","u49","u50"],precision:"lowp"},{id:"s54",name:"_",ya:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u42,u39;uniform vec3 u37,u38;uniform float u43,u44,u45,u46,u47,u36;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 c=texture2D(u42,vec2(.4375,.9375)),d=texture2D(u42,vec2(.5625,.9375));float f=dot(c-d,e);bool g=f>u46;vec4 a=texture2D(u39,vec2(.5,.5));g?a.r=2.:a.r>u45?a.r=0.:a.r>1.9&&(a.a>u44||a.a<u43)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u37,a.r=1.;else{float h=dot(e,texture2D(u42,vec2(.0625,.9375))),i=dot(e,texture2D(u42,vec2(.1875,.9375))),j=dot(e,texture2D(u42,vec2(.3125,.9375))),b;if(a.r>1.9)b=1.-u36;else b=1.,a.r=0.;float k=a.a*u47;a.gba+=vec3(h,i,j)*u38*b*k;}gl_FragColor=a;}",
i:"u42 u39 u37 u43 u44 u45 u46 u38 u47 u36".split(" ")},{id:"s56",name:"_",h:"uniform sampler2D u39;uniform vec3 u41;uniform vec2 u40;varying vec2 vv0;const vec2 i=vec2(1.,1.);void main(){vec4 f=texture2D(u39,vec2(.25,.5));vec2 g=f.gb;float j=f.a;vec2 a=j*u40,c=g+a,d=g;d-=a/2.,c-=a/2.;vec2 k=.5*(d+c),h=step(d,vv0)*step(vv0,c);float l=h.x*h.y;vec2 b=2.*abs(k-vv0)/a;b=pow(b,3.*i),gl_FragColor=vec4(l*u41*max(b.x,b.y),1.);}",i:["u39","u40","u41"],precision:"lowp"},{id:"s55",name:"_",h:"uniform sampler2D u1,u5;uniform vec2 u48;uniform float u36;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);float c=(1.-u36)*(u48.y-u48.x)+u48.x;gl_FragColor=mix(b,a,c*f);}",
i:["u1","u5","u48","u36"]}])},me:function(A){var G=new Float32Array([0,.5,.5,0]);A.Oa=P.instance({isPot:!0,isFloat:!1,width:n});G={width:1,height:1,isFloat:!0,isPot:!1,array:G};A.ab=Xa.instance(G);A.od=Xa.instance(G)},Md:function(){f.na=P.instance({F:f.element,isPot:!1,isFloat:!1,isFlipY:!0});I=P.instance({isPot:!1,isFloat:!1,width:w,height:z})},s:function(){da.Md();da.me(m);Ab.s({Kc:!1,ha:k});yb.s({Fb:0,n:b.fb[1]-b.fb[0]+1,Qc:b.fb[0]});Fb?e(Fb):Fa(function(A){A=JSON.parse(A);e(A)})},m:function(){Ab.stop();
y&&(y.m(),y=null);S=E.Nd},Hd:function(A){V.hb&&V.hb();var G={video:{facingMode:{ideal:Cb.facingMode},width:{min:Cb.minWidth,max:Cb.maxWidth,ideal:Cb.idealWidth},height:{min:Cb.minHeight,max:Cb.maxHeight,ideal:Cb.idealHeight}},audio:V.$b};Cb.deviceId&&(constraints.deviceId=Cb.deviceId);xb(function(ba,Y){Db=Y;V.ib&&V.ib();A(ba)},function(){window.eb&&window.eb("WEBCAM_UNAVAILABLE")},G)},Pc:function(A,G){da.Ld();f.element=A;Eb=f.element;da.sd();da.Ec();da.nd();da.s();G&&G()},zc:function(){var A=[-1,
-1],G=f.element;"VIDEO"===G.nodeName?(A[0]=G.videoWidth,A[1]=G.videoHeight):(A[0]=G.width,A[1]=G.height);return A},sd:function(){var A=da.zc();f.Ea[0]=A[0];f.Ea[1]=A[1];Wa.Ka().width=A[0];Wa.Ka().height=A[1];b.width=A[0];b.height=A[1];var G=f.lf,ba=f.kf,Y=A[1]/A[0];A=Wa.J()/Wa.A();Y>A?1>=Y?G[0]*=Y:G[1]/=Y:(G[0]*=Y,Y=1/A,G[0]*=Y,G[1]*=Y);G[1]*=A;G=[{type:"2f",name:"u49",value:G},{type:"2f",name:"u50",value:ba}];F.I("s53",[{type:"1i",name:"u1",value:0}].concat(G));F.I("s52",G)}};Gb.push(da);return da}
V.onLoad=function(a){V.ready?a():V.ga.push(a)};V.set_audio=function(a){V.$b=a};V.switch_displayVideo=function(a){V.Aa=a;V.za&&(V.za.style.display=V.Aa?"block":"none")};V.onWebcamAsk=function(a){V.hb=a};V.onContextLost=function(a){V.gb=a};V.onWebcamGet=function(a){V.ib=a};V.destroy=function(){Eb&&Eb.srcObject&&Eb.srcObject.getTracks().forEach(function(a){a.stop()});Gb.forEach(function(a){a.m()});Gb.splice(0);Wa.m();V.switch_displayVideo(!1);V.initialized=!1;V.ga.splice(0)};
V.set_size=function(a,c){b.width=a;b.height=c};V.get_size=function(){return{width:b.width,height:b.height}};V.get_videoStream=function(){return Db};V.get_video=function(){return Eb};V.get_cv=function(){return Wa.Ka()};V.set_color=function(a){F.I("s56",[{type:"3f",name:"u41",value:a}])};
V.init=function(a){var c=Hb(),d=a.callbackReady?a.callbackReady:function(q){console.log("ERR:",q)},h=a.callbackReady?a.callbackReady.bind(null,!1):!1;if("undefined"===typeof a.canvasId)d("NO_CANVASID");else if(document.getElementById(a.canvasId))if(V.initialized)d("ALREADY_INITIALIZED");else{V.initialized=!0;window.eb=d?function(q){d(q);window.eb=!1}:!1;a.NNCPath&&(b.Yb=a.NNCPath);"undefined"!==typeof a.NNC&&(Fb="string"===typeof a.NNC?JSON.parse(a.NNC):a.NNC);h&&V.ga.push(h);if(!Wa.s({kc:a.canvasId,
width:b.width,height:b.height,debug:!1,Ab:!1,Vc:function(){V.gb&&V.gb()},premultipliedAlpha:!1}))return d("GL_INCOMPATIBLE"),!1;V.za=Wa.Ka();V.Aa||(V.za.style.display="none");M.s();Va.s();F.s();P.s();C.depthFunc(C.LEQUAL);C.clearDepth(1);a.videoSettings&&a.videoSettings.videoElement?c.Pc(a.videoSettings.videoElement,!1):(a.videoSettings&&Object.assign(Cb,a.videoSettings),c.Hd(function(q){c.Pc(q,!1)}));return!0}else d("INVALID_CANVASID")};window.JEEFACETRANSFERAPI=V;
;return JEEFACETRANSFERAPI||window.JEEFACETRANSFERAPI;})();