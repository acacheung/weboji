/* eslint-disable */
/*
 SharedContext.is_webgl2() &&*/
function ca(){this.ua=!1;this.Z=null;this.yd=void 0;this.Y=1;this.xc=this.Md=0;this.qa=null}function ea(a){if(a.ua)throw new TypeError("Generator is already running");a.ua=!0}ca.prototype.wa=function(a){this.yd=a};ca.prototype.ya=function(a){this.qa={Yd:a,ve:!0};this.Y=this.Md||this.xc};ca.prototype.return=function(a){this.qa={return:a};this.Y=this.xc};function ma(a){this.o=new ca;this.Ke=a}ma.prototype.wa=function(a){ea(this.o);if(this.o.Z)return oa(this,this.o.Z.next,a,this.o.wa);this.o.wa(a);return sa(this)};
function ta(a,c){ea(a.o);var d=a.o.Z;if(d)return oa(a,"return"in d?d["return"]:function(h){return{value:h,done:!0}},c,a.o.return);a.o.return(c);return sa(a)}ma.prototype.ya=function(a){ea(this.o);if(this.o.Z)return oa(this,this.o.Z["throw"],a,this.o.wa);this.o.ya(a);return sa(this)};
function oa(a,c,d,h){try{var r=c.call(a.o.Z,d);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return a.o.ua=!1,r;var p=r.value}catch(l){return a.o.Z=null,a.o.ya(l),sa(a)}a.o.Z=null;h.call(a.o,p);return sa(a)}
function sa(a){for(;a.o.Y;)try{var c=a.Ke(a.o);if(c)return a.o.ua=!1,{value:c.value,done:!1}}catch(d){a.o.yd=void 0,a.o.ya(d)}a.o.ua=!1;if(a.o.qa){c=a.o.qa;a.o.qa=null;if(c.ve)throw c.Yd;return{value:c.return,done:!0}}return{value:void 0,done:!0}}function wa(a){this.next=function(c){return a.wa(c)};this.throw=function(c){return a.ya(c)};this.return=function(c){return ta(a,c)};this[Symbol.iterator]=function(){return this}}
function Ba(a){function c(h){return a.next(h)}function d(h){return a.throw(h)}return new Promise(function(h,r){function p(l){l.done?h(l.value):Promise.resolve(l.value).then(c,d).then(p,r)}p(a.next())})}function Ca(a){var c=new XMLHttpRequest;c.open("GET",b.ac+b.neuralNetworkPath,!0);c.withCredentials=!1;c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&0!==c.status||a(c.responseText)};c.send()}function Ga(){for(var a=b.Wc,c=Array(a),d=0;d<a;++d)c[d]=0;return c}
function Ha(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=Ha(a[d],c);return a}function Ia(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)}function Ja(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)}function Na(a,c,d,h){return Math.pow(Math.min(Math.max((h-a)/(c-a),0),1),d)}
function Oa(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Pa(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}
function Qa(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,h=c.n;var r="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var p=r.length;c=new Uint8Array(p);for(var l=0;l<p;++l)c[l]=r.charCodeAt(l);r=new Float32Array(h);p=new Float32Array(d);l=a+d+1;for(var t=0;t<h;++t){for(var e=l*t,v=0===Pa(c,e)?1:-1,z=e+1,n=1,g=0,y=z+a-1;y>=z;--y)g+=n*Pa(c,y),n*=2;z=g;e=e+1+a;n=p.length;g=0;for(y=e;y<e+n;++y)p[g]=Pa(c,y),++g;for(n=e=0;n<d;++n)e+=p[n]*Math.pow(2,-n-1);r[t]=0===e&&0===
z?0:v*(1+e)*Math.pow(2,1+z-Math.pow(2,a-1))}return r}
var G=function(){function a(u,q,B){q=u.createShader(q);u.shaderSource(q,B);u.compileShader(q);return u.getShaderParameter(q,u.COMPILE_STATUS)?q:!1}function c(u,q,B){q=a(u,u.VERTEX_SHADER,q);B=a(u,u.FRAGMENT_SHADER,B);u===C&&l.push(q,B);var N=u.createProgram();u.attachShader(N,q);u.attachShader(N,B);u.linkProgram(N);return N}function d(u,q){q.B=q.B?!0:!1;if(!q.B){void 0===q.za&&(q.za="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===
q.Da&&(q.Da=["a0"]);void 0===q.ra&&(q.ra=[2]);if(void 0===q.precision||"highp"===q.precision)q.precision=n;q.id=v++;void 0!==q.nd&&(q.nd.forEach(function(N,Q){q.h=q.h.replace(N,q.Ya[Q])}),q.nd.splice(0));q.$b=0;q.ra.forEach(function(N){q.$b+=4*N});q.da=c(u,q.za,"precision "+q.precision+" float;\n"+q.h);q.v={};q.i.forEach(function(N){q.v[N]=u.getUniformLocation(q.da,N)});q.attributes={};q.sa=[];q.Da.forEach(function(N){var Q=u.getAttribLocation(q.da,N);q.attributes[N]=Q;q.sa.push(Q)});if(q.j){u.useProgram(q.da);
e=q;t=q.id;for(var B in q.j)u.uniform1i(q.v[B],q.j[B])}q.ca=!0}}function h(u){Ra.af(J);t!==u.id&&(J.N(),t=u.id,e=u,C.useProgram(u.da),u.sa.forEach(function(q){0!==q&&C.enableVertexAttribArray(q)}))}function r(u,q,B){d(u,q,B);u.useProgram(q.da);u.enableVertexAttribArray(0);t=-1;return e=q}function p(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var l=[],t=-1,e=null,v=0,z=!1,n="highp",g=["u1"],y=["u0"],x={u1:0},k={u0:0},m={u1:0,u2:1},
E={u3:0},O={s0:p(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:g,j:x,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:m},s3:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:g,j:x},s4:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:m},s5:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:g,j:x},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:g,j:x},s7:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],j:k},s8:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
i:["u0","u4"],j:k},s9:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:g,j:x},s10:{h:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",i:["u1","u5","u6"],j:{u1:0,u5:1}},s11:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",
i:["u1","u7"],j:x},s12:{h:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
i:["u1","u8"],j:x},s13:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:y,j:k,B:!0},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:y,j:k},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:y,j:k},
s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:y,j:k},s17:{h:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u6","u9"],j:{u0:0,u6:1,u9:2},B:!0},s18:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
i:y,j:k},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",i:y,j:k,B:!0},s20:{h:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u10","u11"],j:{u0:0,u10:1},B:!0},s21:{h:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u12"],j:x},s22:{h:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",i:["u13","u14","u15"],j:{u14:0,u13:1,u15:2},B:!0},s23:{h:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",i:["u14","u13","u16"],j:{u14:0,u13:1}},s24:{h:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u13 u14 u16 u20 u17 u18 u19".split(" "),j:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6},B:!0},s25:{h:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",i:"u13 u14 u16 u22 u23 u24 u21".split(" "),
j:{u14:0,u13:1,u21:2}},s26:{h:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",i:["u13","u14"],j:{u14:0,u13:1},B:!0},s27:{h:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",i:["u1","u21","u25"],j:{u1:0,u21:1}},s28:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:g,j:x,precision:"lowp"},s29:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u26"],j:x,precision:"lowp"},s30:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u26"],j:x,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u27"],j:m,B:!0},s32:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u27"],j:m,B:!0},s33:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u7"],j:E},s34:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u7"],j:E,B:!0},
s35:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:x,precision:"lowp",B:!0},s36:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",i:["u7","u1"],j:x,precision:"lowp",
B:!0},s37:{h:"uniform sampler2D u1,u10,u28;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u10,vv0),b=texture2D(u28,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u10","u28"],j:{u1:0,u10:1,u28:2},B:!0}},L={s38:{h:"uniform float u16,u29;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u29*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u16","u13","u14","u21","u29"],Ya:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{h:"uniform float u16,u29,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u29*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u16 u24 u13 u14 u21 u29".split(" "),Ya:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},R=null,I=null,J={Sa:function(){return z},s:function(){if(!z){R=Ha(O,2);I=Ha(L,2);n="highp";for(var u in R)d(C,R[u],u);G.set("s0");C.enableVertexAttribArray(0);z=!0}},ec:function(u){u.forEach(function(q){J.dc(q)})},dc:function(u){R[u.id]=u;d(C,u,u.id)},Gc:function(u,q,B){q||(q=u);R[q]=Object.create(I[u]);R[q].xe=!0;I[u].Ya&&I[u].Ya.forEach(function(N,Q){R[q].h=R[q].h.replace(new RegExp(N,"g"),B[Q])});d(C,R[q],
q)},set:function(u){u=R[u];u.B&&(u.B=!1,d(C,u,u.id));h(u)},xa:function(u){return r(u,p(),"s40")},Rb:function(u){return r(u,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"},"s41")},Zd:function(u){return"undefined"===typeof R[u]?!1:R[u].ca},N:function(){-1!==t&&(t=-1,e.sa.forEach(function(u){0!==u&&C.disableVertexAttribArray(u)}))},Tb:function(){var u=0;e.sa.forEach(function(q,B){B=e.ra[B];C.vertexAttribPointer(q,B,C.FLOAT,!1,e.$b,u);u+=4*B})},Cf:function(){C.enableVertexAttribArray(0)},
Za:function(){J.$a(C)},$a:function(u){u.vertexAttribPointer(e.sa[0],2,u.FLOAT,!1,8,0)},fg:function(u,q){C.uniform1i(e.v[u],q)},L:function(u,q){C.uniform1f(e.v[u],q)},ea:function(u,q,B){C.uniform2f(e.v[u],q,B)},gg:function(u,q){C.uniform2fv(e.v[u],q)},qd:function(u,q){C.uniform3fv(e.v[u],q)},hg:function(u,q,B,N){C.uniform3f(e.v[u],q,B,N)},ig:function(u,q,B,N,Q){C.uniform4f(e.v[u],q,B,N,Q)},Sb:function(u,q){C.uniform4fv(e.v[u],q)},jg:function(u,q){C.uniformMatrix2fv(e.v[u],!1,q)},kg:function(u,q){C.uniformMatrix3fv(e.v[u],
!1,q)},lg:function(u,q){C.uniformMatrix4fv(e.v[u],!1,q)},I:function(u,q){J.set(u);q.forEach(function(B){switch(B.type){case "4f":C.uniform4fv(e.v[B.name],B.value);break;case "3f":C.uniform3fv(e.v[B.name],B.value);break;case "2f":C.uniform2fv(e.v[B.name],B.value);break;case "1f":C.uniform1f(e.v[B.name],B.value);break;case "1i":C.uniform1i(e.v[B.name],B.value);break;case "mat2":C.uniformMatrix2fv(e.v[B.name],!1,B.value);break;case "mat3":C.uniformMatrix3fv(e.v[B.name],!1,B.value);break;case "mat4":C.uniformMatrix4fv(e.v[B.name],
!1,B.value)}})},Mf:function(){return"lowp"},m:function(){C.disableVertexAttribArray(0);J.N();for(var u in R){var q=R[u];q.ca&&(q.ca=!1,C.deleteProgram(q.da));q.xe&&delete R[u]}l.forEach(function(B){C.deleteShader(B)});l.splice(0);v=0;z=!1;e=null;t=-1}};return J}(),C=null,Wa=function(){function a(n){console.log("ERROR in ContextFF: ",n);return!1}function c(n){function g(){Sa.m();Ta.reset();x.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var y=document.createElement("canvas");y.setAttribute("width",5);y.setAttribute("height",5);var x=null;try{x=y.getContext("webgl2",n)}catch(k){return!1}if(!x)return!1;d(x);Ta.pc(x);n=Ta.ob(x);if(!n.V&&!n.W)return g(),!1;n=Sa.kc(x,n);g();return n?!0:!1}function d(n){n.clearColor(0,0,0,0);n.disable(n.DEPTH_TEST);n.disable(n.BLEND);n.disable(n.DITHER);n.disable(n.STENCIL_TEST);n.disable(n.CULL_FACE);n.GENERATE_MIPMAP_HINT&&n.hint(n.GENERATE_MIPMAP_HINT,n.FASTEST);n.disable(n.SAMPLE_ALPHA_TO_COVERAGE);
n.disable(n.SAMPLE_COVERAGE);n.depthFunc(n.LEQUAL);n.clearDepth(1)}var h=null,r=null,p=null,l=null,t=!0,e=null,v=null,z={A:function(){return h.width},J:function(){return h.height},La:function(){return h},Ef:function(){return C},X:function(){return t},flush:function(){C.flush()},ce:function(){e||(e=new Uint8Array(h.width*h.height*4));C.readPixels(0,0,h.width,h.height,C.RGBA,C.UNSIGNED_BYTE,e);return e},Gf:function(){return h.toDataURL("image/jpeg")},Hf:function(){Va.M();r||(r=document.createElement("canvas"),
p=r.getContext("2d"));r.width=h.width;r.height=h.height;for(var n=z.ce(),g=p.createImageData(r.width,r.height),y=r.width,x=r.height,k=g.data,m=0;m<x;++m)for(var E=x-m-1,O=0;O<y;++O){var L=4*(m*y+O),R=4*(E*y+O);k[L]=n[R];k[L+1]=n[R+1];k[L+2]=n[R+2];k[L+3]=n[R+3]}p.putImageData(g,0,0);return r.toDataURL("image/png")},Ff:function(n){!r&&n&&(r=document.createElement("canvas"),p=r.getContext("2d"));var g=n?r:document.createElement("canvas");g.width=h.width;g.height=h.height;(n?p:g.getContext("2d")).drawImage(h,
0,0);return g},s:function(n){n.nc&&!n.mc?h=document.getElementById(n.nc):n.mc&&(h=n.mc);h||(h=document.createElement("canvas"));h.width=n&&void 0!==n.width?n.width:512;h.height=n&&void 0!==n.height?n.height:512;"undefined"===typeof n&&(n={});void 0===n.premultipliedAlpha&&(n.premultipliedAlpha=!1);void 0===n.Ab&&(n.Ab=!0);void 0===n.antialias&&(n.antialias=!1);if(C)t=C instanceof WebGL2RenderingContext;else{t=!0;var g={antialias:n.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:n.premultipliedAlpha,
stencil:!1,depth:n.Ab};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(g.antialias=!1);var y=c(g);!y&&g.antialias&&(g.antialias=!1,y=c(g));y&&(C=h.getContext("webgl2",g));C?t=!0:((C=h.getContext("webgl",g))||(C=h.getContext("experimental-webgl",g)),t=!1)}if(!C)return a("WebGL1 and 2 are not enabled");(l=C.getExtension("WEBGL_lose_context"))&&n.Yc&&(v=n.Yc,h.addEventListener("webglcontextlost",v,!1));if(!Ta.s())return a("Not enough GL capabilities");d(C);G.s();
M.s();return Sa.kc(C,Ta.ae())?!0:a("Cannot filter float textures")},m:function(){C&&(Ta.m(),Sa.m());l&&v&&(h.removeEventListener("webglcontextlost",v,!1),l=v=null);C=e=p=r=h=null}};return z}(),Ra=function(){function a(){null===c&&("undefined"!==typeof G?c=G:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;a();return{af:function(d){c!==d&&(c&&c.N(),c=d)},Sa:function(){return c.Sa()},Za:function(){return c.Za()},$a:function(d){return c.$a(d)},Tb:function(){return c.Tb()},N:function(){return c.N()},
set:function(d){return c.set(d)},xa:function(d){a();return c.xa(d)},Rb:function(d){a();return c.Rb(d)},m:function(){return c.m()}}}(),P=function(){function a(f){C.bindTexture(C.TEXTURE_2D,f)}function c(f){q[0]=f;f=B[0];var K=f>>16&32768,F=f>>12&2047,S=f>>23&255;return 103>S?K:142<S?K|31744|((255==S?0:1)&&f&8388607):113>S?(F|=2048,K|(F>>114-S)+(F>>113-S&1)):K=(K|S-112<<10|F>>1)+(F&1)}function d(f){var K=new Uint16Array(f.length);f.forEach(function(F,S){K[S]=c(F)});return K}function h(){if(null!==N.xb)return N.xb;
var f=p(d([.5,.5,.5,.5]));return null===f?!0:N.xb=f}function r(){if(null!==N.yb)return N.yb;var f=p(new Uint8Array([127,127,127,127]));return null===f?!0:N.yb=f}function p(f){if(!Ra.Sa()||!k)return null;var K=null,F=Math.sqrt(f.length/4);try{var S=C.getError();if("FUCKING_BIG_ERROR"===S)return!1;K=Q.instance({isFloat:!1,G:!0,array:f,width:F});S=C.getError();if(S!==C.NO_ERROR)return!1}catch(X){return!1}Va.M();C.viewport(0,0,F,F);C.clearColor(0,0,0,0);C.clear(C.COLOR_BUFFER_BIT);Ra.set("s0");K.ic(0);
M.l(!0,!0);f=4*F*F;S=new Uint8Array(f);C.readPixels(0,0,F,F,C.RGBA,C.UNSIGNED_BYTE,S);F=!0;for(var Z=0;Z<f;++Z)F=F&&3>Math.abs(S[Z]-127);K.remove();Va.U();return F}var l=0,t=null,e=0,v=null,z=null,n=null,g=null,y=null,x=null,k=!1,m=[],E={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,F:null,Dc:null,we:!1,G:!1,ba:null,Ua:4,Gb:0},O=!1,L=null,R=null,I=[[1,0,0,0],[0,1,
0,0],[0,0,1,0],[0,0,0,1]],J=!1,u=!1,q=new Float32Array(1),B=new Int32Array(q.buffer),N={xb:null,yb:null},Q={s:function(){k||(y=[C.RGBA,null,C.RGBA,C.RGBA],x=[C.RGBA,null,C.RGBA,C.RGBA],t=[C.TEXTURE0,C.TEXTURE1,C.TEXTURE2,C.TEXTURE3,C.TEXTURE4,C.TEXTURE5,C.TEXTURE6,C.TEXTURE7],J="undefined"!==typeof JEContext,u="undefined"!==typeof Ta,J&&JEContext.$f()&&t.push(C.TEXTURE8,C.TEXTURE9),v=[-1,-1,-1,-1,-1,-1,-1,-1],g=[C.UNSIGNED_BYTE,C.FLOAT,C.FLOAT],k=!0)},qe:function(){if(!z){for(var f=new Float32Array(16384),
K=0;16384>K;++K)f[K]=2*Math.random()-1;z={random:Q.instance({isFloat:!0,isPot:!0,array:f,width:64}),vd:Q.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}Q.lf()},Sf:function(){return z.vd},lf:function(){g[1]=Ta.sb(C)},Ze:function(){x=y=[C.RGBA,C.RGBA,C.RGBA,C.RGBA]},hd:function(f){G.set("s1");Va.M();var K=f.A(),F=f.J();C.viewport(0,0,K,F);f.g(0);M.l(!1,!1)},Qe:function(f,K){Q.hd(f);C.readPixels(0,0,f.A(),f.J(),C.RGBA,C.UNSIGNED_BYTE,K)},Re:function(f,K){Q.hd(f);return Ta.Qb(0,
0,f.A(),f.J(),K)},wc:function(f,K,F,S,Z,X,w){f.activeTexture(f.TEXTURE0);var da=f.createTexture();f.bindTexture(f.TEXTURE_2D,da);Z=Z instanceof Float32Array?Z:new Float32Array(Z);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,X);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,
F,S,0,f.RGBA,f.FLOAT,Z);f.bindTexture(f.TEXTURE_2D,null);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);w&&(Va.U(),G.xa(f));f.viewport(0,0,F,S);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,K,0);f.bindTexture(f.TEXTURE_2D,da);w?M.l(!0,!0):M.Ja(f);f.deleteTexture(da);k&&(v[0]=-1,n=null,l=0)},jb:function(f){f!==l&&(C.activeTexture(t[f]),l=f)},instance:function(f){function K(D){var T=C.getError();if("FUCKING_BIG_ERROR"===T)return!1;C.texImage2D(C.TEXTURE_2D,0,ia,ha,ja,D);T=C.getError();
T!==C.NO_ERROR&&ha!==C.RGBA&&(ha=C.RGBA,C.texImage2D(C.TEXTURE_2D,0,ia,ha,ja,D));return!0}function F(){if(!Za){a(la);pa&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,pa);w.isPot?(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,w.isMirrorX?C.MIRRORED_REPEAT:C.REPEAT),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,w.isMirrorY?C.MIRRORED_REPEAT:C.REPEAT)):(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE));w.isAnisotropicFiltering&&"undefined"!==
typeof JESETTINGS&&C.texParameterf(C.TEXTURE_2D,JEContext.Jf().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.rf);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,w.isLinear?C.LINEAR:C.NEAREST);w.isLinear?C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,w.isMipmap&&!ya?C.NEAREST_MIPMAP_LINEAR:C.LINEAR):C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,w.isMipmap&&!ya?C.NEAREST_MIPMAP_NEAREST:C.NEAREST);ha=y[w.Ua-1];ia=x[w.Ua-1];ja=g[A];if(Ta.X()){var D=Ta.de();ha===C.RGBA&&ja===C.FLOAT?w.isMipmap||w.isLinear?
ia=Sa.fe(C):Ta.lc()?D&&(ia=D):ia=C.RGBA16F||C.RGBA:ha===C.RGB&&ja===C.FLOAT&&D&&(ia=D,ha=C.RGBA)}if(w.G&&!w.isFloat||w.isFloat&&w.isMipmap&&Sa.Ae())ia=Ta.ee(),ja=Ta.sb(C);w.Gb&&(Ka=w.Gb);w.isSrgb&&4===w.Ua&&(ha=JEContext.Qf());if(w.F)K(w.F);else if(w.url)K(xa);else if(qa){D=qa;try{"FUCKING_BIG_ERROR"!==C.getError()&&(C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,D),C.getError()!==C.NO_ERROR&&(C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,null),C.getError()!==C.NO_ERROR&&C.texImage2D(C.TEXTURE_2D,0,C.RGBA,
U,W,0,C.RGBA,C.UNSIGNED_BYTE,null)))}catch(Ib){C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,null)}w.isKeepArray||(qa=null)}else D=C.getError(),"FUCKING_BIG_ERROR"!==D&&(C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,null),D=C.getError(),D!==C.NO_ERROR&&(ha=C.RGBA,w.G&&ja!==C.FLOAT&&(ja=C.FLOAT,C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,null))));if(w.isMipmap)if(!ya&&fa)fa.rb(),La=!0;else if(ya){D=Math.log2(Math.min(U,W));Aa=Array(1+D);Aa[0]=la;for(var T=1;T<=D;++T){var ka=Math.pow(2,T),aa=U/ka;ka=W/ka;
var za=C.createTexture();a(za);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST);C.texImage2D(C.TEXTURE_2D,0,ia,aa,ka,0,ha,ja,null);a(null);Aa[T]=za}La=!0}a(null);v[l]=-1;pa&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1);Da=!0;w.ba&&fa&&(w.ba(fa),w.ba=null)}}function S(){for(var D=U*W,T=2*D,ka=3*D,aa=0;aa<D;++aa)na[0][aa]=Ea[aa],na[1][aa]=Ea[aa+D],na[2][aa]=Ea[aa+T],na[3][aa]=Ea[aa+ka]}function Z(){var D=U*W*4;ua=[new Uint8Array(D),
new Uint8Array(D),new Uint8Array(D),new Uint8Array(D)];na=[new Float32Array(ua[0].buffer),new Float32Array(ua[1].buffer),new Float32Array(ua[2].buffer),new Float32Array(ua[3].buffer)];Ma=new Uint8Array(4*D);Ea=new Float32Array(Ma.buffer);Fa=!0}function X(){va.lb=new Uint8Array(U*W*4);va.yc=new Float32Array(va.buffer);va.Cb=!0}var w=Object.assign({},E,f),da=e++;null===w.isFlipY&&(w.isFlipY=w.url||w.array?!0:!1);w.data&&(w.array="string"===typeof w.data?Qa(w.data):w.isFloat?new Float32Array(w.data):
new Uint8Array(w.data),w.isFlipY=!1);var A=0,H=w.F?!0:!1,ba=null,Y=null,ra=!1,Ua=null;w.G=w.G||w.isFloat;w.G&&(A=1);!w.we&&w.isFloat&&u&&!Ta.lc()&&(w.isFloat=!1);w.isFloat&&(A=2);w.isAnisotropicFiltering&&J&&!JEContext.Vf()&&(w.isAnisotropicFiltering=!1);var la=w.Dc||C.createTexture(),xa=null,qa=!1,U=0,W=0,Da=!1,Za=!1,Fa=!1,na=null,ua=null,Ma=null,Ea=null,ia=null,ha=null,ja=null,pa=w.isFlipY,rb=(f=w.G&&w.isMipmap)&&Sa.Id(),ya=f&&rb?!0:!1,Aa=null,Ka=-1,La=!1,va={Cb:!1,lb:null,yc:null};w.width&&(U=
w.width,W=w.height?w.height:U);var fa={get:function(){return la},A:function(){return U},J:function(){return W},Tf:function(){return w.url},Wf:function(){return w.isFloat},Yf:function(){return w.G},Zf:function(){return w.isLinear},rb:function(){C.generateMipmap(C.TEXTURE_2D)},Gd:function(D,T){ya?(D||(D=fa.Bc()),Q.jb(T),a(Aa[D]),v[T]=-1):fa.g(T)},Bc:function(){-1===Ka&&(Ka=Math.log(U)/Math.log(2));return Ka},$d:function(D){if(ya){D||(D=fa.Bc());G.set("s11");Q.jb(0);for(var T=U,ka=W,aa=1;aa<=D;++aa)T/=
2,ka/=2,G.ea("u7",.25/T,.25/ka),C.viewport(0,0,T,ka),a(Aa[aa-1]),C.framebufferTexture2D(Va.Na(),C.COLOR_ATTACHMENT0,C.TEXTURE_2D,Aa[aa],0),M.l(!1,1===aa);v[0]=-1}else fa.rb()},g:function(D){if(!Da)return!1;Q.jb(D);if(v[D]===da)return!1;a(la);v[D]=da;return!0},ic:function(D){C.activeTexture(t[D]);l=D;a(la);v[D]=da},u:function(){n=fa;C.framebufferTexture2D(Va.Na(),C.COLOR_ATTACHMENT0,C.TEXTURE_2D,la,0)},P:function(){n=fa;C.viewport(0,0,U,W);C.framebufferTexture2D(Va.Na(),C.COLOR_ATTACHMENT0,C.TEXTURE_2D,
la,0)},Zb:Q.Zb,resize:function(D,T){U=D;W=T;F()},clone:function(D){D=Q.instance({width:U,height:W,G:w.G,isFloat:w.isFloat,isLinear:w.isLinear,isMirrorY:w.isMirrorY,isFlipY:D?!pa:pa,isPot:w.isPot});Ra.set("s0");Va.U();D.u();C.viewport(0,0,U,W);fa.g(0);M.l(!0,!0);return D},bf:function(){C.viewport(0,0,U,W)},remove:function(){C.deleteTexture(la);Za=!0;m.splice(m.indexOf(fa),1);fa=null},refresh:function(){fa.ic(0);pa&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!0);H?C.texImage2D(C.TEXTURE_2D,0,ia,ha,C.UNSIGNED_BYTE,
w.F):C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,qa);pa&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1)},Pb:function(){Fa||Z();C.readPixels(0,0,U,4*W,C.RGBA,C.UNSIGNED_BYTE,Ma);S();return na},Ne:function(){Fa||Z();return Ta.Qb(0,0,U,4*W,Ma).then(function(){S();return na})},Pe:function(){va.Cb||X();C.readPixels(0,0,U,W,C.RGBA,C.UNSIGNED_BYTE,va.lb);return va.yc},Oe:function(){va.Cb||X();return Ta.Qb(0,0,U,W,va.lb)},pb:function(D){Va.M();G.set("s12");fa.g(0);if(D)C.viewport(0,0,U,W),G.Sb("u8",.25,.25,.25,.25),
M.l(!1,!0);else for(D=0;4>D;++D)C.viewport(0,W*D,U,W),G.Sb("u8",I[D]),M.l(!1,0===D)},pg:function(D){var T=ja===g[0]&&!r();a(la);pa&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!0);T?(ra||(ba=document.createElement("canvas"),ba.width=U,ba.height=W,Y=ba.getContext("2d"),Ua=Y.createImageData(U,W),ra=!0),Ua.data.set(D),Y.putImageData(Ua,0,0),C.texImage2D(C.TEXTURE_2D,0,ia,ha,ja,ba)):C.texImage2D(C.TEXTURE_2D,0,ia,U,W,0,ha,ja,D);v[l]=da;pa&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1)},qg:function(D,T){a(la);T&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,
!0);C.texImage2D(C.TEXTURE_2D,0,ia,ha,ja,D);v[l]=da;T&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1)},cg:function(D,T){var ka=U*W,aa=4*ka;D=w.G?D?"RGBE":"JSON":"RGBA";T&&(D=T);T=Ta.X()&&!1;var za=null;switch(D){case "RGBE":za="s42";break;case "JSON":za=T?"s0":"s12";break;case "RGBA":case "RGBAARRAY":za="s6"}Fa||("RGBA"===D||"RGBE"===D||"RGBAARRAY"===D?(ua=new Uint8Array(aa),Fa=!0):"JSON"!==D||T||Z());Va.M();G.set(za);fa.g(0);aa=null;if("RGBA"===D||"RGBE"===D||"RGBAARRAY"===D){C.viewport(0,0,U,W);M.l(!0,
!0);C.readPixels(0,0,U,W,C.RGBA,C.UNSIGNED_BYTE,ua);if("RGBAARRAY"===D)return{data:ua};O||(L=document.createElement("canvas"),R=L.getContext("2d"),O=!0);L.width=U;L.height=W;ka=R.createImageData(U,W);ka.data.set(ua);R.putImageData(ka,0,0);aa=L.toDataURL("image/png")}else if("JSON"===D)if(T)aa=new Float32Array(ka),C.viewport(0,0,U,W),M.l(!0,!0),C.readPixels(0,0,U,W,C.RGBA,C.FLOAT,aa);else{for(aa=0;4>aa;++aa)C.viewport(0,W*aa,U,W),G.Sb("u8",I[aa]),M.l(!aa,!aa);fa.Pb();aa=Array(ka);for(T=0;T<ka;++T)aa[4*
T]=na[0][T],aa[4*T+1]=na[1][T],aa[4*T+2]=na[2][T],aa[4*T+3]=na[3][T]}return{format:D,data:aa,width:U,height:W,isMirrorY:w.isMirrorY,isFlipY:"RGBA"===D?w.isFlipY:!w.isFlipY}}};w.isMipmap&&!ya&&Da&&!La&&(fa.rb(),La=!0);if(w.url)a(la),C.texImage2D(C.TEXTURE_2D,0,C.RGBA,1,1,0,C.RGBA,C.UNSIGNED_BYTE,null),xa=new Image,xa.zf="Anonymous",xa.crossOrigin="Anonymous",xa.src=w.url,xa.onload=function(){U=xa.width;W=xa.height;F()};else if(w.F){var $a=function(){U=void 0!==w.F.videoWidth?w.F.videoWidth:w.F.width;
W=void 0!==w.F.videoHeight?w.F.videoHeight:w.F.height;U?F():setTimeout($a,1)};$a()}else w.array?(w.G&&!w.isFloat?w.array instanceof Uint16Array?(qa=w.array,F()):h()?(qa=d(w.array),F()):(F(),Q.wc(C,la,fa.A(),fa.J(),w.array,pa,!0)):(qa=w.isFloat?w.array instanceof Float32Array?w.array:new Float32Array(w.array):w.array instanceof Uint8Array?w.array:new Uint8Array(w.array),F()),w.isKeepArray||(qa&&qa!==w.array&&(qa=null),delete w.array)):w.Dc?Da=!0:F();fa.Pf=fa.A;w.ba&&Da&&(w.ba(fa),w.ba=null);m.push(fa);
return fa},M:function(f){f!==l&&(C.activeTexture(t[f]),l=f);v[f]=-1;a(null)},uf:function(f){z.random.g(f)},Zb:function(){n=null;C.framebufferTexture2D(Va.Na(),C.COLOR_ATTACHMENT0,C.TEXTURE_2D,null,0)},reset:function(){0!==l&&C.activeTexture(t[0]);for(var f=0;f<t.length;++f)v[f]=-1;l=-1},bg:function(){l=-1},hf:function(){for(var f=0;f<t.length;++f)Q.M(f)},zc:function(){z&&(z.random.remove(),z.vd.remove())},ng:function(f,K){if("RGBA"===f.format||"RGBE"===f.format){var F=new Image;F.src=f.data;F.onload=
function(){Q.instance({isMirrorY:f.isMirrorY,isFlipY:f.isFlipY,isFloat:!1,F:F,ba:function(S){if("RGBA"===f.format)K(S);else{var Z=f.width,X=f.height,w=Q.instance({isMirrorY:f.isMirrorY,isFloat:!0,width:Z,height:X,isFlipY:f.isFlipY});Va.U();C.viewport(0,0,Z,X);G.set("s43");w.u();S.g(0);M.l(!0,!0);Q.M(0);K(w);C.flush();setTimeout(S.remove,50)}}})}}else"JSON"===f.format?K(Q.instance({isFloat:!0,isFlipY:f.isFlipY,width:f.width,height:f.height,array:new Float32Array(f.data)})):K(!1)},Nd:d,m:function(){n&&
(Va.U(),Q.Zb(),Va.M());Q.hf();m.slice(0).forEach(function(f){f.remove()});m.splice(0);k=!1;e=0;"undefined"!==typeof Sa&&Sa.m();z=null}};return Q}(),Xa={instance:function(a){var c=[P.instance(a),P.instance(a)],d=[c[1],c[0]],h=d,r={pd:function(p){h[1].u();h[0].g(p);r.td()},dg:function(p){h[1].P();h[0].g(p);r.td()},td:function(){h=h===c?d:c},refresh:function(){h[0].refresh();h[1].refresh()},g:function(p){h[0].g(p)},tf:function(p){h[1].g(p)},ie:function(){return h[0]},Nf:function(){return h[1]},remove:function(){h[0].remove();
h[1].remove();h=null}};return r}},M=function(){function a(e){var v={T:null,D:null};v.T=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,v.T);e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),e.STATIC_DRAW);v.D=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,v.D);e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),e.STATIC_DRAW);return v}var c=null,d=0,h=!1,r=[],p=-2,l=-2,t={reset:function(){l=p=-2},s:function(){h||(c=a(C),t.kb(),h=!0)},instance:function(e){var v=d++,z=e.D?
e.D.length:0,n="undefined"===typeof e.mode?C.STATIC_DRAW:e.mode,g=C.createBuffer();C.bindBuffer(C.ARRAY_BUFFER,g);C.bufferData(C.ARRAY_BUFFER,e.T instanceof Float32Array?e.T:new Float32Array(e.T),n);p=v;var y=null,x=null,k=null;if(e.D){y=C.createBuffer();C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,y);var m=null;65536>e.D.length?(m=Uint16Array,x=C.UNSIGNED_SHORT,k=2):(m=Uint32Array,x=C.UNSIGNED_INT,k=4);m=e.D instanceof m?e.D:new m(e.D);C.bufferData(C.ELEMENT_ARRAY_BUFFER,m,n);l=v}var E={Hd:function(O){p!==
v&&(C.bindBuffer(C.ARRAY_BUFFER,g),p=v);O&&Ra.Tb()},Ed:function(){l!==v&&(C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,y),l=v)},bind:function(O){E.Hd(O);E.Ed()},Af:function(){C.drawElements(C.TRIANGLES,z,x,0)},Bf:function(O,L){C.drawElements(C.TRIANGLES,O,x,L*k)},remove:function(){C.deleteBuffer(g);e.D&&C.deleteBuffer(y);E=null}};r.push(E);return E},kb:function(){-1!==p&&(C.bindBuffer(C.ARRAY_BUFFER,c.T),p=-1);-1!==l&&(C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,c.D),l=-1)},l:function(e,v){e&&M.kb();v&&Ra.Za();C.drawElements(C.TRIANGLES,
3,C.UNSIGNED_SHORT,0)},Ja:function(e){e=e||C;var v=a(e);e.bindBuffer(e.ARRAY_BUFFER,v.T);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,v.D);Ra.$a(e);e.clear(e.COLOR_BUFFER_BIT);e.drawElements(e.TRIANGLES,3,e.UNSIGNED_SHORT,0);e.flush();e.bindBuffer(e.ARRAY_BUFFER,null);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);e.deleteBuffer(v.T);e.deleteBuffer(v.D);t.reset();h&&(t.kb(),Ra.Za())},zc:function(){var e=C,v=c;e.deleteBuffer(v.T);e.deleteBuffer(v.D)},m:function(){t.zc();r.forEach(function(e){e.remove()});C.bindBuffer(C.ARRAY_BUFFER,
null);C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,null);t.reset();h=!1;r.splice(0);d=0}};return t}(),Va=function(){var a=null,c=null,d=null,h=!1,r=[],p={C:-2,vc:1},l={Sa:function(){return h},s:function(){if(!h){a=C.createFramebuffer();var t=Ta.X();c=t&&C.DRAW_FRAMEBUFFER?C.DRAW_FRAMEBUFFER:C.FRAMEBUFFER;d=t&&C.READ_FRAMEBUFFER?C.READ_FRAMEBUFFER:C.FRAMEBUFFER;h=!0}},Kf:function(){return c},ge:function(){return d},Na:function(){return C.FRAMEBUFFER},Of:function(){return p},Df:function(){return a},instance:function(t){void 0===
t.Kc&&(t.Kc=!1);var e=t.oa?t.oa:null,v=t.width,z=void 0!==t.height?t.height:t.width,n=a,g=null,y=!1,x=!1,k=0;e&&(v=v?v:e.A(),z=z?z:e.J());var m={od:function(){y||(n=C.createFramebuffer(),y=!0,k=p.vc++)},zd:function(){m.od();m.u();g=C.createRenderbuffer();C.bindRenderbuffer(C.RENDERBUFFER,g);C.renderbufferStorage(C.RENDERBUFFER,C.DEPTH_COMPONENT16,v,z);C.framebufferRenderbuffer(c,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,g);C.clearDepth(1)},bind:function(E,O){k!==p.C&&(C.bindFramebuffer(c,n),p.C=k);e&&e.u();
O&&C.viewport(0,0,v,z);E&&C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT)},sf:function(){k!==p.C&&(C.bindFramebuffer(c,n),p.C=k)},clear:function(){C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT)},xf:function(){C.clear(C.COLOR_BUFFER_BIT)},yf:function(){C.clear(C.DEPTH_BUFFER_BIT)},bf:function(){C.viewport(0,0,v,z)},u:function(){k!==p.C&&(C.bindFramebuffer(c,n),p.C=k)},rtt:function(E){e=E;p.C!==k&&(C.bindFramebuffer(C.FRAMEBUFFER,n),p.C=k);E.u()},M:function(){C.bindFramebuffer(c,null);p.C=-1},resize:function(E,
O){v=E;z=O;g&&(C.bindRenderbuffer(C.RENDERBUFFER,g),C.renderbufferStorage(C.RENDERBUFFER,C.DEPTH_COMPONENT16,v,z))},remove:function(){n===a||x||(C.bindFramebuffer(c,n),C.framebufferTexture2D(c,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,null,0),g&&C.framebufferRenderbuffer(c,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,null),C.bindFramebuffer(c,null),C.deleteFramebuffer(n),g&&C.deleteRenderbuffer(g));x=!0}};t.Kc&&m.zd();r.push(m);return m},M:function(){C.bindFramebuffer(c,null);p.C=-1},jf:function(){C.bindFramebuffer(c,
null);C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT);C.viewport(0,0,Ta.A(),Ta.J());p.C=-1},reset:function(){p.C=-2},U:function(){0!==p.C&&(C.bindFramebuffer(c,a),p.C=0)},clear:function(){C.viewport(0,0,Ta.A(),Ta.J());C.clear(C.COLOR_BUFFER_BIT)},m:function(){l.M();r.forEach(function(t){t.remove()});null!==a&&(C.deleteFramebuffer(a),a=null);l.reset();h=!1;r.splice(0);p.vc=1}};return l}(),Ta=function(){function a(){h="undefined"===typeof Wa?JEContext:Wa;r=!0}function c(k,m){for(var E=0;E<k.length;++E){var O=
m.getExtension(k[E]);if(O)return O}return null}function d(){null!==g.cb&&(clearInterval(g.cb),g.cb=null);g.ta=!1}var h=null,r=!1,p={Lc:!1,Vb:null,Wb:null,Oc:!1,ze:!1,Xb:null,Pc:!1,Yb:null,Mc:!1,mb:null,te:!1,nb:null,ue:!1},l=null,t={V:!0,W:!0,qb:!0,gd:!1},e=null,v=!0,z=null,n=null,g={ta:!1,ja:null,Oa:null,vb:-1,ka:null,cb:null},y="undefined"===typeof window?{}:window,x={s:function(){if(r)return!0;x.reset();r||a();var k=C;if(!l.Lc){l.Vb=x.sc(k);y.GL_EXT_FLOAT=l.Vb;l.Oc=l.Vb?!0:!1;if(l.Oc||x.X())l.Wb=
x.tc(k),l.ze=l.Wb?!0:!1,y.GL_EXT_FLOATLINEAR=l.Wb;l.Lc=!0}if(!l.Mc){l.Xb=x.Ia(k);l.Xb&&(l.Pc=!0,y.GL_EXT_HALFFLOAT=l.Xb);if(l.Pc||x.X())l.Yb=x.uc(k),y.GL_EXT_HALFFLOATLINEAR=l.Yb;l.Uf=l.Yb?!0:!1;l.Mc=!0}l.mb=x.qc(k);l.te=l.mb?!0:!1;y.GL_EXT_COLORBUFFERFLOAT=l.mb;l.nb=x.rc(k);l.ue=l.nb?!0:!1;y.GL_EXT_COLORBUFFERHALFFLOAT=l.nb;Va.s();P.s();if(!x.Sd())return!1;M.s();P.qe();return!0},reset:function(){l=Object.assign({},p);e=Object.assign({},t)},A:function(){r||a();return h.A()},J:function(){r||a();return h.J()},
X:function(){r||a();return h.X()},pc:function(k){x.qc(k);x.rc(k);x.sc(k);x.tc(k);x.Ia(k);x.uc(k)},qc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),rc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),sc:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),tc:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),
Ia:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),uc:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),sb:function(k){var m=x.Ia(k);return m&&m.HALF_FLOAT_OES?m.HALF_FLOAT_OES:k.HALF_FLOAT||k.FLOAT},de:function(){return n||C.RGBA32F||C.RGBA},ee:function(){return z||C.RGBA16F||C.RGBA},ae:function(){return e},lc:function(){return e.V},wf:function(){return e.W},vf:function(){return e.qb},
Jd:function(){return e.gd&&v},ud:function(k){v=k;!k&&g.ta&&(C.deleteSync(g.Oa),C.bindBuffer(g.ka,null),g.ta=!1)},bb:function(k,m,E){function O(){k.bindTexture(k.TEXTURE_2D,null);k.bindFramebuffer(L,null);k.deleteTexture(J);k.deleteFramebuffer(I)}var L=k.FRAMEBUFFER,R=k.NEAREST,I=k.createFramebuffer();k.bindFramebuffer(L,I);var J=k.createTexture();k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,J);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);
k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,R);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,R);k.texImage2D(k.TEXTURE_2D,0,m,3,3,0,k.RGBA,E,null);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,J,0);if(k.checkFramebufferStatus(k.READ_FRAMEBUFFER||k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)return O(),!1;Ra.Rb(k);k.clearColor(0,0,0,0);k.viewport(0,0,3,3);k.disable(k.DEPTH_TEST);k.clear(k.COLOR_BUFFER_BIT);M.Ja(k);
k.bindFramebuffer(L,null);Ra.xa(k);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,J);M.Ja(k);m=new Uint8Array(36);k.readPixels(0,0,3,3,k.RGBA,k.UNSIGNED_BYTE,m);O();for(E=0;36>E;++E)if(3!==E%4&&3<Math.abs(m[E]-127))return!1;return!0},ob:function(k){var m={V:!1,W:!1};k.disable(k.BLEND);k.clearColor(0,0,0,0);k.clear(k.COLOR_BUFFER_BIT);k.RGBA32F&&x.bb(k,k.RGBA32F,k.FLOAT)&&(m.V=!0,n=k.RGBA32F);!m.V&&x.bb(k,k.RGBA,k.FLOAT)&&(m.V=!0,n=k.RGBA);var E=x.sb(k);z=null;k.RGBA16F&&x.bb(k,k.RGBA16F,E)&&
(m.W=!0,z=k.RGBA16F);!m.W&&x.bb(k,k.RGBA,E)&&(m.W=!0,z=k.RGBA);return m},Td:function(){var k=Va.instance({width:2});k.od();var m=P.instance({width:2,isFloat:!0,Ua:3});k.u();m.u();C.flush();C.checkFramebufferStatus(Va.ge())!==C.FRAMEBUFFER_COMPLETE?(P.Ze(),e.qb=!1):e.qb=!0;k.remove();m.remove()},Ud:function(){var k=!1;x.X()&&(k="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(m){return"undefined"!==typeof C[m]}));e.gd=
k},Sd:function(){var k=x.ob(C);Object.assign(e,k);if(!e.V&&!e.W)return!1;x.Td();x.Ud();return!0},Qb:function(k,m,E,O,L){if(!x.Jd())return C.readPixels(k,m,E,O,C.RGBA,C.UNSIGNED_BYTE,L),Promise.resolve(L);null===g.ja&&(g.ka=C.PIXEL_PACK_BUFFER,g.ja=C.createBuffer(),g.vb=-1);C.bindBuffer(g.ka,g.ja);L.byteLength!==g.vb&&(C.bufferData(g.ka,L.byteLength,C.STREAM_READ),g.vb=L.byteLength);C.readPixels(k,m,E,O,C.RGBA,C.UNSIGNED_BYTE,0);g.Oa=C.fenceSync(C.SYNC_GPU_COMMANDS_COMPLETE,0);C.flush();return new Promise(function(R,
I){function J(){if(!g.ta)return d(),I(),!1;switch(C.clientWaitSync(g.Oa,0,0)){case C.TIMEOUT_EXPIRED:return!1;case C.WAIT_FAILED:return d(),I(),!1;default:return d(),C.deleteSync(g.Oa),C.getBufferSubData(g.ka,0,L),C.bindBuffer(g.ka,null),R(L),!0}}d();g.ta=!0;J()||(g.cb=setInterval(J,0))})},m:function(){d();P.m();Ra.m();Va.m();M.m();null!==g.ja&&(C.deleteBuffer(g.ja),g.ja=null);r=!1}};return x}(),Sa=function(){function a(I,J,u,q){m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,q?m.NEAREST_MIPMAP_NEAREST:
m.LINEAR);var B=null;if(null!==u)try{B=m.getError();if("FUCKING_BIG_ERROR"===B)return!1;m.texImage2D(m.TEXTURE_2D,0,I,4,4,0,m.RGBA,J,u);B=m.getError();if(B!==m.NO_ERROR)return!1}catch(N){return!1}q&&m.generateMipmap(m.TEXTURE_2D);m.clear(m.COLOR_BUFFER_BIT);M.Ja(m);B=m.getError();if("FUCKING_BIG_ERROR"===B)return!1;m.readPixels(0,0,2,2,m.RGBA,m.UNSIGNED_BYTE,z);B=m.getError();B===m.INVALID_OPERATION&&"undefined"!==typeof m.PIXEL_PACK_BUFFER&&(m.bindBuffer(m.PIXEL_PACK_BUFFER,null),m.readPixels(0,
0,2,2,m.RGBA,m.UNSIGNED_BYTE,z),B=m.getError());if(B!==m.NO_ERROR)return!1;u=!0;for(q=0;16>q;++q)u=u&&4>Math.abs(z[q]-127);u&&(e.$c=J,e.Jc=I);return u}function c(I,J){return E.V&&a(I,m.FLOAT,new Float32Array(n),J)?(t=l.bc,!0):!1}function d(I,J,u){if(!E.W)return!1;var q=P.Nd(n),B=Ta.Ia(m);if(B&&B.HALF_FLOAT_OES&&a(I,B.HALF_FLOAT_OES,q,J)||m.HALF_FLOAT&&a(I,m.HALF_FLOAT,q,J))return t=l.pa,!0;q=new Float32Array(n);if(a(I,m.FLOAT,q,J))return t=l.pa,!0;m.bindTexture(m.TEXTURE_2D,u);m.texImage2D(m.TEXTURE_2D,
0,m.RGBA,2,2,0,m.RGBA,m.UNSIGNED_BYTE,null);m.bindFramebuffer(e.Ga,R);P.wc(m,u,2,2,q,!1,!1);m.bindFramebuffer(e.Ga,null);m.bindTexture(m.TEXTURE_2D,u);return a(I,null,null,J)?(t=l.pa,!0):!1}function h(I,J,u){v=!0;if(d(I,!0,u)||c(J,!0))return!0;v=!1;return d(I,!1,u)||c(J,!1)?!0:!1}function r(I){if(t===l.N){m=I||C;t=l.RGBA8;v=!0;Ta.pc(m);E||(E=Ta.ob(m));Va.reset();R=m.createFramebuffer();e.Ga=m.DRAW_FRAMEBUFFER||m.FRAMEBUFFER;m.bindFramebuffer(e.Ga,null);m.clearColor(0,0,0,0);m.viewport(0,0,2,2);G.N();
O=G.xa(m);I=m.createTexture();m.activeTexture(m.TEXTURE0);m.bindTexture(m.TEXTURE_2D,I);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);L=I;var J=I=m.RGBA,u=m.RGBA16F,q=m.RGBA32F;q&&(I=q);u&&(J=u);if((u||q)&&h(J,I,L))return p(),!0;I=J=m.RGBA;if(h(J,I,L))return p(),!0;t=l.RGBA8;p();return!1}}function p(){m.deleteProgram(O.da);m.deleteTexture(L);L=O=null}for(var l={N:-1,bc:3,
pa:2,RGBA8:0},t=l.N,e={$c:null,Jc:null,Ga:null},v=!0,z=new Uint8Array(16),n=Array(64),g=0;4>g;++g)for(var y=0;4>y;++y){var x=0===(y+g)%2?1:0,k=4*g+y;n[4*k]=x;n[4*k+1]=x;n[4*k+2]=x;n[4*k+3]=x}var m=null,E=null,O=null,L=null,R=null;return{Id:function(I){r(I);return v},kc:function(I,J){t===l.N&&(typeof("undefined"!==J)&&(E=J),r(I));return t!==l.RGBA8},Xf:function(I){r(I);return t===l.bc},Ae:function(I){r(I);return t===l.pa},Lf:function(I){r(I);return e.$c},fe:function(I){r(I);return e.Jc},m:function(){m=
null;v=!0;t=l.N;E=null}}}(),Ya={instance:function(a){var c=P.instance(a.alpha),d=P.instance(a.beta);return{Wd:function(){c.g(1);d.g(2)}}}},cb={instance:function(a){var c=null,d=!1,h=!1,r=null,p=!1,l=!1,t=null,e="undefined"===typeof a.preprocessing?!1:a.preprocessing,v="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,b&&void 0!==b.Dd&&(a.mask=b.Dd+a.mask),c=P.instance({isFloat:!1,url:a.mask}));var z=!1;a.customInputShader&&(z="s44",G.dc({name:"_",id:z,h:a.customInputShader,
mg:["uSource"],precision:"lowp"}),G.I(z,[{type:"1i",name:"_",value:0}]));switch(e){case "sobel":t="s31";p=!0;break;case "meanNormalization":t="s32";p=!0;break;case "grayScale":t="s28";p=!1;break;case "grayScaleTilt":t="s29";l=!0;p=!1;break;case "rgbGrayTilt":t="s30";l=!0;p=!1;break;case "copy":t=z?z:"s0";break;case "inputLightRegulation":t=z?z:"s28";r=ab.instance({Ic:v,Zc:a.size,Vc:a.nBlurPass,Ra:!1});h=!0;break;case "inputMix0":t="none";r=bb.instance({ga:v,xd:a.varianceMin,jc:a.blurKernelSizePx,
Ra:!1});h=!0;break;case "direct":case "none":t="abort";break;default:t="s3"}l&&G.I(t,[{name:"u26",type:"1f",value:a.tilt}]);d&&(t+="Mask");var n=P.instance({isFloat:!1,isPot:!1,width:a.size}),g={A:function(){return v},tb:function(){return g.A()},me:function(){return h?r.ub():n},K:function(y){Va.U();"abort"!==t&&("none"!==t&&(G.set(t),p&&G.L("u27",1/a.size),n.P(),d&&c.g(1),M.l(!1,!1),n.g(0),y=n),h&&r.process(y))},m:function(){n.remove();d&&c.remove()}};return g}},jb={instance:function(a){function c(f){r.forEach(function(K,
F){p[F][0]=f[0][K];p[F][1]=f[1][K];p[F][2]=f[2][K];p[F][3]=f[3][K]});return p}"undefined"===typeof a.normalize&&(a.normalize=!1);var d={input:null,Ea:null,zb:null,S:null,Va:null,Mb:null,Nb:null},h=null,r=[],p=[],l=!1,t=null,e=!0,v=-1,z=a.isReorganize?a.isReorganize:!1,n=a.kernelsCount?!0:!1,g=a.dynPelu?Ya.instance(a.dynPelu):!1,y=g?!0:!1,x={isEnabled:!1};a.ye?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Xa.tb(),e=!1):"full"===a.connectivityUp&&(a.sparsity=a.Xa.tb());var k={elu:"s15",elu01:"s16",
relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[a.activation],m=a.sparsity*a.sparsity,E=!1,O=a.size,L="";if(a.maxPooling){switch(a.maxPooling.size){case 2:L="s33";break;case 4:L="s34"}E=!0;O/=a.maxPooling.size;d.Mb=P.instance({isFloat:!0,isPot:!1,width:O})}var R=void 0!==a.Fe&&a.Fe?!0:!1,I=null,J=null,u=null;if(R){I="s45"+a.index.toString();G.Gc("s45",I,[((a.normalization.n-1)/2).toFixed(1)]);G.I(I,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/a.size,1/
a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u30",value:a.normalization.k}]);var q={isFloat:!0,isPot:!0,width:a.size};J=P.instance(q);u=P.instance(q)}var B=-1,N=null;e&&(d.S=P.instance({isFloat:!0,isPot:!1,width:a.size}));d.Ea=P.instance(a.bias);var Q={A:function(){return a.size},tb:function(){return O},Ac:function(){return a.classesCount},Fd:function(f){h.g(f)},Je:function(){a.remap&&a.remap.isEnabled&&(x={isEnabled:!0,
Be:P.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),Ta:a.remap.layers.map(function(f){return a.parent.je(f)}),depth:a.remap.depth})},$e:function(){switch(a.connectivityUp){case "direct":N=db.instance(a.connectivity);break;case "square":N=fb.instance(a.connectivity);break;case "squareFast":N=gb.instance(a.connectivity,a.activation);break;case "full":N=hb.instance(a.connectivity);break;case "conv":v=a.kernelsCount,N=ib.instance(a.connectivity),
z&&(d.Va=P.instance({width:O,isFloat:!0,isFlipY:!1,isPot:!1}))}if(N.na){var f=a.size*a.sparsity;B=Math.log(f/a.size)/Math.log(2);d.input=P.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:f,Gb:B});d.zb=P.instance({isFloat:!0,isPot:!0,width:a.size})}},K:function(f,K){h=f;N.na?(d.input.P(),n&&d.Ea.g(2),N.K(x),d.input.g(0),d.input.$d(B),d.zb.P(),n?G.set("s0"):(G.set("s27"),G.L("u25",m),d.Ea.g(1)),d.input.Gd(B,0),M.l(!1,!1),G.set(k),R?J.u():d.S.u(),d.zb.g(0),y&&g.Wd(),M.l(!1,!1)):(d.S.P(),d.Ea.g(1),N.K());
R&&(G.set(I),u.u(),J.g(0),M.l(!1,!1),G.set("s46"),G.L("u6",1),d.S.u(),u.g(1),M.l(!1,!1));if(e)return E?(d.Mb.P(),d.S.g(0),G.set(L),G.ea("u7",1/a.size,1/a.size),M.l(!1,!1),K=d.Mb):K=d.S,K.g(0),z&&(d.Va.u(),G.set("s21"),G.ea("u12",v,O/v),M.l(!1,!1),K=d.Va,d.Va.g(0)),K;var F=d.S;a.normalize&&(G.set("gpuRawAvg"===l?"s8":"s7"),G.L("u4",1/a.size),d.Nb.P(),d.S.g(0),M.l(!1,!1),F=d.Nb);f=null;switch(l){case "cpuRGBA2Float":F.pb(!1);K?f=Q.Le(F).then(t):(F=Q.Me(F),t(F));break;case "cpuMeanFloat":F.pb(!0);K?
f=F.Oe().then(t):(F=F.Pe(),t(F));break;case "gpuRawAvg":case "gpuRaw":F.g(0);case "none":null!==t&&t(F)}K&&null===f&&(f=Promise.resolve());return f},Od:function(f){f&&(l=f.Ob||"none",t=f.Lb||null);d.S=P.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});f="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var K=0,F=0,S=0;K<f;++K)r.push(F+(a.size-1-S)*a.size),p.push([-1,-1,-1,-1]),++F,F===a.size&&(F=0,++S);a.normalize&&(d.Nb=P.instance({isFloat:!0,isPot:!0,width:a.size}))},
Le:function(f){return f.Ne().then(c)},Me:function(f){f=f.Pb();c(f);return p},m:function(){for(var f in d){var K=d[f];K&&K.remove()}N&&(N.m(),N=null)}};a.Xa&&Q.$e(a.Xa);return Q}};
function kb(a){var c=null,d=null,h=null,r=0;this.s=function(p){this.Ye(p.Ta);h.Od({Ob:p.Ob,Lb:p.Lb})};this.je=function(p){return c[p]};this.Ye=function(p){var l=null;r=p.length;c=p.map(function(t,e){t=Object.assign({},t,{index:e,parent:this,Xa:l,ye:e===r-1});return l=e=0===e?cb.instance(t):jb.instance(t)});d=c[0];h=c[r-1];c.forEach(function(t,e){0!==e&&t.Je()})};this.K=function(p){var l=p;c.forEach(function(t){l=t.K(l,!1)});return l};this.he=function(){return d.A()};this.oe=function(){return h.A()};
this.ub=function(){return h.me()};this.Ac=function(){return h.Ac()};this.m=function(){c&&(c.forEach(function(p){p.m()}),h=d=c=null,r=0)};"undefined"!==typeof a&&this.s(a)}
var db={instance:function(a){var c=P.instance(a.weights);return{na:!0,Ma:function(){return 1},m:function(){c.remove()},pe:function(){return c},K:function(){G.set("s26");c.g(1);M.l(!1,!1)}}}},hb={instance:function(a){var c=a.fromLayerSize,d=P.instance(a.weights);return{na:!0,Ma:function(){return c},m:function(){d.remove()},K:function(h){if(h.isEnabled){G.set("s24");h.Be.g(3);var r,p=Math.min(h.Ta.length,h.depth);for(r=0;r<p;++r)h.Ta[r].Fd(4+r)}else G.set("s23");G.L("u16",a.toLayerSize);d.g(1);M.l(!1,
!1)}}}},fb={instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,h=a.toSparsity,r=h*d,p=r/c,l=c/d,t=0,e=0,v=0,z=Array(h*d*h*d*4),n=Array(h*d*h*d*4),g=Array(c*c),y=0;y<g.length;++y)g[y]=0;y=Math.floor(h/2);for(var x=.5/d,k=.5/c,m=.5/r,E=0;E<d;++E)for(var O=Math.round(E*l),L=0;L<d;++L){var R=Math.round(L*l),I=E/d,J=L/d;I+=x;J+=x;for(var u=0;u<h;++u){var q=O+u-y;0>q&&(q+=c);q>=c&&(q-=c);for(var B=0;B<h;++B){var N=t/r,Q=e/r,f=R+B-y;0>f&&(f+=c);f>=c&&(f-=c);var K=q/c,F=f/c;Q=1-Q-1/r;K+=k;F+=
k;N+=m;Q+=m;var S=E*h+u,Z=L*h+B;Z=d*h-Z-1;S=Z*d*h+S;z[4*S]=N;z[4*S+1]=Q;z[4*S+2]=K;z[4*S+3]=F;F=g[f*c+q]++;S=F%p;K=q*p+S;f=f*p+(F-S)/p;f=c*p-1-f;f=f*c*p+K;n[4*f]=N;n[4*f+1]=Q;n[4*f+2]=I;n[4*f+3]=J;++t>=r&&(t=0,++e);++v}}}g=null;var X=P.instance(a.weights);delete a.weights.data;var w=P.instance({width:r,isFloat:!0,array:new Float32Array(n),isPot:!0});n=null;var da=P.instance({width:r,isFloat:!0,array:new Float32Array(z),isPot:!0});z=null;return{na:!0,Ma:function(){return p},m:function(){w.remove();
da.remove();X.remove()},K:function(){G.set("s22");X.g(1);da.g(2);M.l(!1,!1)}}}},ib={instance:function(a){var c=a.kernelsCount,d=a.toSparsity,h=d*a.toLayerSize/a.fromLayerSize,r=P.instance(a.weights);return{na:!0,Ma:function(){return h},Rf:function(){return d},pe:function(){return r},m:function(){r.remove()},K:function(){G.set("s25");G.L("u22",c);G.L("u23",d);G.L("u16",a.toLayerSize);G.L("u24",a.fromLayerSize);r.g(1);M.l(!1,!1)}}}},gb={instance:function(a,c){var d=a.fromLayerSize,h=a.toLayerSize,r=
a.toSparsity,p=a.stride?a.stride:1,l=r*h/d,t=h<d,e=d/h,v=P.instance(a.weights),z="s47"+[d.toString(),h.toString(),r.toString(),p.toString(),c].join("_");G.Zd(z)||(a=Oa(c),h=[{type:"1f",name:"u16",value:h},{type:"1f",name:"u29",value:p}],t&&h.push({type:"1f",name:"u24",value:d}),d=[(t?l:r).toFixed(1),a],t&&d.push(e.toFixed(1)),G.Gc(t?"s39":"s38",z,d),G.I(z,h.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{na:!1,Ma:function(){return l},
m:function(){v.remove()},K:function(){G.set(z);v.g(3);M.l(!1,!1)}}}},ab={instance:function(a){var c=a.Vc?a.Vc:3,d=a.Ic?a.Ic:64,h=a.Zc?a.Zc:64,r=a.Ra?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=P.instance(a),l=P.instance(a),t=P.instance(a),e=P.instance(a),v=P.instance({isFloat:!0,width:h,isPot:!1,isFlipY:!1}),z=1/d;return{process:function(n){G.set("s35");e.u();M.l(r,!1);G.set("s36");for(var g=0;g<c;++g)p.u(),G.ea("u7",z,0),M.l(r,!1),t.u(),e.g(0),M.l(r,!1),l.u(),p.g(0),G.ea("u7",0,z),M.l(r,
!1),e.u(),t.g(0),M.l(r,!1),g!==c-1&&l.g(0);G.set("s37");v.u();n.g(0);l.g(1);e.g(2);M.l(r,!1);v.g(0)},ub:function(){return v}}}},bb={instance:function(a){function c(v){return P.instance({isFloat:v,width:d.ga,isPot:!1,isFlipY:!1})}var d=Object.assign({xd:.1,jc:9,ga:128,Ra:!1},a),h=c(!1),r=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],l=c(!0),t=[h,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.jc-1)/2).toFixed(2)).replace("2.2222",(1/d.ga).toFixed(6));var e={u1:0};G.ec([{id:"s49",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:e,i:["u1"],precision:"lowp"},{id:"s50",name:"_",h:a,j:e,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",h:"uniform sampler2D u32,u33,u34,u35;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);varying vec2 vv0;void main(){vec3 a=texture2D(u32,vv0).rgb;float c=texture2D(u33,vv0).r,d=texture2D(u34,vv0).r,h=texture2D(u35,vv0).r,i=a.r*a.r;vec3 b=vec3(c,d,h),j=max(g*f,abs(i-b*b)),k=sqrt(j);gl_FragColor=vec4(a.r,(a-b)/k);}".replace("1.1111",
d.xd.toFixed(4)),j:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){G.set("s49");h.P();M.l(d.Ra,!1);G.set("s50");for(var v=0;3>v;++v)G.ea("u31",1,0),r[v].u(),t[v].g(0),M.l(!1,!1),G.ea("u31",0,1),p[v].u(),r[v].g(0),M.l(!1,!1);G.set("s51");l.u();h.g(0);p[0].g(1);p[1].g(2);p[2].g(3);M.l(!1,!1);l.g(0)},ub:function(){return l}}}};function lb(a,c){a[c]=!0;a.setAttribute(c,"true")}
function mb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function nb(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]}function ob(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function pb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function qb(a){if(!a)return a;var c=null;if(a.video){var d=function(h){return h&&"object"===typeof h?Object.assign({},h):h};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&(c.deviceId=a.deviceId);return c}
function sb(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a}
function tb(a){function c(g){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(y,x){return Math.abs(y-g)-Math.abs(x-g)})}function d(g){var y=qb(a);g=g(y);r.push(g);h(g)}function h(g){if(g.video&&g.video.facingMode&&g.video.facingMode.exact){var y=g.video.facingMode.exact;g=qb(g);delete g.video.facingMode.exact;g.video.facingMode.ideal=y;r.push(g)}}var r=[];if(!a||!a.video)return r;h(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=
c(a.video.width.ideal).slice(0,3),l=c(a.video.height.ideal).slice(0,3),t={},e=0;for(t.aa=void 0;e<p.length;t={aa:t.aa},++e){t.aa=p[e];var v={},z=0;for(v.$=void 0;z<l.length;v={$:v.$},++z)if(v.$=l[z],t.aa!==a.video.width.ideal||v.$!==a.video.height.ideal){var n=Math.max(t.aa,v.$)/Math.min(t.aa,v.$);n<4/3-.1||n>16/9+.1||d(function(g,y){return function(x){x.video.width.ideal=g.aa;x.video.height.ideal=y.$;return x}}(t,v))}}}d(function(g){return sb(g)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&d(function(g){delete g.video.width.ideal;delete g.video.height.ideal;return g}),d(function(g){delete g.video.width;delete g.video.height;return g}));a.video.facingMode&&(d(function(g){delete g.video.facingMode;return g}),a.video.width&&a.video.height&&d(function(g){sb(g);delete g.video.facingMode;return g}));r.push({audio:a.audio,video:!0});return r}
function ub(a){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(h){c=window.innerHeight>window.innerWidth}if(c&&a&&a.video){c=a.video.width;var d=a.video.height;c&&d&&c.ideal&&d.ideal&&c.ideal>d.ideal&&(a.video.height=c,a.video.width=d)}}
function vb(a){a.volume=0;lb(a,"muted");if(ob()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;lb(a,"muted")},5)}}
function wb(a,c,d,h){function r(l){p||(p=!0,d(l))}var p=!1;navigator.mediaDevices.getUserMedia(h).then(function(l){function t(){setTimeout(function(){if(a.currentTime){var e=a.videoWidth,v=a.videoHeight;if(0===e||0===v)r("VIDEO_NULLSIZE");else{e&&(a.style.width=e.toString()+"px");v&&(a.style.height=v.toString()+"px");e={Kd:null,cf:null,Ce:null};try{var z=l.getVideoTracks()[0];z&&(e.Ce=z,e.Kd=z.getCapabilities(),e.cf=z.getSettings())}catch(n){}ob()||mb()?a.parentNode&&null!==a.parentNode?(p||c(a,l,
e),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),vb(a),p||c(a,l,e),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";vb(a);setTimeout(function(){a.play()},100)},80)):p||c(a,l,e)}}else r("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof a.srcObject?a.srcObject=l:(a.src=window.URL.createObjectURL(l),a.videoStream=l);vb(a);a.addEventListener("loadeddata",function(){var e=a.play();vb(a);"undefined"===typeof e?
t():e.then(function(){t()}).catch(function(){r("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(l){r(l)})}
function xb(a,c,d){var h=pb()?document.createElement("video"):!1;if(h)if(pb()){if(d&&d.video){if(mb()){var r=nb();0!==r[0]&&(12>r[0]||12===r[0]&&2>r[1])&&ub(d)}d.video.width&&d.video.width.ideal&&(h.style.width=d.video.width.ideal+"px");d.video.height&&d.video.height.ideal&&(h.style.height=d.video.height.ideal+"px")}lb(h,"autoplay");lb(h,"playsinline");d&&d.audio?h.volume=0:lb(h,"muted");wb(h,a,function(){function p(t){if(0===t.length)c("INVALID_FALLBACKCONSTRAINTS");else{var e=t.shift();wb(h,a,function(){p(t)},
e)}}var l=tb(d);p(l)},d)}else c&&c("MEDIASTREAMAPI_NOTFOUND");else c&&c("VIDEO_NOTPROVIDED")}
var yb=function(){var a={n:5,Ib:1,Tc:0,Ka:[30,45],Ha:[2,200],k:.7,kf:200,Ie:.05},c=-1,d=null,h=-1,r=-1,p=0,l=-1,t=-1,e=0,v=0,z=a.Ha[1],n={ke:function(){switch(c){case -1:return-1;case 0:return t+d.Tc;case 1:return e}},be:function(g){return Math.pow(Math.min(Math.max(l,0),d.n-1)/(d.n-1),g||1)},s:function(g){d=Object.assign({},a,g);l=t=d.Ib;c=0;n.reset()},ff:function(g){g=("undefined"===typeof g?Date.now():g)||0;var y=Math.min(Math.max(g-v,d.Ha[0]),d.Ha[1]);z=y;v=g;var x=-1===h?0:d.k;h=Math.min(Math.max(1E3/
y,5),120)*(1-x)+h*x;g-r>d.kf&&5<++p&&(y=d.k,l=l*(1-y)+(h<d.Ka[0]?t-1:h>d.Ka[1]?t+1:t)*y,Math.abs(l-t)>1-d.Ie&&(y=Math.min(Math.max(Math.round(l),0),d.n-1),y!==t&&(l=t=y,h=(d.Ka[1]-d.Ka[0])/2)),r=g)},eg:function(g){e=g;c=1},og:function(){c=0;n.reset()},reset:function(){z=a.Ha[1];r=h=-1;p=0},If:function(){return z}};return n}(),zb=function(){var a={Xc:4,Wa:[1.5,1.5,2],fa:[.1,.1,.1],kd:1,ga:-1,wb:-1,ef:2,He:1,md:!0,Xd:.8},c=null,d=[],h=0,r=[.5,.5,1];return{s:function(p){c=Object.assign({},a,p);d.splice(0);
p=c.Wa[0]*c.fa[0];var l=c.Wa[1]*c.fa[1],t=1/(1+c.Wa[2]*c.fa[2]),e=c.kd*Math.min(c.ga,c.wb),v=e/c.ga;e/=c.wb;var z=.5*c.Xd;z*=z;for(var n=0;n<c.Xc;++n){var g=Math.pow(t,n),y=v*g,x=e*g;g=y*p;var k=x*l,m=y/2;x/=2;for(var E=1+(1-m-m)/g,O=1+(1-x-x)/k,L=0;L<O;++L)for(var R=x+L*k,I=R-.5,J=0;J<E;++J){var u=m+J*g,q=u-.5;q*q+I*I>z||d.push([u,R,y*c.He])}}c.md&&d.sort(function(B,N){var Q=B[0]-.5;B=B[1]-.5;var f=N[0]-.5;N=N[1]-.5;return Q*Q+B*B-(f*f+N*N)})},get:function(){var p=d.length;if(0===p)return r;h>=p&&
(h=0);var l=d[Math.floor(h)];h=(h+1/c.ef)%p;return l}}}(),Ab=function(){function a(){d(z+e.Hb)}function c(){y.Ca=0===e.ia?window.requestAnimationFrame(d):window.requestAnimationFrame(h)}function d(E){g.la&&null!==v&&(E-=z,E=Math.min(Math.max(E,e.oc[0]),e.oc[1]),z+=E,p(),v(z))}function h(E){g.la&&(y.timeout=window.setTimeout(d.bind(null,E),e.ia))}function r(){v=null;g.la=!1;p()}function p(){y.Ca&&(window.cancelAnimationFrame(y.Ca),y.Ca=null);y.timeout&&(window.clearTimeout(y.timeout),y.timeout=null)}
function l(E){E?(g.va=!0,n.port.postMessage("STOP"),Ta.ud(!0),c()):(g.va=!1,Ta.ud(!1),n.port.postMessage("START"))}var t={Nc:!0,oc:[1,200],Hb:50,ia:0},e=null,v=null,z=0,n=null,g={ca:!1,va:!0,Eb:!1,Db:!1,Bb:!1,la:!1},y={Ca:null,timeout:null},x=l.bind(null,!0),k=l.bind(null,!1),m={s:function(E){e=Object.assign(t,E);Object.assign(g,{va:!0,ca:!0,la:!1});if(e.Nc){E=!1;try{if("undefined"===typeof SharedWorker){var O=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        switch (e.data) {\n          case 'START':\n            if (handler === null){\n              handler = setInterval(function(){\n                self.postMessage('tick');\n              }, "+
e.Hb.toString()+");\n            }\n            break;\n          case 'STOP':\n            if (handler !== null){\n              clearInterval(handler);\n              handler = null;\n            }\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),L=new Worker(O);L.addEventListener("message",a);n={ad:L,port:L};g.Eb=!0}else{var R=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          switch (e.data) {\n            case 'START':\n              if (handler === null){\n                handler = setInterval(function(){\n                  port.postMessage('tick');\n                }, "+
e.Hb.toString()+");\n              }\n              break;\n            case 'STOP':\n              if (handler !== null){\n                clearInterval(handler);\n                handler = null;\n              }\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),I=new SharedWorker(R);I.port.start();I.port.addEventListener("message",a);n={ad:I,port:I.port};g.Db=!0}E=!0}catch(J){}E&&(window.addEventListener("blur",
k),window.addEventListener("focus",x),g.Bb=!0)}},m:function(){r();g.Bb&&(window.removeEventListener("blur",k),window.removeEventListener("focus",x),g.Bb=!1);g.Db?(n.port.close(),g.Db=!1):g.Eb&&(n.ad.terminate(),g.Eb=!1);Object.assign(g,{va:!0,ca:!1,la:!1});v=null},update:function(E){Object.assign(e,E)},Ue:function(E){g.ca||m.s({});p();g.la=!0;v=E;g.va&&c()},stop:r};return m}(),Bb=function(){var a=0,c=null,d=null,h=null,r=null;return{s:function(p,l){a=p.length;c=l;d=p;h=new Float32Array(a);r=new Float32Array(a)},
le:function(){return r},df:function(p,l,t){p.forEach(function(e,v){var z=Math.min(1,d[v]*t*(l+.33*(1-l)));e=z*e+(1-z)*h[v];h[v]=e;r[v]=c[v](e)})}}}(),V={VERSION:"1.2.3",ha:[],hb:!1,ib:!1,gb:!1,cc:!1,Ba:!0,Aa:!1,ready:!1,initialized:!1},Cb={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280},b={neuralNetworkPath:"jeelizFaceTransferNNC.json",ac:"../../",ia:0,width:512,height:512,gf:30,ld:[.6,5.8],
fa:[.06,.08,.15],Xe:.7,Ve:2,We:[2,2,2],threshold:.9,Bd:[.03,1],qf:20,se:!1,fb:[2,7],H:{Ec:[3,7],quality:[0,6],position:[0,7],rotation:[5,7]},Wc:11,Uc:1,De:1,fc:[.1,.01],Se:[.4,-.7,-.4],Te:[.3,0,0],Vd:!1,Cd:.001,hc:[Math.PI/10,Math.PI/6],cd:[.1,.4],dd:[.009,.02],ed:[.02,.04],Jb:5,Fc:.05,Ad:[.2,.2,.15,.15,.15,.15,.2,.2,.15,.15,.2],Ee:[Ia.bind(null,.05,.7),Ia.bind(null,.05,.7),Ia.bind(null,0,.4),Ia.bind(null,0,.4),Ia.bind(null,0,.6),Ia.bind(null,0,.6),Ja.bind(null,.05,.5),Ia.bind(null,.2,.6),Na.bind(null,
.7,.8,2),Na.bind(null,.7,.8,2),Ia.bind(null,.15,.5)]};V.get_nMorphs=function(){return b.Wc};var Db=null,Eb=null,Fb=null,Gb=[];
function Hb(){function a(){1===++K&&(Bb.s(b.Ad,b.Ee),c(),V.ready=!0,V.ha.forEach(function(A){A()}),V.ha.splice(0,V.ha.length),d(),K=0)}function c(){O=Ga();L=new Uint8Array(x*x*4);V.get_morphTargetInfluences=function(){return O};V.get_morphTargetInfluencesStabilized=function(){return Bb.le()};V.set_morphUpdateCallback=function(A){R=A};V.get_rotation=function(){return u};V.get_positionScale=function(){var A=m.sd.ie();A.pb(!1);A=A.Pb();N[0]=1-A[1][0];N[1]=A[2][0];N[2]=A[3][0]*k[0];return N};V.get_rotationStabilized=
function(){return B};V.switch_sleep=function(A){S!==F.Ub||A?S=A?F.Ub:F.play:d()};V.on_detect=function(A){A(Z.R);Z.Kb.push(A)};V.is_detected=function(){return Z.R};V.set_animateDelay=function(A){g=A;Ab.update({ia:g})}}function d(){S!==F.play&&(S=F.play,Ab.stop(),h())}function h(){var A,H;return Ba(new wa(new ma(function(ba){switch(ba.Y){case 1:a:{if("VIDEO"===f.element.nodeName){var Y=f.element.currentTime-w;0>Y&&(w=f.element.currentTime);if(1E3*Y<b.qf)break a;w+=Y}f.oa.refresh();Y=da.Cc();Y[0]===
f.Fa[0]&&Y[1]===f.Fa[1]||da.wd()}A=yb.ke();H=0;case 2:if(!(H<A)){ba.Y=4;break}Y=m;var ra=y;G.set("s53");Va.U();Y.Pa.P();f.oa.g(0);Y.ab.g(1);M.l(!1,!1);Y.Pa.g(0);ra.K(Y.Pa);b.se?Y=P.Re(I,L).then(r):(P.Qe(I,L),r(),Y=Promise.resolve());ba.Y=3;return{value:Y};case 3:++H;ba.Y=2;break;case 4:Y=m,Va.U(),E.P(),G.set("s56"),Y.ab.g(0),M.l(!1,!1),Y=yb.be(),Q=3*(1-Y)+1*Y,yb.ff(),V.Ba&&(Va.jf(),G.set("s52"),f.oa.g(0),M.l(!1,!1),C.enable(C.BLEND),C.blendFunc(C.SRC_ALPHA,C.ONE),E.g(0),M.l(!1,!1),C.disable(C.BLEND)),
C.flush(),S!==F.Ub&&Ab.Ue(h),ba.Y=0}})))}function r(){t();if(!b.Vd&&Z.R)for(var A=0;3>A;++A){var H=l(A+b.H.rotation[0],b.H.rotation[1]);H=(2*H-1)*b.Se[A];H+=b.Te[A];J[A]=H}p();A=Date.now();H=A-X.Rc;var ba=l(b.H.quality[0],b.H.quality[1]);X.bd=Ja(b.cd[0],b.cd[1],ba);ba=l(b.H.position[0],b.H.position[1]);var Y=l(b.H.position[0]+1,b.H.position[1]),ra=l(b.H.position[0]+2,b.H.position[1]);X.jd=1-Ja(b.ed[0],b.ed[1],Math.sqrt(ba*ba+Y*Y+ra*ra)/H);ba=X.ma[0]-J[0];Y=X.ma[1]-J[1];ra=X.ma[2]-J[2];H=Math.sqrt(ba*
ba+Y*Y+ra*ra)/H;X.ma[0]=J[0];X.ma[1]=J[1];X.ma[2]=J[2];X.fd=1-Ja(b.dd[0],b.dd[1],H);X.O=X.bd*X.jd*X.fd;X.Rc=A;X.Qc[X.Fb]=X.O;X.Fb=(X.Fb+1)%b.Jb;for(A=0;A<b.Jb;++A)X.O=Math.min(X.Qc[A],X.O);Bb.df(O,X.O,Q);R&&R(X.O,Q);if(Z.R)for(A=b.fc[1]*X.O+b.fc[0]*(1-X.O),A*=Q,H=0;3>H;++H)u[H]=A*J[H]+(1-A)*u[H],B[H]=u[H];else A=Date.now()*b.Cd,q[0]=b.hc[0]*Math.sin(A),q[1]=b.hc[1]*Math.cos(A),B[0]=q[0],B[1]=q[1],B[2]=q[2]}function p(){var A=l(b.H.Ec[0],b.H.Ec[1]);Z.Qa=b.Fc*A+(1-b.Fc)*Z.Qa;.6<Z.Qa&&!Z.R?(Z.Kb.forEach(function(H){H(!0)}),
Z.R=!0):.4>Z.Qa&&Z.R&&(Z.Kb.forEach(function(H){H(!1)}),Z.R=!1)}function l(A,H){A+=x*H;return(L[4*A]+L[4*A+1]+L[4*A+2]+L[4*A+3])/1020}function t(){O.forEach(function(A,H){if(Z.R){A=(b.Uc+H)%x;var ba=b.De+Math.floor((b.Uc+H)/x);ba=x-1-ba;A=l(A,ba);O[H]=A}else O[H]=0})}function e(A){y=new kb({Ta:A.layers,Ob:"gpuRaw",Lb:function(H){var ba=m;ba.ab.pd(1);C.viewport(0,0,1,1);G.set("s54");G.L("u36",X.O);G.qd("u37",zb.get());G.qd("u38",b.fa);M.l(!1,!1);ba.sd.pd(1);G.set("s55");G.L("u36",X.O);ba.ab.g(0);M.l(!1,
!1);I=H}});A=y.he();A!==n&&(n=A,da.Hc(),m.Pa.resize(n,n),da.rd());x=y.oe();a()}var v=-1,z=-1,n=64,g=b.ia,y=null,x=0,k=null,m={},E=null,O=null,L=null,R=null,I=null,J=[0,0,0],u=[0,0,0],q=[0,0,0],B=[0,0,0],N=[0,0,0],Q=1,f={pf:[.5,.5],mf:[.5,.5],element:null,oa:null,Fa:[-1,-1]},K=0,F={Rd:-4,Ge:-3,ag:-2,Ub:-1,play:0},S=F.Ge,Z={Qa:0,R:!1,Kb:[]},X={O:1,jd:1,bd:1,fd:1,ma:[0,0,0],Rc:Date.now(),Qc:new Float32Array(b.Jb),Fb:0},w=0,da={Hc:function(){v=b.width;z=b.height;zb.s({Wa:b.We,Xc:b.Ve,ga:v,wb:z,kd:b.Xe,
fa:b.fa,md:!0});k=[1,v/z]},rd:function(){G.I("s52",[{type:"1i",name:"u1",value:0}]);G.I("s53",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u39",value:1},{type:"2f",name:"u40",value:k}]);G.I("s56",[{type:"1i",name:"u39",value:0},{type:"2f",name:"u40",value:k},{type:"3f",name:"u41",value:[0,.5,1]}]);G.I("s54",[{type:"1i",name:"u42",value:0},{type:"1i",name:"u39",value:1},{type:"1f",name:"u43",value:b.ld[0]},{type:"1f",name:"u44",value:b.ld[1]},{type:"1f",name:"u45",value:b.gf},{type:"1f",name:"u46",
value:b.threshold},{type:"1f",name:"u47",value:k[0]}]);G.I("s55",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u5",value:1},{type:"2f",name:"u48",value:b.Bd}])},Pd:function(){G.ec([{id:"s52",name:"_",za:"attribute vec2 a0;uniform vec2 u49,u50;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u50+u49*a0;}",Da:["a0"],ra:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u49","u50"],precision:"lowp"},{id:"s53",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
za:"attribute vec2 a0;uniform sampler2D u39;uniform vec2 u40,u49,u50;const vec2 f=vec2(.25,.5),i=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u39,f);vec2 b=a.gb,c=a.a*u40,d=a0*.5+e,h=b+(d-e)*c;vv0=u50+u49*2.*(h-.5),gl_Position=vec4(a0,0.,1.);}",Da:["a0"],ra:[2],i:["u1","u39","u40","u49","u50"],precision:"lowp"},{id:"s54",name:"_",za:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u42,u39;uniform vec3 u37,u38;uniform float u43,u44,u45,u46,u47,u36;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 c=texture2D(u42,vec2(.4375,.9375)),d=texture2D(u42,vec2(.5625,.9375));float f=dot(c-d,e);bool g=f>u46;vec4 a=texture2D(u39,vec2(.5,.5));g?a.r=2.:a.r>u45?a.r=0.:a.r>1.9&&(a.a>u44||a.a<u43)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u37,a.r=1.;else{float h=dot(e,texture2D(u42,vec2(.0625,.9375))),i=dot(e,texture2D(u42,vec2(.1875,.9375))),j=dot(e,texture2D(u42,vec2(.3125,.9375))),b;if(a.r>1.9)b=1.-u36;else b=1.,a.r=0.;float k=a.a*u47;a.gba+=vec3(h,i,j)*u38*b*k;}gl_FragColor=a;}",
i:"u42 u39 u37 u43 u44 u45 u46 u38 u47 u36".split(" ")},{id:"s56",name:"_",h:"uniform sampler2D u39;uniform vec3 u41;uniform vec2 u40;varying vec2 vv0;const vec2 i=vec2(1.,1.);void main(){vec4 f=texture2D(u39,vec2(.25,.5));vec2 g=f.gb;float j=f.a;vec2 a=j*u40,c=g+a,d=g;d-=a/2.,c-=a/2.;vec2 k=.5*(d+c),h=step(d,vv0)*step(vv0,c);float l=h.x*h.y;vec2 b=2.*abs(k-vv0)/a;b=pow(b,3.*i),gl_FragColor=vec4(l*u41*max(b.x,b.y),1.);}",i:["u39","u40","u41"],precision:"lowp"},{id:"s55",name:"_",h:"uniform sampler2D u1,u5;uniform vec2 u48;uniform float u36;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);float c=(1.-u36)*(u48.y-u48.x)+u48.x;gl_FragColor=mix(b,a,c*f);}",
i:["u1","u5","u48","u36"]}])},re:function(A){var H=new Float32Array([0,.5,.5,0]);A.Pa=P.instance({isPot:!0,isFloat:!1,width:n});H={width:1,height:1,isFloat:!0,isPot:!1,array:H};A.ab=Xa.instance(H);A.sd=Xa.instance(H)},Qd:function(){f.oa=P.instance({F:f.element,isPot:!1,isFloat:!1,isFlipY:!0});E=P.instance({isPot:!1,isFloat:!1,width:v,height:z})},s:function(){da.Qd();da.re(m);Ab.s({Nc:!1,ia:g});yb.s({Ib:0,n:b.fb[1]-b.fb[0]+1,Tc:b.fb[0]});Fb?e(Fb):Ca(function(A){A=JSON.parse(A);e(A)})},m:function(){Ab.stop();
y&&(y.m(),y=null);S=F.Rd},Ld:function(A){V.hb&&V.hb();var H={video:{facingMode:{ideal:Cb.facingMode},width:{min:Cb.minWidth,max:Cb.maxWidth,ideal:Cb.idealWidth},height:{min:Cb.minHeight,max:Cb.maxHeight,ideal:Cb.idealHeight}},audio:V.cc};Cb.deviceId&&(constraints.deviceId=Cb.deviceId);xb(function(ba,Y){Db=Y;V.ib&&V.ib();A(ba)},function(){window.eb&&window.eb("WEBCAM_UNAVAILABLE")},H)},Sc:function(A,H){da.Pd();f.element=A;Eb=f.element;da.wd();da.Hc();da.rd();da.s();H&&H()},Cc:function(){var A=[-1,
-1],H=f.element;"VIDEO"===H.nodeName?(A[0]=H.videoWidth,A[1]=H.videoHeight):(A[0]=H.width,A[1]=H.height);return A},wd:function(){var A=da.Cc();f.Fa[0]=A[0];f.Fa[1]=A[1];Wa.La().width=A[0];Wa.La().height=A[1];b.width=A[0];b.height=A[1];var H=f.pf,ba=f.mf,Y=A[1]/A[0];A=Wa.J()/Wa.A();Y>A?1>=Y?H[0]*=Y:H[1]/=Y:(H[0]*=Y,Y=1/A,H[0]*=Y,H[1]*=Y);H[1]*=A;H=[{type:"2f",name:"u49",value:H},{type:"2f",name:"u50",value:ba}];G.I("s53",[{type:"1i",name:"u1",value:0}].concat(H));G.I("s52",H)}};Gb.push(da);return da}
V.onLoad=function(a){V.ready?a():V.ha.push(a)};V.set_audio=function(a){V.cc=a};V.switch_displayVideo=function(a){V.Ba=a;V.Aa&&(V.Aa.style.display=V.Ba?"block":"none")};V.onWebcamAsk=function(a){V.hb=a};V.onContextLost=function(a){V.gb=a};V.onWebcamGet=function(a){V.ib=a};V.destroy=function(){Ab.m();Eb&&Eb.srcObject&&Eb.srcObject.getTracks().forEach(function(a){a.stop()});Gb.forEach(function(a){a.m()});Gb.splice(0);Wa.m();V.switch_displayVideo(!1);V.initialized=!1;V.ha.splice(0)};
V.set_size=function(a,c){b.width=a;b.height=c};V.get_size=function(){return{width:b.width,height:b.height}};V.get_videoStream=function(){return Db};V.get_video=function(){return Eb};V.get_cv=function(){return Wa.La()};V.set_color=function(a){G.I("s56",[{type:"3f",name:"u41",value:a}])};
V.init=function(a){var c=Hb(),d=a.callbackReady?a.callbackReady:function(r){console.log("ERR:",r)},h=a.callbackReady?a.callbackReady.bind(null,!1):!1;if("undefined"===typeof a.canvasId)d("NO_CANVASID");else if(document.getElementById(a.canvasId))if(V.initialized)d("ALREADY_INITIALIZED");else{V.initialized=!0;window.eb=d?function(r){d(r);window.eb=!1}:!1;a.NNCPath&&(b.ac=a.NNCPath);"undefined"!==typeof a.NNC&&(Fb="string"===typeof a.NNC?JSON.parse(a.NNC):a.NNC);h&&V.ha.push(h);if(!Wa.s({nc:a.canvasId,
width:b.width,height:b.height,debug:!1,Ab:!1,Yc:function(){V.gb&&V.gb()},premultipliedAlpha:!1}))return d("GL_INCOMPATIBLE"),!1;V.Aa=Wa.La();V.Ba||(V.Aa.style.display="none");M.s();Va.s();G.s();P.s();C.depthFunc(C.LEQUAL);C.clearDepth(1);a.videoSettings&&a.videoSettings.videoElement?c.Sc(a.videoSettings.videoElement,!1):(a.videoSettings&&Object.assign(Cb,a.videoSettings),c.Ld(function(r){c.Sc(r,!1)}));return!0}else d("INVALID_CANVASID")};const JEEFACETRANSFERAPI=V;
if(typeof(module)!=='undefined'){module.exports=JEEFACETRANSFERAPI;}
/* eslint-enable */
