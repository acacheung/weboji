 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEELIZFACEEXPRESSIONS=(function(){var ea="function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,g){if(b==Array.prototype||b==Object.prototype)return b;b[d]=g.value;return b};function ha(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<b.length;++d){var g=b[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object");}var ma=ha(this);
function qa(b,d){if(d)a:{var g=ma;b=b.split(".");for(var h=0;h<b.length-1;h++){var t=b[h];if(!(t in g))break a;g=g[t]}b=b[b.length-1];h=g[b];d=d(h);d!=h&&null!=d&&ea(g,b,{configurable:!0,writable:!0,value:d})}}function ta(b){var d=0;return function(){return d<b.length?{done:!1,value:b[d++]}:{done:!0}}}function va(b){var d="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return d?d.call(b):{next:ta(b)}}
function wa(){this.H=!1;this.o=null;this.xa=void 0;this.a=1;this.wa=0;this.C=null}function Ba(b){if(b.H)throw new TypeError("Generator is already running");b.H=!0}wa.prototype.R=function(b){this.xa=b};function Da(b,d){b.C={pe:d,Ne:!0};b.a=b.wa}wa.prototype.return=function(b){this.C={return:b};this.a=this.wa};function Ea(b){this.a=new wa;this.o=b}
function Fa(b,d){Ba(b.a);var g=b.a.o;if(g)return Ja(b,"return"in g?g["return"]:function(h){return{value:h,done:!0}},d,b.a.return);b.a.return(d);return Ka(b)}function Ja(b,d,g,h){try{var t=d.call(b.a.o,g);if(!(t instanceof Object))throw new TypeError("Iterator result "+t+" is not an object");if(!t.done)return b.a.H=!1,t;var r=t.value}catch(n){return b.a.o=null,Da(b.a,n),Ka(b)}b.a.o=null;h.call(b.a,r);return Ka(b)}
function Ka(b){for(;b.a.a;)try{var d=b.o(b.a);if(d)return b.a.H=!1,{value:d.value,done:!1}}catch(g){b.a.xa=void 0,Da(b.a,g)}b.a.H=!1;if(b.a.C){d=b.a.C;b.a.C=null;if(d.Ne)throw d.pe;return{value:d.return,done:!0}}return{value:void 0,done:!0}}
function Oa(b){this.next=function(d){Ba(b.a);b.a.o?d=Ja(b,b.a.o.next,d,b.a.R):(b.a.R(d),d=Ka(b));return d};this.throw=function(d){Ba(b.a);b.a.o?d=Ja(b,b.a.o["throw"],d,b.a.R):(Da(b.a,d),d=Ka(b));return d};this.return=function(d){return Fa(b,d)};this[Symbol.iterator]=function(){return this}}function Pa(b){function d(h){return b.next(h)}function g(h){return b.throw(h)}return new Promise(function(h,t){function r(n){n.done?h(n.value):Promise.resolve(n.value).then(d,g).then(r,t)}r(b.next())})}
qa("Symbol",function(b){function d(t){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new g("jscomp_symbol_"+(t||"")+"_"+h++,t)}function g(t,r){this.a=t;ea(this,"description",{configurable:!0,writable:!0,value:r})}if(b)return b;g.prototype.toString=function(){return this.a};var h=0;return d});
qa("Symbol.iterator",function(b){if(b)return b;b=Symbol("Symbol.iterator");for(var d="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),g=0;g<d.length;g++){var h=ma[d[g]];"function"===typeof h&&"function"!=typeof h.prototype[b]&&ea(h.prototype,b,{configurable:!0,writable:!0,value:function(){return Qa(ta(this))}})}return b});function Qa(b){b={next:b};b[Symbol.iterator]=function(){return this};return b}
qa("Promise",function(b){function d(n){this.o=0;this.R=void 0;this.a=[];var k=this.C();try{n(k.resolve,k.reject)}catch(m){k.reject(m)}}function g(){this.a=null}function h(n){return n instanceof d?n:new d(function(k){k(n)})}if(b)return b;g.prototype.o=function(n){if(null==this.a){this.a=[];var k=this;this.C(function(){k.R()})}this.a.push(n)};var t=ma.setTimeout;g.prototype.C=function(n){t(n,0)};g.prototype.R=function(){for(;this.a&&this.a.length;){var n=this.a;this.a=[];for(var k=0;k<n.length;++k){var m=
n[k];n[k]=null;try{m()}catch(p){this.H(p)}}}this.a=null};g.prototype.H=function(n){this.C(function(){throw n;})};d.prototype.C=function(){function n(p){return function(B){m||(m=!0,p.call(k,B))}}var k=this,m=!1;return{resolve:n(this.Ve),reject:n(this.H)}};d.prototype.Ve=function(n){if(n===this)this.H(new TypeError("A Promise cannot resolve to itself"));else if(n instanceof d)this.bf(n);else{a:switch(typeof n){case "object":var k=null!=n;break a;case "function":k=!0;break a;default:k=!1}k?this.Ue(n):
this.wa(n)}};d.prototype.Ue=function(n){var k=void 0;try{k=n.then}catch(m){this.H(m);return}"function"==typeof k?this.sf(k,n):this.wa(n)};d.prototype.H=function(n){this.xa(2,n)};d.prototype.wa=function(n){this.xa(1,n)};d.prototype.xa=function(n,k){if(0!=this.o)throw Error("Cannot settle("+n+", "+k+"): Promise already settled in state"+this.o);this.o=n;this.R=k;this.Te()};d.prototype.Te=function(){if(null!=this.a){for(var n=0;n<this.a.length;++n)r.o(this.a[n]);this.a=null}};var r=new g;d.prototype.bf=
function(n){var k=this.C();n.Ga(k.resolve,k.reject)};d.prototype.sf=function(n,k){var m=this.C();try{n.call(k,m.resolve,m.reject)}catch(p){m.reject(p)}};d.prototype.then=function(n,k){function m(q,u){return"function"==typeof q?function(C){try{p(q(C))}catch(x){B(x)}}:u}var p,B,E=new d(function(q,u){p=q;B=u});this.Ga(m(n,p),m(k,B));return E};d.prototype.catch=function(n){return this.then(void 0,n)};d.prototype.Ga=function(n,k){function m(){switch(p.o){case 1:n(p.R);break;case 2:k(p.R);break;default:throw Error("Unexpected state: "+
p.o);}}var p=this;null==this.a?r.o(m):this.a.push(m)};d.resolve=h;d.reject=function(n){return new d(function(k,m){m(n)})};d.race=function(n){return new d(function(k,m){for(var p=va(n),B=p.next();!B.done;B=p.next())h(B.value).Ga(k,m)})};d.all=function(n){var k=va(n),m=k.next();return m.done?h([]):new d(function(p,B){function E(C){return function(x){q[C]=x;u--;0==u&&p(q)}}var q=[],u=0;do q.push(void 0),u++,h(m.value).Ga(E(q.length-1),B),m=k.next();while(!m.done)})};return d});
qa("Math.log2",function(b){return b?b:function(d){return Math.log(d)/Math.LN2}});var Ra="function"==typeof Object.assign?Object.assign:function(b,d){for(var g=1;g<arguments.length;g++){var h=arguments[g];if(h)for(var t in h)Object.prototype.hasOwnProperty.call(h,t)&&(b[t]=h[t])}return b};qa("Object.assign",function(b){return b||Ra});
function Sa(b){var d=new XMLHttpRequest;d.open("GET",c.oc+c.neuralNetworkPath,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||b(d.responseText)};d.send()}function Ta(b,d){if(0===d||"object"!==typeof b)return b;b=Object.assign({},b);d=void 0===d||-1===d?-1:d-1;for(var g in b)b[g]=Ta(b[g],d);return b}function Ua(b,d,g){return Math.min(Math.max((g-b)/(d-b),0),1)}
function Va(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Wa(b,d){var g=d%8;return b[(d-g)/8]>>7-g&1}
function Za(b){var d=JSON.parse(b);b=d.ne;var g=d.nf,h=d.n,t=null;"undefined"===typeof btoa?t=Buffer.from(d.data,"base64").toString("latin1"):t=atob(d.data);var r=t.length;d=new Uint8Array(r);for(var n=0;n<r;++n)d[n]=t.charCodeAt(n);t=new Float32Array(h);r=new Float32Array(g);n=b+g+1;for(var k=0;k<h;++k){for(var m=n*k,p=0===Wa(d,m)?1:-1,B=m+1,E=1,q=0,u=B+b-1;u>=B;--u)q+=E*Wa(d,u),E*=2;B=q;m=m+1+b;E=r.length;q=0;for(u=m;u<m+E;++u)r[q]=Wa(d,u),++q;for(E=m=0;E<g;++E)m+=r[E]*Math.pow(2,-E-1);t[k]=0===
m&&0===B?0:p*(1+m)*Math.pow(2,1+B-Math.pow(2,b-1))}return t}
var L=function(){function b(w,f,A){f=w.createShader(f);w.shaderSource(f,A);w.compileShader(f);return w.getShaderParameter(f,w.COMPILE_STATUS)?f:!1}function d(w,f,A){f=b(w,w.VERTEX_SHADER,f);A=b(w,w.FRAGMENT_SHADER,A);w===H&&k.push(f,A);var K=w.createProgram();w.attachShader(K,f);w.attachShader(K,A);w.linkProgram(K);return K}function g(w){return["float","sampler2D","int"].map(function(f){return"precision "+w+" "+f+";\n"}).join("")}function h(w,f){f.s=f.s?!0:!1;if(!f.s){void 0===f.Aa&&(f.Aa="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");
void 0===f.Ea&&(f.Ea=["a0"]);void 0===f.ta&&(f.ta=[2]);if(void 0===f.precision||"highp"===f.precision)f.precision=q;f.id=B++;void 0!==f.yd&&(f.yd.forEach(function(l,z){f.c=f.c.replace(l,f.eb[z])}),f.yd.splice(0));f.jc=0;f.ta.forEach(function(l){f.jc+=4*l});var A=g(f.precision);f.fa=d(w,A+f.Aa,A+f.c);f.m={};f.f.forEach(function(l){f.m[l]=w.getUniformLocation(f.fa,l)});f.attributes={};f.ua=[];f.Ea.forEach(function(l){var z=w.getAttribLocation(f.fa,l);f.attributes[l]=z;f.ua.push(z)});if(f.g){w.useProgram(f.fa);
p=f;m=f.id;for(var K in f.g)w.uniform1i(f.m[K],f.g[K])}f.ea=!0}}function t(w){$a.Bf(P);m!==w.id&&(P.L(),m=w.id,p=w,H.useProgram(w.fa),w.ua.forEach(function(f){0!==f&&H.enableVertexAttribArray(f)}))}function r(w,f,A){h(w,f,A);w.useProgram(f.fa);w.enableVertexAttribArray(0);m=-1;return p=f}function n(){return{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1"],g:{u1:0}}}var k=[],m=-1,p=null,B=0,E=!1,q="highp",u=["u1"],C=["u0"],x={u1:0},e={u0:0},F={u1:0,u2:1},
N={u3:0},J={s0:n(),s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:u,g:x,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",f:["u1","u2"],g:F},s3:{c:"uniform sampler2D u1;uniform vec2 u4,u5;varying vec2 vv0;void main(){vec2 a=vv0*u4+u5;gl_FragColor=texture2D(u1,a);}",f:["u1","u4","u5"],g:x,s:!0},s4:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
f:u,g:x},s5:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","u2"],g:F},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:u,g:x},s7:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",f:u,g:x},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",
f:["u0","u4"],g:e},s9:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",f:["u0","u4"],g:e},s10:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",f:u,g:x},s11:{c:"uniform sampler2D u1,u6;uniform float u7;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u6,vv0);gl_FragColor=mix(b,a,u7*f);}",
f:["u1","u6","u7"],g:{u1:0,u6:1}},s12:{c:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u8)+texture2D(u1,vv0+u8*vec2(1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,1.)));}",f:["u1","u8"],g:x},s13:{c:"uniform sampler2D u1;uniform vec4 u9;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u9);gl_FragColor=j(a);}",
f:["u1","u9"],g:x},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:C,g:e,s:!0},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",f:C,g:e},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",f:C,g:e},
s17:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",f:C,g:e},s18:{c:"uniform sampler2D u0,u7,u10;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u7,vv0),d=texture2D(u10,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u7","u10"],g:{u0:0,u7:1,u10:2},s:!0},s19:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
f:C,g:e},s20:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",f:C,g:e,s:!0},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,e);float b=u12*u12;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u11","u12"],g:{u0:0,u11:1},s:!0},s22:{c:"uniform sampler2D u1;uniform vec2 u13;varying vec2 vv0;void main(){float a=u13.x*u13.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u13.y),f=floor(u13.x*fract(b*u13.y)),g=(f*u13.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
f:["u1","u13"],g:x},s23:{c:"uniform sampler2D u14,u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u16,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u14,b),f=texture2D(u15,c);gl_FragColor=d*f;}",f:["u14","u15","u16"],g:{u15:0,u14:1,u16:2},s:!0},s24:{c:"uniform float u17;uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec2 a=fract(vv0*u17);vec4 b=texture2D(u14,vv0),c=texture2D(u15,a);gl_FragColor=b*c;}",f:["u15","u14","u17"],g:{u15:0,u14:1}},s25:{c:"uniform float u17;uniform sampler2D u14,u15,u18,u19,u20,u21;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u17,l=floor(h),c=h-l;vec4 m=texture2D(u14,vv0),d=texture2D(u15,c),a=texture2D(u21,vv0);a=a*255.;vec4 n=texture2D(u18,c),o=texture2D(u19,c),p=texture2D(u20,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
f:"u14 u15 u17 u21 u18 u19 u20".split(" "),g:{u15:0,u14:1,u21:3,u18:4,u19:5,u20:6},s:!0},s26:{c:"uniform sampler2D u14,u15,u22;uniform float u17,u23,u24,u25;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u23*vv0),b=u23*vv0-a;float c=u17/u23;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u23;float k=u23*u25/u17;vec2 l=k*d,h=(l+f*u24)/u25,i=step(h,j);vec4 m=texture2D(u14,g),n=texture2D(u15,h),o=m*n*i.x*i.y,p=texture2D(u22,g);gl_FragColor=o*u24*u24+p;}",f:"u14 u15 u17 u23 u24 u25 u22".split(" "),
g:{u15:0,u14:1,u22:2}},s27:{c:"uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u14,vv0),b=texture2D(u15,vv0);gl_FragColor=a*b;}",f:["u14","u15"],g:{u15:0,u14:1},s:!0},s28:{c:"uniform sampler2D u1,u22;uniform float u26;varying vec2 vv0;void main(){gl_FragColor=texture2D(u22,vv0)+u26*texture2D(u1,vv0);}",f:["u1","u22","u26"],g:{u1:0,u22:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
f:u,g:x,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",f:["u1","u27"],g:x,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u27"],g:x,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
f:["u1","u2","u28"],g:F,s:!0},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",f:["u1","u2","u28"],g:F,s:!0},s34:{c:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u8*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*h),d=texture2D(u3,a+u8*i),j=texture2D(u3,a+u8),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
f:["u3","u8"],g:N},s35:{c:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*k),d=texture2D(u3,a+u8*l),g=texture2D(u3,a+u8),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u8*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u8*m),d=f(a+u8*2.),g=f(a+u8*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",f:["u3","u8"],g:N,s:!0},
s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",f:["u1"],g:x,precision:"lowp",s:!0},s37:{c:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u8)+2002./e*texture2D(u1,vv0-2.*u8)+3003./e*texture2D(u1,vv0-u8)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u8)+2002./e*texture2D(u1,vv0+2.*u8)+1001./e*texture2D(u1,vv0+3.*u8);gl_FragColor=a;}",f:["u8","u1"],g:x,precision:"lowp",
s:!0},s38:{c:"uniform sampler2D u1,u11,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u11,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",f:["u1","u11","u29"],g:{u1:0,u11:1,u29:2},s:!0}},Q={s39:{c:"uniform float u17,u30;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u22,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u17,xyTo=floor(vv0*u17+eps2);float weightSize=toSparsity*u17;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u17,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u17","u14","u15","u22","u30"],eb:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u17,u30,u25;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u22,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u25,xyTo=floor(vv0*u17+eps2);float weightSize=fromSparsity*u25;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u17;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u25,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u17 u25 u14 u15 u22 u30".split(" "),eb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},v=null,R=null,P={Xa:function(){return E},j:function(){if(!E){v=Ta(J,2);R=Ta(Q,2);q="highp";for(var w in v)h(H,v[w],w);L.set("s0");H.enableVertexAttribArray(0);E=!0}},rc:function(w){w.forEach(function(f){P.qc(f)})},qc:function(w){v[w.id]=w;h(H,w,w.id)},Qc:function(w,f,A){f||(f=w);v[f]=Object.create(R[w]);v[f].Pe=!0;R[w].eb&&R[w].eb.forEach(function(K,l){v[f].c=v[f].c.replace(new RegExp(K,"g"),A[l])});h(H,v[f],
f)},set:function(w){var f=v[w];f.s&&(f.s=!1,h(H,f,w));t(f)},za:function(w){return r(w,n(),"s41")},Zb:function(w){return r(w,{c:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",f:[],precision:"highp"},"s42")},qe:function(w){return"undefined"===typeof v[w]?!1:v[w].ea},L:function(){-1!==m&&(m=-1,p.ua.forEach(function(w){0!==w&&H.disableVertexAttribArray(w)}))},$b:function(){var w=0;p.ua.forEach(function(f,A){A=p.ta[A];H.vertexAttribPointer(f,A,H.FLOAT,!1,p.jc,w);w+=4*A})},bg:function(){H.enableVertexAttribArray(0)},
fb:function(){P.gb(H)},gb:function(w){w.vertexAttribPointer(p.ua[0],2,w.FLOAT,!1,8,0)},Hg:function(w,f){H.uniform1i(p.m[w],f)},J:function(w,f){H.uniform1f(p.m[w],f)},ga:function(w,f,A){H.uniform2f(p.m[w],f,A)},Ig:function(w,f){H.uniform2fv(p.m[w],f)},Bd:function(w,f){H.uniform3fv(p.m[w],f)},Jg:function(w,f,A,K){H.uniform3f(p.m[w],f,A,K)},Cf:function(w,f,A,K,l){H.uniform4f(p.m[w],f,A,K,l)},Cd:function(w,f){H.uniform4fv(p.m[w],f)},Kg:function(w,f){H.uniformMatrix2fv(p.m[w],!1,f)},Lg:function(w,f){H.uniformMatrix3fv(p.m[w],
!1,f)},Mg:function(w,f){H.uniformMatrix4fv(p.m[w],!1,f)},G:function(w,f){P.set(w);f.forEach(function(A){switch(A.type){case "4f":H.uniform4fv(p.m[A.name],A.value);break;case "3f":H.uniform3fv(p.m[A.name],A.value);break;case "2f":H.uniform2fv(p.m[A.name],A.value);break;case "1f":H.uniform1f(p.m[A.name],A.value);break;case "1i":H.uniform1i(p.m[A.name],A.value);break;case "mat2":H.uniformMatrix2fv(p.m[A.name],!1,A.value);break;case "mat3":H.uniformMatrix3fv(p.m[A.name],!1,A.value);break;case "mat4":H.uniformMatrix4fv(p.m[A.name],
!1,A.value)}})},mg:function(){return"lowp"},i:function(){H.disableVertexAttribArray(0);P.L();for(var w in v){var f=v[w];f.ea&&(f.ea=!1,H.deleteProgram(f.fa));f.Pe&&delete v[w]}k.forEach(function(A){H.deleteShader(A)});k.splice(0);B=0;E=!1;p=null;m=-1}};return P}(),H=null,hb=function(){function b(q){console.log("ERROR in ContextFF: ",q);return!1}function d(q){function u(){ab.i();bb.reset();x.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var C=document.createElement("canvas");C.setAttribute("width",5);C.setAttribute("height",5);var x=null;try{x=C.getContext("webgl2",q)}catch(e){return!1}if(!x)return!1;g(x);bb.Ac(x);q=bb.ub(x);if(!q.Y&&!q.$)return u(),!1;q=ab.wc(x,q);u();return q?!0:!1}function g(q){q.clearColor(0,0,0,0);q.disable(q.DEPTH_TEST);q.disable(q.BLEND);q.disable(q.DITHER);q.disable(q.STENCIL_TEST);q.disable(q.CULL_FACE);q.GENERATE_MIPMAP_HINT&&q.hint(q.GENERATE_MIPMAP_HINT,q.FASTEST);q.disable(q.SAMPLE_ALPHA_TO_COVERAGE);
q.disable(q.SAMPLE_COVERAGE);q.depthFunc(q.LEQUAL);q.clearDepth(1)}var h=null,t=null,r=null,n=null,k=!0,m=null,p=null,B=[],E={u:function(){return h.width},O:function(){return h.height},Pa:function(){return h},eg:function(){return H},aa:function(){return k},flush:function(){H.flush()},ve:function(){m||(m=new Uint8Array(h.width*h.height*4));H.readPixels(0,0,h.width,h.height,H.RGBA,H.UNSIGNED_BYTE,m);return m},gg:function(){return h.toDataURL("image/jpeg")},hg:function(){cb.K();t||(t=document.createElement("canvas"),
r=t.getContext("2d"));t.width=h.width;t.height=h.height;for(var q=E.ve(),u=r.createImageData(t.width,t.height),C=t.width,x=t.height,e=u.data,F=0;F<x;++F)for(var N=x-F-1,J=0;J<C;++J){var Q=4*(F*C+J),v=4*(N*C+J);e[Q]=q[v];e[Q+1]=q[v+1];e[Q+2]=q[v+2];e[Q+3]=q[v+3]}r.putImageData(u,0,0);return t.toDataURL("image/png")},fg:function(q){!t&&q&&(t=document.createElement("canvas"),r=t.getContext("2d"));var u=q?t:document.createElement("canvas");u.width=h.width;u.height=h.height;(q?r:u.getContext("2d")).drawImage(h,
0,0);return u},j:function(q){q=Object.assign({Z:null,Rb:null,Ha:null,yc:null,width:512,height:512,premultipliedAlpha:!1,Vc:!0,antialias:!1,debug:!1,Zf:!1},q);q.Z?(H=q.Z,h=q.Z.canvas):q.yc&&!q.Ha?h=document.getElementById(q.yc):q.Ha&&(h=q.Ha);h||(h=document.createElement("canvas"));h.width=q.width;h.height=q.height;if(H)k=H instanceof WebGL2RenderingContext;else{k=!0;var u={antialias:q.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:q.premultipliedAlpha,stencil:!1,depth:q.Vc};navigator&&
navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(u.antialias=!1);var C=d(u);!C&&u.antialias&&(u.antialias=!1,C=d(u));C&&(H=h.getContext("webgl2",u));H?k=!0:((H=h.getContext("webgl",u))||(H=h.getContext("experimental-webgl",u)),k=!1)}if(!H)return b("WebGL1 and 2 are not enabled");(n=H.getExtension("WEBGL_lose_context"))&&q.Rb&&(p=q.Rb,h.addEventListener("webglcontextlost",p,!1));if(!bb.j())return b("Not enough GL capabilities");g(H);L.j();T.j();if(!ab.wc(H,bb.te()))return b("Cannot filter float textures");
B.forEach(function(x){x(H)});B.splice(0);return!0},Uf:function(){return new Promise(function(q){H?q(H):B.push(q)})},i:function(){H&&(bb.i(),L.i(),ab.i());n&&p&&(h.removeEventListener("webglcontextlost",p,!1),n=p=null);H=m=r=t=h=null;B.splice(0)}};return E}(),$a=function(){function b(){null===d&&("undefined"!==typeof L?d=L:"undefined"!==typeof JEShaders&&(d=JEShaders))}var d=null;return{reset:function(){d=null},Bf:function(g){d!==g&&(d&&d.L(),d=g)},Xa:function(){return d.Xa()},fb:function(){return d.fb()},
gb:function(g){return d.gb(g)},$b:function(){return d.$b()},L:function(){return d.L()},set:function(g){b();return d.set(g)},za:function(g){b();return d.za(g)},Zb:function(g){b();return d.Zb(g)}}}(),U=function(){function b(l){H.bindTexture(H.TEXTURE_2D,l)}function d(l){w[0]=l;l=f[0];var z=l>>16&32768,I=l>>12&2047,S=l>>23&255;return 103>S?z:142<S?z|31744|((255==S?0:1)&&l&8388607):113>S?(I|=2048,z|(I>>114-S)+(I>>113-S&1)):z=(z|S-112<<10|I>>1)+(I&1)}function g(l){var z=new Uint16Array(l.length);l.forEach(function(I,
S){z[S]=d(I)});return z}function h(){if(null!==A.Db)return A.Db;var l=r(g([.5,.5,.5,.5]));return null===l?!0:A.Db=l}function t(){if(null!==A.Eb)return A.Eb;var l=r(new Uint8Array([127,127,127,127]));return null===l?!0:A.Eb=l}function r(l){if(!$a.Xa()||!x)return null;var z=null,I=Math.sqrt(l.length/4);try{var S=H.getError();if("FUCKING_BIG_ERROR"===S)return!1;z=K.instance({isFloat:!1,D:!0,array:l,width:I});S=H.getError();if(S!==H.NO_ERROR)return!1}catch(da){return!1}cb.K();H.viewport(0,0,I,I);H.clearColor(0,
0,0,0);H.clear(H.COLOR_BUFFER_BIT);$a.set("s0");z.uc(0);T.h(!0,!0);l=4*I*I;S=new Uint8Array(l);H.readPixels(0,0,I,I,H.RGBA,H.UNSIGNED_BYTE,S);I=!0;for(var ba=0;ba<l;++ba)I=I&&3>Math.abs(S[ba]-127);z.remove();cb.X();return I}var n=0,k=null,m=0,p=null,B=null,E=null,q=null,u=null,C=null,x=!1,e=[],F={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,v:null,Mc:null,Oe:!1,D:!1,
da:null,$a:4,Mb:0},N=!1,J=null,Q=null,v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],R=!1,P=!1,w=new Float32Array(1),f=new Int32Array(w.buffer),A={Db:null,Eb:null},K={j:function(){x||(u=[H.RGBA,null,H.RGBA,H.RGBA],C=[H.RGBA,null,H.RGBA,H.RGBA],k=[H.TEXTURE0,H.TEXTURE1,H.TEXTURE2,H.TEXTURE3,H.TEXTURE4,H.TEXTURE5,H.TEXTURE6,H.TEXTURE7],R="undefined"!==typeof JEContext,P="undefined"!==typeof bb,R&&JEContext.Bg()&&k.push(H.TEXTURE8,H.TEXTURE9),p=[-1,-1,-1,-1,-1,-1,-1,-1],q=[H.UNSIGNED_BYTE,H.FLOAT,H.FLOAT],
x=!0)},Ie:function(){if(!B){for(var l=new Float32Array(16384),z=0;16384>z;++z)l[z]=2*Math.random()-1;B={random:K.instance({isFloat:!0,isPot:!0,array:l,width:64}),Jd:K.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}K.Mf()},sg:function(){return B.Jd},Mf:function(){q[1]=bb.yb(H)},zf:function(){C=u=[H.RGBA,H.RGBA,H.RGBA,H.RGBA]},sd:function(l){L.set("s1");cb.K();var z=l.u(),I=l.O();H.viewport(0,0,z,I);l.b(0);T.h(!1,!1)},mf:function(l,z){K.sd(l);H.readPixels(0,0,l.u(),l.O(),H.RGBA,
H.UNSIGNED_BYTE,z)},pf:function(l,z){K.sd(l);return bb.Yb(0,0,l.u(),l.O(),z)},Hc:function(l,z,I,S,ba,da,X){l.activeTexture(l.TEXTURE0);var na=l.createTexture();l.bindTexture(l.TEXTURE_2D,na);ba=ba instanceof Float32Array?ba:new Float32Array(ba);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,
da);l.texImage2D(l.TEXTURE_2D,0,l.RGBA,I,S,0,l.RGBA,l.FLOAT,ba);l.bindTexture(l.TEXTURE_2D,null);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1);X&&(cb.X(),L.za(l));l.viewport(0,0,I,S);l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,z,0);l.bindTexture(l.TEXTURE_2D,na);X?T.h(!0,!0):T.Na(l);l.deleteTexture(na);x&&(p[0]=-1,E=null,n=0)},qb:function(l){l!==n&&(H.activeTexture(k[l]),n=l)},instance:function(l){var z;function I(){V=void 0!==y.v.videoWidth?y.v.videoWidth:y.v.width;Y=void 0!==
y.v.videoHeight?y.v.videoHeight:y.v.height}function S(G){var W=H.getError();if("FUCKING_BIG_ERROR"===W)return!1;H.texImage2D(H.TEXTURE_2D,0,ka,ia,ja,G);W=H.getError();W!==H.NO_ERROR&&ia!==H.RGBA&&(ia=H.RGBA,H.texImage2D(H.TEXTURE_2D,0,ka,ia,ja,G));return!0}function ba(){if(!db){b(oa);ua&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,ua);y.isPot?(H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,y.isMirrorX?H.MIRRORED_REPEAT:H.REPEAT),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,y.isMirrorY?H.MIRRORED_REPEAT:H.REPEAT)):
(H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,H.CLAMP_TO_EDGE));y.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&H.texParameterf(H.TEXTURE_2D,JEContext.jg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Qf);H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,y.isLinear?H.LINEAR:H.NEAREST);y.isLinear?H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,y.isMipmap&&!za?H.NEAREST_MIPMAP_LINEAR:H.LINEAR):H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,
y.isMipmap&&!za?H.NEAREST_MIPMAP_NEAREST:H.NEAREST);ia=u[y.$a-1];ka=C[y.$a-1];ja=q[M];if(bb.aa()){var G=bb.we();ia===H.RGBA&&ja===H.FLOAT?y.isMipmap||y.isLinear?ka=ab.ye(H):bb.xc()?G&&(ka=G):ka=H.RGBA16F||H.RGBA:ia===H.RGB&&ja===H.FLOAT&&G&&(ka=G,ia=H.RGBA)}if(y.D&&!y.isFloat||y.isFloat&&y.isMipmap&&ab.Se())ka=bb.xe(),ja=bb.yb(H);y.Mb&&(La=y.Mb);y.isSrgb&&4===y.$a&&(ia=JEContext.qg());if(y.v)S(y.v);else if(y.url)S(ya);else if(pa){G=pa;try{"FUCKING_BIG_ERROR"!==H.getError()&&(H.texImage2D(H.TEXTURE_2D,
0,ka,V,Y,0,ia,ja,G),H.getError()!==H.NO_ERROR&&(H.texImage2D(H.TEXTURE_2D,0,ka,V,Y,0,ia,ja,null),H.getError()!==H.NO_ERROR&&H.texImage2D(H.TEXTURE_2D,0,H.RGBA,V,Y,0,H.RGBA,H.UNSIGNED_BYTE,null)))}catch(Sb){H.texImage2D(H.TEXTURE_2D,0,ka,V,Y,0,ia,ja,null)}y.isKeepArray||(pa=null)}else G=H.getError(),"FUCKING_BIG_ERROR"!==G&&(H.texImage2D(H.TEXTURE_2D,0,ka,V,Y,0,ia,ja,null),G=H.getError(),G!==H.NO_ERROR&&(ia=H.RGBA,y.D&&ja!==H.FLOAT&&(ja=H.FLOAT,H.texImage2D(H.TEXTURE_2D,0,ka,V,Y,0,ia,ja,null))));if(y.isMipmap)if(!za&&
fa)fa.xb(),Ma=!0;else if(za){G=Math.log2(Math.min(V,Y));Ca=Array(1+G);Ca[0]=oa;for(var W=1;W<=G;++W){var la=Math.pow(2,W),aa=V/la;la=Y/la;var Aa=H.createTexture();b(Aa);H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.NEAREST);H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.NEAREST);H.texImage2D(H.TEXTURE_2D,0,ka,aa,la,0,ia,ja,null);b(null);Ca[W]=Aa}Ma=!0}b(null);p[n]=-1;ua&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!1);Ga=!0;y.da&&fa&&(y.da(fa),y.da=null)}}function da(){for(var G=V*Y,W=2*G,la=3*
G,aa=0;aa<G;++aa)ra[0][aa]=Ha[aa],ra[1][aa]=Ha[aa+G],ra[2][aa]=Ha[aa+W],ra[3][aa]=Ha[aa+la]}function X(){var G=V*Y*4;xa=[new Uint8Array(G),new Uint8Array(G),new Uint8Array(G),new Uint8Array(G)];ra=[new Float32Array(xa[0].buffer),new Float32Array(xa[1].buffer),new Float32Array(xa[2].buffer),new Float32Array(xa[3].buffer)];Na=new Uint8Array(4*G);Ha=new Float32Array(Na.buffer);Ia=!0}function na(){z=new Uint8Array(V*Y*4);eb=new Float32Array(z.buffer);Xa=!0}var y=Object.assign({},F,l),D=m++;null===y.isFlipY&&
(y.isFlipY=y.url||y.array?!0:!1);y.data&&(y.array="string"===typeof y.data?Za(y.data):y.isFloat?new Float32Array(y.data):new Uint8Array(y.data),y.isFlipY=!1);var M=0,ca=y.v?!0:!1,O=null,sa=null,fb=!1,Ya=null;y.D=y.D||y.isFloat;y.D&&(M=1);!y.Oe&&y.isFloat&&P&&!bb.xc()&&(y.isFloat=!1);y.isFloat&&(M=2);y.isAnisotropicFiltering&&R&&!JEContext.vg()&&(y.isAnisotropicFiltering=!1);var oa=y.Mc||H.createTexture(),ya=null,pa=!1,V=0,Y=0,Ga=!1,db=!1,Ia=!1,ra=null,xa=null,Na=null,Ha=null,ka=null,ia=null,ja=null,
ua=y.isFlipY,Bb=(l=y.D&&y.isMipmap)&&ab.Zd(),za=l&&Bb?!0:!1,Ca=null,La=-1,Ma=!1;var Xa=!1;var eb=z=null;y.width&&(V=y.width,Y=y.height?y.height:V);var fa={get:function(){return oa},u:function(){return V},O:function(){return Y},tg:function(){return y.url},wg:function(){return y.isFloat},yg:function(){return y.D},zg:function(){return y.isLinear},xb:function(){H.generateMipmap(H.TEXTURE_2D)},Xd:function(G,W){za?(G||(G=fa.Kc()),K.qb(W),b(Ca[G]),p[W]=-1):fa.b(W)},Kc:function(){-1===La&&(La=Math.log(V)/
Math.log(2));return La},se:function(G){if(za){G||(G=fa.Kc());L.set("s12");K.qb(0);for(var W=V,la=Y,aa=1;aa<=G;++aa)W/=2,la/=2,L.ga("u8",.25/W,.25/la),H.viewport(0,0,W,la),b(Ca[aa-1]),H.framebufferTexture2D(cb.Ra(),H.COLOR_ATTACHMENT0,H.TEXTURE_2D,Ca[aa],0),T.h(!1,1===aa);p[0]=-1}else fa.xb()},Gg:function(G){(ca=!(Array.isArray(G)||G.constructor===Float32Array||G.constructor===Uint8Array))?(pa=null,y.v=G,I()):pa=G},b:function(G){if(!Ga)return!1;K.qb(G);if(p[G]===D)return!1;b(oa);p[G]=D;return!0},uc:function(G){H.activeTexture(k[G]);
n=G;b(oa);p[G]=D},l:function(){E=fa;H.framebufferTexture2D(cb.Ra(),H.COLOR_ATTACHMENT0,H.TEXTURE_2D,oa,0)},P:function(){E=fa;H.viewport(0,0,V,Y);H.framebufferTexture2D(cb.Ra(),H.COLOR_ATTACHMENT0,H.TEXTURE_2D,oa,0)},hc:K.hc,resize:function(G,W){V=G;Y=W;ba()},clone:function(G){G=K.instance({width:V,height:Y,D:y.D,isFloat:y.isFloat,isLinear:y.isLinear,isMirrorY:y.isMirrorY,isFlipY:G?!ua:ua,isPot:y.isPot});$a.set("s0");cb.X();G.l();H.viewport(0,0,V,Y);fa.b(0);T.h(!0,!0);return G},Df:function(){H.viewport(0,
0,V,Y)},remove:function(){H.deleteTexture(oa);db=!0;e.splice(e.indexOf(fa),1);fa=null},refresh:function(){fa.uc(0);ua&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!0);ca?H.texImage2D(H.TEXTURE_2D,0,ka,ia,ja,y.v):H.texImage2D(H.TEXTURE_2D,0,ka,V,Y,0,ia,ja,pa);ua&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!1)},Xb:function(){Ia||X();H.readPixels(0,0,V,4*Y,H.RGBA,H.UNSIGNED_BYTE,Na);da();return ra},hf:function(){Ia||X();return bb.Yb(0,0,V,4*Y,Na).then(function(){da();return ra})},kf:function(){Xa||na();H.readPixels(0,
0,V,Y,H.RGBA,H.UNSIGNED_BYTE,z);return eb},jf:function(){Xa||na();return bb.Yb(0,0,V,Y,z)},vb:function(G){cb.K();L.set("s13");fa.b(0);if(G)H.viewport(0,0,V,Y),L.Cf("u9",.25,.25,.25,.25),T.h(!1,!0);else for(G=0;4>G;++G)H.viewport(0,Y*G,V,Y),L.Cd("u9",v[G]),T.h(!1,0===G)},ic:function(G){var W=ja===q[0]&&!t();b(oa);ua&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!0);W?(fb||(O=document.createElement("canvas"),O.width=V,O.height=Y,sa=O.getContext("2d"),Ya=sa.createImageData(V,Y),fb=!0),Ya.data.set(G),sa.putImageData(Ya,
0,0),H.texImage2D(H.TEXTURE_2D,0,ka,ia,ja,O)):H.texImage2D(H.TEXTURE_2D,0,ka,V,Y,0,ia,ja,G);p[n]=D;ua&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!1)},Pg:function(G,W){b(oa);W&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!0);H.texImage2D(H.TEXTURE_2D,0,ka,ia,ja,G);p[n]=D;W&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!1)},Fg:function(G,W){var la=V*Y,aa=4*la;G=y.D?G?"RGBE":"JSON":"RGBA";W&&(G=W);W=bb.aa()&&!1;var Aa=null;switch(G){case "RGBE":Aa="s43";break;case "JSON":Aa=W?"s0":"s13";break;case "RGBA":case "RGBAARRAY":Aa=
"s7"}Ia||("RGBA"===G||"RGBE"===G||"RGBAARRAY"===G?(xa=new Uint8Array(aa),Ia=!0):"JSON"!==G||W||X());cb.K();L.set(Aa);fa.b(0);aa=null;if("RGBA"===G||"RGBE"===G||"RGBAARRAY"===G){H.viewport(0,0,V,Y);T.h(!0,!0);H.readPixels(0,0,V,Y,H.RGBA,H.UNSIGNED_BYTE,xa);if("RGBAARRAY"===G)return{data:xa};N||(J=document.createElement("canvas"),Q=J.getContext("2d"),N=!0);J.width=V;J.height=Y;la=Q.createImageData(V,Y);la.data.set(xa);Q.putImageData(la,0,0);aa=J.toDataURL("image/png")}else if("JSON"===G)if(W)aa=new Float32Array(la),
H.viewport(0,0,V,Y),T.h(!0,!0),H.readPixels(0,0,V,Y,H.RGBA,H.FLOAT,aa);else{for(aa=0;4>aa;++aa)H.viewport(0,Y*aa,V,Y),L.Cd("u9",v[aa]),T.h(!aa,!aa);fa.Xb();aa=Array(la);for(W=0;W<la;++W)aa[4*W]=ra[0][W],aa[4*W+1]=ra[1][W],aa[4*W+2]=ra[2][W],aa[4*W+3]=ra[3][W]}return{format:G,data:aa,width:V,height:Y,isMirrorY:y.isMirrorY,isFlipY:"RGBA"===G?y.isFlipY:!y.isFlipY}}};y.isMipmap&&!za&&Ga&&!Ma&&(fa.xb(),Ma=!0);if(y.url)b(oa),H.texImage2D(H.TEXTURE_2D,0,H.RGBA,1,1,0,H.RGBA,H.UNSIGNED_BYTE,null),ya=new Image,
ya.a="Anonymous",ya.crossOrigin="Anonymous",ya.src=y.url,ya.onload=function(){V=ya.width;Y=ya.height;ba()};else if(y.v){var gb=function(){I();V?ba():setTimeout(gb,1)};gb()}else y.array?(y.D&&!y.isFloat?y.array instanceof Uint16Array?(pa=y.array,ba()):h()?(pa=g(y.array),ba()):(ba(),K.Hc(H,oa,fa.u(),fa.O(),y.array,ua,!0)):(pa=y.isFloat?y.array instanceof Float32Array?y.array:new Float32Array(y.array):y.array instanceof Uint8Array?y.array:new Uint8Array(y.array),ba()),y.isKeepArray||(pa&&pa!==y.array&&
(pa=null),delete y.array)):y.Mc?Ga=!0:ba();fa.pg=fa.u;y.da&&Ga&&(y.da(fa),y.da=null);e.push(fa);return fa},K:function(l){l!==n&&(H.activeTexture(k[l]),n=l);p[l]=-1;b(null)},Tf:function(l){B.random.b(l)},hc:function(){E=null;H.framebufferTexture2D(cb.Ra(),H.COLOR_ATTACHMENT0,H.TEXTURE_2D,null,0)},reset:function(){0!==n&&H.activeTexture(k[0]);for(var l=0;l<k.length;++l)p[l]=-1;n=-1},Eg:function(){n=-1},If:function(){for(var l=0;l<k.length;++l)K.K(l)},Ic:function(){B&&(B.random.remove(),B.Jd.remove())},
Og:function(l,z){if("RGBA"===l.format||"RGBE"===l.format){var I=new Image;I.src=l.data;I.onload=function(){K.instance({isMirrorY:l.isMirrorY,isFlipY:l.isFlipY,isFloat:!1,v:I,da:function(S){if("RGBA"===l.format)z(S);else{var ba=l.width,da=l.height,X=K.instance({isMirrorY:l.isMirrorY,isFloat:!0,width:ba,height:da,isFlipY:l.isFlipY});cb.X();H.viewport(0,0,ba,da);L.set("s44");X.l();S.b(0);T.h(!0,!0);K.K(0);z(X);bb.flush();setTimeout(S.remove,50)}}})}}else"JSON"===l.format?z(K.instance({isFloat:!0,isFlipY:l.isFlipY,
width:l.width,height:l.height,array:new Float32Array(l.data)})):z(!1)},ce:g,i:function(){E&&(cb.X(),K.hc(),cb.K());K.If();e.slice(0).forEach(function(l){l.remove()});e.splice(0);x=!1;m=0;"undefined"!==typeof ab&&ab.i();B=null}};return K}(),ib={instance:function(b){var d=[U.instance(b),U.instance(b)],g=[d[1],d[0]],h=g,t={Ad:function(r){h[1].l();h[0].b(r);t.Gd()},wf:function(r){h[1].P();h[0].b(r);t.Gd()},Gd:function(){h=h===d?g:d},refresh:function(){h[0].refresh();h[1].refresh()},b:function(r){h[0].b(r)},
Sf:function(r){h[1].b(r)},Be:function(){return h[0]},ng:function(){return h[1]},ic:function(r){h[0].ic(r);h[1].ic(r)},remove:function(){h[0].remove();h[1].remove();h=null},sync:function(){t.wf(0);L.set("s0");T.h(!1,!1)}};return t}},T=function(){function b(m){var p={W:null,B:null};p.W=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,p.W);m.bufferData(m.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),m.STATIC_DRAW);p.B=m.createBuffer();m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,p.B);m.bufferData(m.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),m.STATIC_DRAW);return p}var d=null,g=0,h=!1,t=[],r=-2,n=-2,k={reset:function(){n=r=-2},j:function(){h||(d=b(H),k.rb(),h=!0)},instance:function(m){var p=g++,B=m.B?m.B.length:0,E="undefined"===typeof m.mode?H.STATIC_DRAW:m.mode,q=H.createBuffer();H.bindBuffer(H.ARRAY_BUFFER,q);H.bufferData(H.ARRAY_BUFFER,m.W instanceof Float32Array?m.W:new Float32Array(m.W),E);r=p;var u=null,C=null,x=null;if(m.B){u=H.createBuffer();H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,u);var e=null;65536>m.B.length?
(e=Uint16Array,C=H.UNSIGNED_SHORT,x=2):(e=Uint32Array,C=H.UNSIGNED_INT,x=4);e=m.B instanceof e?m.B:new e(m.B);H.bufferData(H.ELEMENT_ARRAY_BUFFER,e,E);n=p}var F={Yd:function(N){r!==p&&(H.bindBuffer(H.ARRAY_BUFFER,q),r=p);N&&$a.$b()},Vd:function(){n!==p&&(H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,u),n=p)},bind:function(N){F.Yd(N);F.Vd()},$f:function(){H.drawElements(H.TRIANGLES,B,C,0)},ag:function(N,J){H.drawElements(H.TRIANGLES,N,C,J*x)},remove:function(){H.deleteBuffer(q);m.B&&H.deleteBuffer(u);F=null}};
t.push(F);return F},rb:function(){-1!==r&&(H.bindBuffer(H.ARRAY_BUFFER,d.W),r=-1);-1!==n&&(H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,d.B),n=-1)},h:function(m,p){m&&T.rb();p&&$a.fb();H.drawElements(H.TRIANGLES,3,H.UNSIGNED_SHORT,0)},Na:function(m){m=m||H;var p=b(m);m.bindBuffer(m.ARRAY_BUFFER,p.W);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,p.B);$a.gb(m);m.clear(m.COLOR_BUFFER_BIT);m.drawElements(m.TRIANGLES,3,m.UNSIGNED_SHORT,0);m.flush();m.bindBuffer(m.ARRAY_BUFFER,null);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,null);
m.deleteBuffer(p.W);m.deleteBuffer(p.B);k.reset();h&&(k.rb(),$a.fb())},Ic:function(){var m=H,p=d;m.deleteBuffer(p.W);m.deleteBuffer(p.B)},i:function(){k.Ic();t.forEach(function(m){m.remove()});H.bindBuffer(H.ARRAY_BUFFER,null);H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,null);k.reset();h=!1;t.splice(0);g=0}};return k}(),cb=function(){var b=null,d=null,g=null,h=!1,t=[],r={A:-2,Gc:1},n={Xa:function(){return h},j:function(){if(!h){b=H.createFramebuffer();var k=bb.aa();d=k&&H.DRAW_FRAMEBUFFER?H.DRAW_FRAMEBUFFER:
H.FRAMEBUFFER;g=k&&H.READ_FRAMEBUFFER?H.READ_FRAMEBUFFER:H.FRAMEBUFFER;h=!0}},kg:function(){return d},ze:function(){return g},Ra:function(){return H.FRAMEBUFFER},og:function(){return r},dg:function(){return b},instance:function(k){void 0===k.Uc&&(k.Uc=!1);var m=k.qa?k.qa:null,p=k.width,B=void 0!==k.height?k.height:k.width,E=b,q=null,u=!1,C=!1,x=0;m&&(p=p?p:m.u(),B=B?B:m.O());var e={zd:function(){u||(E=H.createFramebuffer(),u=!0,x=r.Gc++)},Qd:function(){e.zd();e.l();q=H.createRenderbuffer();H.bindRenderbuffer(H.RENDERBUFFER,
q);H.renderbufferStorage(H.RENDERBUFFER,H.DEPTH_COMPONENT16,p,B);H.framebufferRenderbuffer(d,H.DEPTH_ATTACHMENT,H.RENDERBUFFER,q);H.clearDepth(1)},bind:function(F,N){x!==r.A&&(H.bindFramebuffer(d,E),r.A=x);m&&m.l();N&&H.viewport(0,0,p,B);F&&H.clear(H.COLOR_BUFFER_BIT|H.DEPTH_BUFFER_BIT)},Rf:function(){x!==r.A&&(H.bindFramebuffer(d,E),r.A=x)},clear:function(){H.clear(H.COLOR_BUFFER_BIT|H.DEPTH_BUFFER_BIT)},Xf:function(){H.clear(H.COLOR_BUFFER_BIT)},Yf:function(){H.clear(H.DEPTH_BUFFER_BIT)},Df:function(){H.viewport(0,
0,p,B)},l:function(){x!==r.A&&(H.bindFramebuffer(d,E),r.A=x)},rtt:function(F){m=F;r.A!==x&&(H.bindFramebuffer(H.FRAMEBUFFER,E),r.A=x);F.l()},K:function(){H.bindFramebuffer(d,null);r.A=-1},resize:function(F,N){p=F;B=N;q&&(H.bindRenderbuffer(H.RENDERBUFFER,q),H.renderbufferStorage(H.RENDERBUFFER,H.DEPTH_COMPONENT16,p,B))},remove:function(){E===b||C||(H.bindFramebuffer(d,E),H.framebufferTexture2D(d,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,null,0),q&&H.framebufferRenderbuffer(d,H.DEPTH_ATTACHMENT,H.RENDERBUFFER,
null),H.bindFramebuffer(d,null),H.deleteFramebuffer(E),q&&H.deleteRenderbuffer(q));C=!0}};k.Uc&&e.Qd();t.push(e);return e},K:function(){H.bindFramebuffer(d,null);r.A=-1},Jf:function(){H.bindFramebuffer(d,null);H.clear(H.COLOR_BUFFER_BIT|H.DEPTH_BUFFER_BIT);bb.Ed();r.A=-1},reset:function(){r.A=-2},X:function(){0!==r.A&&(H.bindFramebuffer(d,b),r.A=0)},clear:function(){bb.Ed();H.clear(H.COLOR_BUFFER_BIT)},i:function(){n.K();t.forEach(function(k){k.remove()});null!==b&&(H.deleteFramebuffer(b),b=null);
n.reset();h=!1;t.splice(0);r.Gc=1}};return n}(),bb=function(){function b(){t="undefined"===typeof hb?JEContext:hb;r=!0}function d(e,F){for(var N=0;N<e.length;++N){var J=F.getExtension(e[N]);if(J)return J}return null}function g(){null!==u.kb&&(clearInterval(u.kb),u.kb=null);u.la=!1}function h(){u.va&&(H.deleteSync(u.va),u.va=null)}var t=null,r=!1,n={Wc:!1,bc:null,cc:null,Zc:!1,Re:!1,dc:null,$c:!1,ec:null,Xc:!1,sb:null,Le:!1,tb:null,Me:!1},k=null,m={Y:!0,$:!0,wb:!0,rd:!1},p=null,B=!0,E=null,q=null,
u={la:!1,ka:null,va:null,Bb:-1,S:null,kb:null},C="undefined"===typeof window?{}:window,x={j:function(){if(r)return!0;x.reset();r||b();var e=H;if(!k.Wc){k.bc=x.Dc(e);C.GL_EXT_FLOAT=k.bc;k.Zc=k.bc?!0:!1;if(k.Zc||x.aa())k.cc=x.Ec(e),k.Re=k.cc?!0:!1,C.GL_EXT_FLOATLINEAR=k.cc;k.Wc=!0}if(!k.Xc){k.dc=x.La(e);k.dc&&(k.$c=!0,C.GL_EXT_HALFFLOAT=k.dc);if(k.$c||x.aa())k.ec=x.Fc(e),C.GL_EXT_HALFFLOATLINEAR=k.ec;k.ug=k.ec?!0:!1;k.Xc=!0}k.sb=x.Bc(e);k.Le=k.sb?!0:!1;C.GL_EXT_COLORBUFFERFLOAT=k.sb;k.tb=x.Cc(e);k.Me=
k.tb?!0:!1;C.GL_EXT_COLORBUFFERHALFFLOAT=k.tb;cb.j();U.j();if(!x.he())return!1;T.j();U.Ie();return!0},reset:function(){k=Object.assign({},n);p=Object.assign({},m)},u:function(){r||b();return t.u()},O:function(){r||b();return t.O()},aa:function(){r||b();return t.aa()},Ac:function(e){x.Bc(e);x.Cc(e);x.Dc(e);x.Ec(e);x.La(e);x.Fc(e)},Bc:d.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Cc:d.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float",
"OES_color_buffer_half_float"]),Dc:d.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Ec:d.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),La:d.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Fc:d.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),yb:function(e){var F=x.La(e);return F&&F.HALF_FLOAT_OES?
F.HALF_FLOAT_OES:e.HALF_FLOAT||e.FLOAT},we:function(){return q||H.RGBA32F||H.RGBA},xe:function(){return E||H.RGBA16F||H.RGBA},te:function(){return p},xc:function(){return p.Y},Wf:function(){return p.$},Vf:function(){return p.wb},$d:function(){return p.rd&&B},Id:function(e){B=e;!e&&u.la&&(h(),H.bindBuffer(u.S,null),u.la=!1)},Ag:function(){return u.la},ib:function(e,F,N){function J(){e.bindTexture(e.TEXTURE_2D,null);e.bindFramebuffer(Q,null);e.deleteTexture(P);e.deleteFramebuffer(R)}var Q=e.FRAMEBUFFER,
v=e.NEAREST,R=e.createFramebuffer();e.bindFramebuffer(Q,R);var P=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,P);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,v);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,v);e.texImage2D(e.TEXTURE_2D,0,F,3,3,0,e.RGBA,N,null);e.framebufferTexture2D(e.FRAMEBUFFER,
e.COLOR_ATTACHMENT0,e.TEXTURE_2D,P,0);if(e.checkFramebufferStatus(e.READ_FRAMEBUFFER||e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE)return J(),!1;$a.Zb(e);e.clearColor(0,0,0,0);e.viewport(0,0,3,3);e.disable(e.DEPTH_TEST);e.clear(e.COLOR_BUFFER_BIT);T.Na(e);e.bindFramebuffer(Q,null);$a.za(e);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,P);T.Na(e);F=new Uint8Array(36);e.readPixels(0,0,3,3,e.RGBA,e.UNSIGNED_BYTE,F);J();for(N=0;36>N;++N)if(3!==N%4&&3<Math.abs(F[N]-127))return!1;return!0},ub:function(e){var F=
{Y:!1,$:!1};e.disable(e.BLEND);e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);e.RGBA32F&&x.ib(e,e.RGBA32F,e.FLOAT)&&(F.Y=!0,q=e.RGBA32F);!F.Y&&x.ib(e,e.RGBA,e.FLOAT)&&(F.Y=!0,q=e.RGBA);var N=x.yb(e);E=null;e.RGBA16F&&x.ib(e,e.RGBA16F,N)&&(F.$=!0,E=e.RGBA16F);!F.$&&x.ib(e,e.RGBA,N)&&(F.$=!0,E=e.RGBA);return F},ie:function(){var e=cb.instance({width:2});e.zd();var F=U.instance({width:2,isFloat:!0,$a:3});e.l();F.l();x.flush();H.checkFramebufferStatus(cb.ze())!==H.FRAMEBUFFER_COMPLETE?(U.zf(),p.wb=
!1):p.wb=!0;e.remove();F.remove()},je:function(){var e=!1;x.aa()&&(e="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(F){return"undefined"!==typeof H[F]}));p.rd=e},he:function(){var e=x.ub(H);Object.assign(p,e);if(!p.Y&&!p.$)return!1;x.ie();x.je();return!0},lf:function(e,F,N,J,Q){H.readPixels(e,F,N,J,H.RGBA,H.UNSIGNED_BYTE,Q);return Promise.resolve(Q,!1)},Yb:function(e,F,N,J,Q,v){if(!x.$d())return x.lf(e,F,N,J,Q);null===
u.ka&&(u.S=H.PIXEL_PACK_BUFFER,u.ka=H.createBuffer(),u.Bb=-1);H.bindBuffer(u.S,u.ka);Q.byteLength!==u.Bb&&(H.bufferData(u.S,Q.byteLength,H.STREAM_READ),u.Bb=Q.byteLength);H.readPixels(e,F,N,J,H.RGBA,H.UNSIGNED_BYTE,0);u.va=H.fenceSync(H.SYNC_GPU_COMMANDS_COMPLETE,0);x.flush();var R=!1;return new Promise(function(P,w){function f(){if(!u.la)return g(),w(),!1;switch(H.clientWaitSync(u.va,0,0)){case H.TIMEOUT_EXPIRED:case H.WAIT_FAILED:return!1;default:return g(),h(),H.getBufferSubData(u.S,0,Q),H.bindBuffer(u.S,
null),P(Q,R),!0}}g();u.la=!0;f()||(v&&!R&&(R=!0,v()),u.kb=setInterval(f,0))})},Ed:function(){H.viewport(0,0,x.u(),x.O())},flush:function(){H.flush()},i:function(){g();h();U.i();cb.i();T.i();null!==u.ka&&(H.deleteBuffer(u.ka),u.ka=null);$a.reset();r=!1}};return x}(),ab=function(){function b(v,R,P,w){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,w?e.NEAREST_MIPMAP_NEAREST:e.LINEAR);var f=null;if(null!==P)try{f=e.getError();if("FUCKING_BIG_ERROR"===f)return!1;e.texImage2D(e.TEXTURE_2D,0,v,4,4,0,
e.RGBA,R,P);f=e.getError();if(f!==e.NO_ERROR)return!1}catch(A){return!1}w&&e.generateMipmap(e.TEXTURE_2D);e.clear(e.COLOR_BUFFER_BIT);T.Na(e);f=e.getError();if("FUCKING_BIG_ERROR"===f)return!1;e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,B);f=e.getError();f===e.INVALID_OPERATION&&"undefined"!==typeof e.PIXEL_PACK_BUFFER&&(e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,B),f=e.getError());if(f!==e.NO_ERROR)return!1;P=!0;for(w=0;16>w;++w)P=P&&4>Math.abs(B[w]-127);P&&
(m.kd=R,m.Tc=v);return P}function d(v,R){return F.Y&&b(v,e.FLOAT,new Float32Array(E),R)?(k=n.pc,!0):!1}function g(v,R,P){if(!F.$)return!1;var w=U.ce(E),f=bb.La(e);if(f&&f.HALF_FLOAT_OES&&b(v,f.HALF_FLOAT_OES,w,R)||e.HALF_FLOAT&&b(v,e.HALF_FLOAT,w,R))return k=n.sa,!0;w=new Float32Array(E);if(b(v,e.FLOAT,w,R))return k=n.sa,!0;e.bindTexture(e.TEXTURE_2D,P);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.UNSIGNED_BYTE,null);e.bindFramebuffer(m.Ja,Q);U.Hc(e,P,2,2,w,!1,!1);e.bindFramebuffer(m.Ja,null);
e.bindTexture(e.TEXTURE_2D,P);return b(v,null,null,R)?(k=n.sa,!0):!1}function h(v,R,P){p=!0;if(g(v,!0,P)||d(R,!0))return!0;p=!1;return g(v,!1,P)||d(R,!1)?!0:!1}function t(v){if(k===n.L){e=v||H;k=n.RGBA8;p=!0;bb.Ac(e);F||(F=bb.ub(e));cb.reset();Q=e.createFramebuffer();m.Ja=e.DRAW_FRAMEBUFFER||e.FRAMEBUFFER;e.bindFramebuffer(m.Ja,null);e.clearColor(0,0,0,0);e.viewport(0,0,2,2);L.L();N=L.za(e);v=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,v);e.texParameteri(e.TEXTURE_2D,
e.TEXTURE_WRAP_S,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);J=v;var R=v=e.RGBA,P=e.RGBA16F,w=e.RGBA32F;w&&(v=w);P&&(R=P);if((P||w)&&h(R,v,J))return r(),!0;v=R=e.RGBA;if(h(R,v,J))return r(),!0;k=n.RGBA8;r();return!1}}function r(){e.deleteProgram(N.fa);e.deleteTexture(J);J=N=null}for(var n={L:-1,pc:3,sa:2,RGBA8:0},k=n.L,m={kd:null,Tc:null,Ja:null},p=!0,B=new Uint8Array(16),E=Array(64),q=0;4>q;++q)for(var u=0;4>u;++u){var C=
0===(u+q)%2?1:0,x=4*q+u;E[4*x]=C;E[4*x+1]=C;E[4*x+2]=C;E[4*x+3]=C}var e=null,F=null,N=null,J=null,Q=null;return{Zd:function(v){t(v);return p},wc:function(v,R){k===n.L&&(typeof("undefined"!==R)&&(F=R),t(v));return k!==n.RGBA8},xg:function(v){t(v);return k===n.pc},Se:function(v){t(v);return k===n.sa},lg:function(v){t(v);return m.kd},ye:function(v){t(v);return m.Tc},i:function(){e=null;p=!0;k=n.L;F=null}}}(),jb={instance:function(b){var d=U.instance(b.alpha),g=U.instance(b.beta);return{le:function(){d.b(1);
g.b(2)}}}},mb={instance:function(b){var d=null,g=!1,h=!1,t=null,r=!1,n=!1,k=null,m="undefined"===typeof b.preprocessing?!1:b.preprocessing,p="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(g=!0,c&&void 0!==c.Ud&&(b.mask=c.Ud+b.mask),d=U.instance({isFloat:!1,url:b.mask}));var B=!1;b.customInputShader&&(B="s45",L.qc({name:"_",id:B,c:b.customInputShader,Ng:["uSource"],precision:"lowp"}),L.G(B,[{type:"1i",name:"_",value:0}]));switch(m){case "sobel":k="s32";r=!0;break;case "meanNormalization":k=
"s33";r=!0;break;case "grayScale":k="s29";r=!1;break;case "grayScaleTilt":k="s30";n=!0;r=!1;break;case "rgbGrayTilt":k="s31";n=!0;r=!1;break;case "copy":k=B?B:"s0";break;case "inputLightRegulation":k=B?B:"s29";t=kb.instance({Sc:p,jd:b.size,gd:b.nBlurPass,Wa:!1});h=!0;break;case "inputMix0":k="none";t=lb.instance({ia:p,Ld:b.varianceMin,vc:b.blurKernelSizePx,Wa:!1});h=!0;break;case "direct":case "none":k="abort";break;default:k="s4"}n&&L.G(k,[{name:"u27",type:"1f",value:b.tilt}]);g&&(k+="Mask");var E=
U.instance({isFloat:!1,isPot:!1,width:b.size}),q={u:function(){return p},zb:function(){return q.u()},Fe:function(){return h?t.Ab():E},I:function(u){cb.X();"abort"!==k&&("none"!==k&&(L.set(k),r&&L.J("u28",1/b.size),E.P(),g&&d.b(1),T.h(!1,!1),E.b(0),u=E),h&&t.process(u))},i:function(){E.remove();g&&d.remove()}};return q}},sb={instance:function(b){function d(l){t.forEach(function(z,I){r[I][0]=l[0][z];r[I][1]=l[1][z];r[I][2]=l[2][z];r[I][3]=l[3][z]});return r}"undefined"===typeof b.normalize&&(b.normalize=
!1);var g={input:null,Fa:null,Fb:null,V:null,ab:null,Ub:null,Vb:null},h=null,t=[],r=[],n=!1,k=null,m=!0,p=-1,B=b.isReorganize?b.isReorganize:!1,E=b.kernelsCount?!0:!1,q=b.dynPelu?jb.instance(b.dynPelu):!1,u=q?!0:!1,C={isEnabled:!1};b.Qe?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.cb.zb(),m=!1):"full"===b.connectivityUp&&(b.sparsity=b.cb.zb());var x={elu:"s16",elu01:"s17",relu:"s15",arctan:"s19",sigmoid:"s14",copy:"s0",softplus:"s20",dynPelu:"s18"}[b.activation],e=b.sparsity*b.sparsity,
F=!1,N=b.size,J="";if(b.maxPooling){switch(b.maxPooling.size){case 2:J="s34";break;case 4:J="s35"}F=!0;N/=b.maxPooling.size;g.Ub=U.instance({isFloat:!0,isPot:!1,width:N})}var Q=void 0!==b.$e&&b.$e?!0:!1,v=null,R=null,P=null;if(Q){v="s46"+b.index.toString();L.Qc("s46",v,[((b.normalization.n-1)/2).toFixed(1)]);L.G(v,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u8",value:[1/b.size,1/b.size]},{type:"1f",name:"u7",value:b.normalization.alpha},{type:"1f",name:"u10",value:b.normalization.beta},{type:"1f",
name:"u31",value:b.normalization.k}]);var w={isFloat:!0,isPot:!0,width:b.size};R=U.instance(w);P=U.instance(w)}var f=-1,A=null;m&&(g.V=U.instance({isFloat:!0,isPot:!1,width:b.size}));g.Fa=U.instance(b.bias);var K={u:function(){return b.size},zb:function(){return N},Jc:function(){return b.classesCount},Wd:function(l){h.b(l)},ef:function(){b.remap&&b.remap.isEnabled&&(C={isEnabled:!0,We:U.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,
isPot:!1}),Za:b.remap.layers.map(function(l){return b.parent.Ce(l)}),depth:b.remap.depth})},Af:function(){switch(b.connectivityUp){case "direct":A=nb.instance(b.connectivity);break;case "square":A=ob.instance(b.connectivity);break;case "squareFast":A=pb.instance(b.connectivity,b.activation);break;case "full":A=qb.instance(b.connectivity);break;case "conv":p=b.kernelsCount,A=rb.instance(b.connectivity),B&&(g.ab=U.instance({width:N,isFloat:!0,isFlipY:!1,isPot:!1}))}if(A.pa){var l=b.size*b.sparsity;
f=Math.log(l/b.size)/Math.log(2);g.input=U.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:l,Mb:f});g.Fb=U.instance({isFloat:!0,isPot:!0,width:b.size})}},I:function(l,z){h=l;A.pa?(g.input.P(),E&&g.Fa.b(2),A.I(C),g.input.b(0),g.input.se(f),g.Fb.P(),E?L.set("s0"):(L.set("s28"),L.J("u26",e),g.Fa.b(1)),g.input.Xd(f,0),T.h(!1,!1),L.set(x),Q?R.l():g.V.l(),g.Fb.b(0),u&&q.le(),T.h(!1,!1)):(g.V.P(),g.Fa.b(1),A.I());Q&&(L.set(v),P.l(),R.b(0),T.h(!1,!1),L.set("s47"),L.J("u7",1),g.V.l(),P.b(1),T.h(!1,!1));if(m)return F?
(g.Ub.P(),g.V.b(0),L.set(J),L.ga("u8",1/b.size,1/b.size),T.h(!1,!1),z=g.Ub):z=g.V,z.b(0),B&&(g.ab.l(),L.set("s22"),L.ga("u13",p,N/p),T.h(!1,!1),z=g.ab,g.ab.b(0)),z;var I=g.V;b.normalize&&(L.set("gpuRawAvg"===n?"s9":"s8"),L.J("u4",1/b.size),g.Vb.P(),g.V.b(0),T.h(!1,!1),I=g.Vb);l=null;switch(n){case "cpuRGBA2Float":I.vb(!1);z?l=K.ff(I).then(k):(I=K.gf(I),k(I));break;case "cpuMeanFloat":I.vb(!0);if(z)l=I.jf().then(k);else{I=I.kf();for(var S=0;S<I.length;++S);k(I)}break;case "gpuRawAvg":case "gpuRaw":I.b(0);
case "none":null!==k&&k(I)}z&&null===l&&(l=Promise.resolve());return l},de:function(l){l&&(n=l.Wb||"none",k=l.Tb||null);g.V=U.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});l="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var z=0,I=0,S=0;z<l;++z)t.push(I+(b.size-1-S)*b.size),r.push([-1,-1,-1,-1]),++I,I===b.size&&(I=0,++S);b.normalize&&(g.Vb=U.instance({isFloat:!0,isPot:!0,width:b.size}))},ff:function(l){return l.hf().then(d)},gf:function(l){l=l.Xb();
d(l);return r},i:function(){for(var l in g){var z=g[l];z&&z.remove()}A&&(A.i(),A=null)}};b.cb&&K.Af(b.cb);return K}};
function tb(b){var d=null,g=null,h=null,t=0;this.j=function(r){this.yf(r.Za);h.de({Wb:r.Wb,Tb:r.Tb})};this.Ce=function(r){return d[r]};this.yf=function(r){var n=null;t=r.length;d=r.map(function(k,m){k=Object.assign({},k,{index:m,parent:this,cb:n,Qe:m===t-1});return n=m=0===m?mb.instance(k):sb.instance(k)});g=d[0];h=d[t-1];d.forEach(function(k,m){0!==m&&k.ef()})};this.I=function(r){var n=r;d.forEach(function(k){n=k.I(n,!1)});return n};this.Ae=function(){return g.u()};this.Ge=function(){return h.u()};
this.Ab=function(){return h.Fe()};this.Jc=function(){return h.Jc()};this.i=function(){d&&(d.forEach(function(r){r.i()}),h=g=d=null,t=0)};"undefined"!==typeof b&&this.j(b)}
var nb={instance:function(b){var d=U.instance(b.weights);return{pa:!0,Qa:function(){return 1},i:function(){d.remove()},He:function(){return d},I:function(){L.set("s27");d.b(1);T.h(!1,!1)}}}},qb={instance:function(b){var d=b.fromLayerSize,g=U.instance(b.weights);return{pa:!0,Qa:function(){return d},i:function(){g.remove()},I:function(h){if(h.isEnabled){L.set("s25");h.We.b(3);var t,r=Math.min(h.Za.length,h.depth);for(t=0;t<r;++t)h.Za[t].Wd(4+t)}else L.set("s24");L.J("u17",b.toLayerSize);g.b(1);T.h(!1,
!1)}}}},ob={instance:function(b){for(var d=b.fromLayerSize,g=b.toLayerSize,h=b.toSparsity,t=h*g,r=t/d,n=d/g,k=0,m=0,p=0,B=Array(h*g*h*g*4),E=Array(h*g*h*g*4),q=Array(d*d),u=0;u<q.length;++u)q[u]=0;u=Math.floor(h/2);for(var C=.5/g,x=.5/d,e=.5/t,F=0;F<g;++F)for(var N=Math.round(F*n),J=0;J<g;++J){var Q=Math.round(J*n),v=F/g,R=J/g;v+=C;R+=C;for(var P=0;P<h;++P){var w=N+P-u;0>w&&(w+=d);w>=d&&(w-=d);for(var f=0;f<h;++f){var A=k/t,K=m/t,l=Q+f-u;0>l&&(l+=d);l>=d&&(l-=d);var z=w/d,I=l/d;K=1-K-1/t;z+=x;I+=
x;A+=e;K+=e;var S=F*h+P,ba=J*h+f;ba=g*h-ba-1;S=ba*g*h+S;B[4*S]=A;B[4*S+1]=K;B[4*S+2]=z;B[4*S+3]=I;I=q[l*d+w]++;S=I%r;z=w*r+S;l=l*r+(I-S)/r;l=d*r-1-l;l=l*d*r+z;E[4*l]=A;E[4*l+1]=K;E[4*l+2]=v;E[4*l+3]=R;++k>=t&&(k=0,++m);++p}}}q=null;var da=U.instance(b.weights);delete b.weights.data;var X=U.instance({width:t,isFloat:!0,array:new Float32Array(E),isPot:!0});E=null;var na=U.instance({width:t,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;return{pa:!0,Qa:function(){return r},i:function(){X.remove();
na.remove();da.remove()},I:function(){L.set("s23");da.b(1);na.b(2);T.h(!1,!1)}}}},rb={instance:function(b){var d=b.kernelsCount,g=b.toSparsity,h=g*b.toLayerSize/b.fromLayerSize,t=U.instance(b.weights);return{pa:!0,Qa:function(){return h},rg:function(){return g},He:function(){return t},i:function(){t.remove()},I:function(){L.set("s26");L.J("u23",d);L.J("u24",g);L.J("u17",b.toLayerSize);L.J("u25",b.fromLayerSize);t.b(1);T.h(!1,!1)}}}},pb={instance:function(b,d){var g=b.fromLayerSize,h=b.toLayerSize,
t=b.toSparsity,r=b.stride?b.stride:1,n=t*h/g,k=h<g,m=g/h,p=U.instance(b.weights),B="s48"+[g.toString(),h.toString(),t.toString(),r.toString(),d].join("_");L.qe(B)||(b=Va(d),h=[{type:"1f",name:"u17",value:h},{type:"1f",name:"u30",value:r}],k&&h.push({type:"1f",name:"u25",value:g}),g=[(k?n:t).toFixed(1),b],k&&g.push(m.toFixed(1)),L.Qc(k?"s40":"s39",B,g),L.G(B,h.concat([{type:"1i",name:"u15",value:0},{type:"1i",name:"u22",value:1},{type:"1i",name:"u14",value:3}])));return{pa:!1,Qa:function(){return n},
i:function(){p.remove()},I:function(){L.set(B);p.b(3);T.h(!1,!1)}}}},kb={instance:function(b){var d=b.gd?b.gd:3,g=b.Sc?b.Sc:64,h=b.jd?b.jd:64,t=b.Wa?!0:!1;b={isFloat:!1,width:g,isPot:!1,isFlipY:!1};var r=U.instance(b),n=U.instance(b),k=U.instance(b),m=U.instance(b),p=U.instance({isFloat:!0,width:h,isPot:!1,isFlipY:!1}),B=1/g;return{process:function(E){L.set("s36");m.l();T.h(t,!1);L.set("s37");for(var q=0;q<d;++q)r.l(),L.ga("u8",B,0),T.h(t,!1),k.l(),m.b(0),T.h(t,!1),n.l(),r.b(0),L.ga("u8",0,B),T.h(t,
!1),m.l(),k.b(0),T.h(t,!1),q!==d-1&&n.b(0);L.set("s38");p.l();E.b(0);n.b(1);m.b(2);T.h(t,!1);p.b(0)},Ab:function(){return p}}}},lb={instance:function(b){function d(m){return U.instance({isFloat:m,width:g.ia,isPot:!1,isFlipY:!1})}var g=Object.assign({Ld:.1,vc:9,ia:128,Wa:!1},b),h=d(!1),t=[d(!1),d(!1),d(!1)],r=[d(!1),d(!1),d(!1)],n=d(!0),k=[h,r[0],r[1]];b={u1:0};L.rc([{id:"s50",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",
g:b,f:["u1"],precision:"lowp"},{id:"s51",name:"_",c:"uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u32;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u32*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",Math.round((g.vc-1)/2).toFixed(2)).replace("2.2222",(1/g.ia).toFixed(6)),g:b,f:["u1","u32"],precision:"lowp"},{id:"s52",name:"_",c:"uniform sampler2D u33,u34,u35,u36;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);varying vec2 vv0;void main(){vec3 a=texture2D(u33,vv0).rgb;float c=texture2D(u34,vv0).r,d=texture2D(u35,vv0).r,h=texture2D(u36,vv0).r,i=a.r*a.r;vec3 b=vec3(c,d,h),j=max(g*f,abs(i-b*b)),k=sqrt(j);gl_FragColor=vec4(a.r,(a-b)/k);}".replace("1.1111",
g.Ld.toFixed(4)),g:{u33:0,u34:1,u35:2,u36:3},f:["u33","u34","u35","u36"],precision:"highp"}]);return{process:function(){L.set("s50");h.P();T.h(g.Wa,!1);L.set("s51");for(var m=0;3>m;++m)L.ga("u32",1,0),t[m].l(),k[m].b(0),T.h(!1,!1),L.ga("u32",0,1),r[m].l(),t[m].b(0),T.h(!1,!1);L.set("s52");n.l();h.b(0);r[0].b(1);r[1].b(2);r[2].b(3);T.h(!1,!1);n.b(0)},Ab:function(){return n}}}};function ub(b,d){b[d]=!0;b.setAttribute(d,"true")}
function vb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function wb(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return b&&b.length&&2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}function xb(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function yb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function zb(b){if(!b)return b;var d=null;if(b.video){var g=function(h){return h&&"object"===typeof h?Object.assign({},h):h};d={};"undefined"!==typeof b.video.width&&(d.width=g(b.video.width));"undefined"!==typeof b.video.height&&(d.height=g(b.video.height));"undefined"!==typeof b.video.facingMode&&(d.facingMode=g(b.video.facingMode))}d={audio:b.audio,video:d};"undefined"!==typeof b.deviceId&&Ab(d,b.deviceId);return d}
function Ab(b,d){d&&(b.video=b.video||{},b.video.deviceId={exact:d},b.video.facingMode&&delete b.video.facingMode)}function Cb(b){var d=b.video.width;b.video.width=b.video.height;b.video.height=d;return b}
function Db(b){function d(q){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(u,C){return Math.abs(u-q)-Math.abs(C-q)})}function g(q){var u=zb(b);q=q(u);t.push(q);h(q)}function h(q){if(q.video&&q.video.facingMode&&q.video.facingMode.exact){var u=q.video.facingMode.exact;q=zb(q);delete q.video.facingMode.exact;q.video.facingMode.ideal=u;t.push(q)}}var t=[];if(!b||!b.video)return t;h(b);if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var r=
d(b.video.width.ideal).slice(0,3),n=d(b.video.height.ideal).slice(0,3),k={},m=0;for(k.ca=void 0;m<r.length;k={ca:k.ca},++m){k.ca=r[m];var p={},B=0;for(p.ba=void 0;B<n.length;p={ba:p.ba},++B)if(p.ba=n[B],k.ca!==b.video.width.ideal||p.ba!==b.video.height.ideal){var E=Math.max(k.ca,p.ba)/Math.min(k.ca,p.ba);E<4/3-.1||E>16/9+.1||g(function(q,u){return function(C){C.video.width.ideal=q.ca;C.video.height.ideal=u.ba;return C}}(k,p))}}}g(function(q){return Cb(q)})}b.video.width&&b.video.height&&(b.video.width.ideal&&
b.video.height.ideal&&g(function(q){delete q.video.width.ideal;delete q.video.height.ideal;return q}),g(function(q){delete q.video.width;delete q.video.height;return q}));b.video.facingMode&&(g(function(q){delete q.video.facingMode;return q}),b.video.width&&b.video.height&&g(function(q){Cb(q);delete q.video.facingMode;return q}));t.push({audio:b.audio,video:!0});return t}
function Eb(b){try{var d=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(h){d=window.innerHeight>window.innerWidth}if(d&&b&&b.video){d=b.video.width;var g=b.video.height;d&&g&&d.ideal&&g.ideal&&d.ideal>g.ideal&&(b.video.height=d,b.video.width=g)}}
function Fb(b){b.volume=0;ub(b,"muted");if(xb()){if(1===b.volume){var d=function(){b.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){b.volume=0;ub(b,"muted")},5)}}
function Gb(b,d,g,h){function t(n){r||(r=!0,g(n))}var r=!1;navigator.mediaDevices.getUserMedia(h).then(function(n){function k(){setTimeout(function(){if(b.currentTime){var p=b.videoWidth,B=b.videoHeight;if(0===p||0===B)t("VIDEO_NULLSIZE");else{p&&(b.style.width=p.toString()+"px");B&&(b.style.height=B.toString()+"px");p={ae:null,Ef:null,Xe:null};try{var E=n.getVideoTracks()[0];E&&(p.Xe=E,p.ae=E.getCapabilities(),p.Ef=E.getSettings())}catch(q){}xb()||vb()?b.parentNode&&null!==b.parentNode?(r||d(b,n,
p),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),Fb(b),r||d(b,n,p),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";Fb(b);setTimeout(function(){b.play()},100)},80)):r||d(b,n,p)}}else t("VIDEO_NOTSTARTED")},700)}function m(){b.removeEventListener("loadeddata",m,!1);var p=b.play();Fb(b);"undefined"===typeof p?k():p.then(function(){k()}).catch(function(){t("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==
typeof b.srcObject?b.srcObject=n:(b.src=window.URL.createObjectURL(n),b.videoStream=n);Fb(b);b.addEventListener("loadeddata",m,!1)}).catch(function(n){t(n)})}
function Hb(b,d,g){var h=yb()?document.createElement("video"):!1;if(h)if(yb()){if(g&&g.video){if(vb()){var t=wb();0!==t[0]&&(12>t[0]||12===t[0]&&2>t[1])&&Eb(g)}g.video.width&&g.video.width.ideal&&(h.style.width=g.video.width.ideal+"px");g.video.height&&g.video.height.ideal&&(h.style.height=g.video.height.ideal+"px")}ub(h,"autoplay");ub(h,"playsinline");g&&g.audio?h.volume=0:ub(h,"muted");Gb(h,b,function(){function r(k){if(0===k.length)d("INVALID_FALLBACKCONSTRAINTS");else{var m=k.shift();Gb(h,b,function(){r(k)},
m)}}var n=Db(g);r(n)},g)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}
var Ib=function(){function b(C,x,e,F,N,J,Q){if(!q)if(Q===J.length)N();else{switch(J[Q]){case "A":e();break;case "D":C();break;case "S":x().then(function(v,R){u.Hd();b(C,x,e,R?null:F,N,J,++Q)}).catch(function(v){N();throw v;});return;case "R":F&&F()}b(C,x,e,F,N,J,++Q)}}var d={n:5,Ob:1,ed:0,Oa:[35,49],Ka:[2,200],k:.7,Lf:200,df:.05},g=-1,h=null,t=-1,r=-1,n=0,k=-1,m=-1,p=0,B=0,E=d.Ka[1],q=!0,u={De:function(){switch(g){case -1:return-1;case 0:return m+h.ed;case 1:return p}},ue:function(C){return Math.pow(Math.min(Math.max(k,
0),h.n-1)/(h.n-1),C||1)},j:function(C){h=Object.assign({},d,C);k=m=h.Ob;g=0;u.reset()},Hd:function(C){C=("undefined"===typeof C?Date.now():C)||0;var x=Math.min(Math.max(C-B,h.Ka[0]),h.Ka[1]);E=x;B=C;var e=-1===t?0:h.k;t=Math.min(Math.max(1E3/x,5),120)*(1-e)+t*e;C-r>h.Lf&&5<++n&&(x=h.k,k=k*(1-x)+(t<h.Oa[0]?m-1:t>h.Oa[1]?m+1:m)*x,Math.abs(k-m)>1-h.df&&(x=Math.min(Math.max(Math.round(k),0),h.n-1),x!==m&&(k=m=x,t=(h.Oa[1]-h.Oa[0])/2)),r=C)},td:function(C,x,e,F,N,J){q=!1;b(C,x,e,F,N,J,0)},stop:function(){q=
!0},xf:function(C){p=C;g=1},Kf:function(){g=0;u.reset()},reset:function(){E=d.Ka[1];r=t=-1;n=0},ig:function(){return E}};return u}(),Jb=function(){function b(){g(x+u.Nb);e.port.postMessage("DONE")}function d(){var f=u.M;v.isEnabled&&(f=Math.max(f,v.M));Q.Da=0===f?N(g):N(h)}function g(f){J.ma&&null!==C&&(f-=x,f=Math.min(Math.max(f,u.zc[0]),u.zc[1]),x+=f,r(),v.isEnabled&&v.ya&&J.U&&x-v.Jb>u.nc&&(p(),v.Jb=x),C(x))}function h(f){J.ma&&(Q.timeout=window.setTimeout(g.bind(null,f),u.M))}function t(){C=null;
J.ma=!1;r()}function r(){Q.Da&&(window.cancelAnimationFrame(Q.Da),Q.Da=null);Q.timeout&&(window.clearTimeout(Q.timeout),Q.timeout=null)}function n(f){f&&!J.U?(J.U=!0,F&&Ib.Kf(),e.port.postMessage("STOP"),bb.Id(!0),d()):!f&&J.U&&(J.U=!1,F&&Ib.xf(1),bb.Id(!1),e.port.postMessage("START"))}function k(f){f.target.hidden?P():R()}function m(f,A,K){A=f.createShader(A);f.shaderSource(A,K);f.compileShader(A);return A}function p(){v.ya=!1;var f=v.Z,A=v.Sa,K=v.Ta,l=v.S;f.uniform1f(v.Nc,Math.random());v.na?A.beginQueryEXT(l,
K):f.beginQuery(l,K);f.drawElements(f.POINTS,1,f.UNSIGNED_SHORT,0);v.na?A.endQueryEXT(l):f.endQuery(l);bb.flush();E().then(function(z){z=u.Nd*u.lc*1E3/z;v.lb=(v.lb+1)%u.ra;v.Lb[v.lb]=z;if(++v.ad>u.ra){v.Ya.set(v.Lb);v.Ya.sort(function(S,ba){return S-ba});z=v.Ya[Math.floor(u.ra/2)];v.Ma=Math.max(v.Ma,z);var I=0;for(I=0;I<v.fc&&!(z>v.Ma*(1-(u.mc[I]+u.Od*(I>=v.jb?1:-1))));++I)I===v.fc-1&&++I;I!==v.jb&&(console.log("THERMAL THROTTLING LEVEL = "+I.toString()),v.jb=I,v.M=0===I?0:u.Md[I-1],u.kc&&u.kc(I))}v.ya=
!0}).catch(function(){v.ya=!0})}function B(f){var A=v.Z,K=v.Sa,l=v.Ta,z=!1;v.na?z=K.cg(l,K.QUERY_RESULT_AVAILABLE_EXT):z=A.getQueryParameter(l,A.QUERY_RESULT_AVAILABLE);A=A.getParameter(K.GPU_DISJOINT_EXT);z?f(!A):setTimeout(B.bind(null,f),.1)}function E(){return new Promise(function(f,A){B(function(K){if(K){K=v.Z;var l=v.Sa,z=v.Ta;K=v.na?l.getQueryObjectEXT(z,l.QUERY_RESULT_EXT):K.getQueryParameter(z,K.QUERY_RESULT);f(K)}else A()})})}var q={Yc:!0,zc:[1,200],Nb:20,M:0,Pd:!1,lc:50,Nd:240,nc:3E3,ra:3,
mc:[.2,.35,.5],Od:.05,Md:[8,20,40],kc:null},u=null,C=null,x=0,e=null,F=!1,N=null,J={ea:!1,U:!0,Ib:!1,Hb:!1,Gb:!1,ma:!1},Q={Da:null,timeout:null},v={isEnabled:!1,ya:!1,Z:null,Sa:null,Ta:null,S:null,Nc:null,na:!0,jb:0,fc:0,M:0,Jb:0,ad:0,Lb:null,Ya:null,lb:0,Ma:0},R=n.bind(null,!0),P=n.bind(null,!1),w={j:function(f){u=Object.assign(q,f);Object.assign(J,{U:!0,ea:!0,ma:!1});N=window.requestPostAnimationFrame||window.requestAnimationFrame;if(u.Pd){f=document.createElement("canvas");f.setAttribute("width",
"1");f.setAttribute("height","1");var A={antialias:!1};f=f.getContext("webgl2",A)||f.getContext("webgl",A);if(A=f.getExtension("EXT_disjoint_timer_query")||f.getExtension("EXT_disjoint_timer_query_webgl2")){v.Z=f;v.Sa=A;v.isEnabled=!0;v.na=A.beginQueryEXT?!0:!1;var K=m(f,f.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),l=m(f,f.FRAGMENT_SHADER,"precision lowp float;uniform float u37;void main(){vec4 a=u37*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
u.lc.toString())),z=f.createProgram();f.attachShader(z,K);f.attachShader(z,l);f.linkProgram(z);K=f.getAttribLocation(z,"a0");v.Nc=f.getUniformLocation(z,"u37");f.useProgram(z);f.enableVertexAttribArray(K);z=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,z);f.bufferData(f.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),f.STATIC_DRAW);f.vertexAttribPointer(K,4,f.FLOAT,!1,16,0);z=f.createBuffer();f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,z);f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),f.STATIC_DRAW);
f.disable(f.DEPTH_TEST);f.disable(f.DITHER);f.disable(f.STENCIL_TEST);f.viewport(0,0,1,1);z=v.na?A.createQueryEXT():f.createQuery();v.Ta=z;v.S=A.TIME_ELAPSED_EXT||f.TIME_ELAPSED;v.jb=0;v.fc=u.mc.length;v.M=0;v.Jb=-u.nc;v.Lb=new Float32Array(u.ra);v.Ya=new Float32Array(u.ra);v.Ma=0;v.lb=0;v.ad=0;v.ya=!0}}if(u.Yc){f=!1;try{if("undefined"===typeof SharedWorker){var I=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
u.Nb.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),S=new Worker(I);S.addEventListener("message",b);e={ld:S,port:S};J.Ib=!0}else{var ba=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
u.Nb.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),da=new SharedWorker(ba);da.port.start();da.port.addEventListener("message",b);e={ld:da,port:da.port};J.Hb=!0}f=!0}catch(X){}f&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",k):(window.addEventListener("blur",P),window.addEventListener("focus",R)),J.Gb=
!0)}F="undefined"!==typeof Ib},i:function(){t();J.Gb&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",k):(window.removeEventListener("blur",P),window.removeEventListener("focus",R)),J.Gb=!1);J.Hb?(e.port.close(),J.Hb=!1):J.Ib&&(e.ld.terminate(),J.Ib=!1);Object.assign(J,{U:!0,ea:!1,ma:!1});C=null},Cg:function(){return J.U},update:function(f){Object.assign(u,f)},td:function(f){J.ea||w.j({});r();J.ma=!0;C=f;J.U&&d()},stop:t};return w}(),Kb=function(){var b={hd:4,bb:[1.5,
1.5,2],ha:[.1,.1,.1],vd:1,ia:-1,Cb:-1,Gf:2,cf:1,xd:!0,oe:.8},d=null,g=[],h=[0],t=[.5,.5,1];return{j:function(r){d=Object.assign({},b,r);g.splice(0);r=d.bb[0]*d.ha[0];var n=d.bb[1]*d.ha[1],k=1/(1+d.bb[2]*d.ha[2]),m=d.vd*Math.min(d.ia,d.Cb),p=m/d.ia;m/=d.Cb;var B=.5*d.oe;B*=B;for(var E=0;E<d.hd;++E){var q=Math.pow(k,E),u=p*q,C=m*q;q=u*d.cf;var x=u*r,e=C*n;u/=2;C/=2;for(var F=1+(1-u-u)/x,N=1+(1-C-C)/e,J=0;J<N;++J)for(var Q=C+J*e,v=Q-.5,R=0;R<F;++R){var P=u+R*x,w=P-.5;w*w+v*v>B||g.push([P,Q,q])}}d.xd&&
g.sort(function(f,A){var K=f[0]-.5;f=f[1]-.5;var l=A[0]-.5;A=A[1]-.5;return K*K+f*f-(l*l+A*A)})},get:function(r){var n=g.length;if(0===n)return t;for(;r>=h.length;)h.push(0);h[r]>=n&&(h[r]=0);var k=g[Math.floor(h[r])];h[r]=(h[r]+1/d.Gf)%n;return k},reset:function(){for(var r=g.length/h.length,n=0;n<h.length;++n)h[n]=Math.floor(n*r)}}}(),Lb=function(){var b=0,d=null,g=null,h=null,t=null;return{j:function(r,n){b=r.length;d=n;g=r;h=new Float32Array(b);t=new Float32Array(b)},Ee:function(){return t},Ff:function(r,
n,k){r.forEach(function(m,p){var B=Math.min(1,g[p]*k*(n+.33*(1-n)));m=B*m+(1-B)*h[p];h[p]=m;m=d[p](m);m=Math.min(Math.max(m,0),1);t[p]=m})}}}(),Z={VERSION:"1.3.1",ja:[],ob:!1,pb:!1,nb:!1,Ca:!0,Ba:!1,ready:!1,initialized:!1},Mb={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280,isAudio:!0},c={neuralNetworkPath:"jeelizFaceExpressionsNNC.json",oc:"../../",M:0,width:512,height:512,Hf:30,wd:[.6,5.8],ha:[.06,
.08,.15],vf:.7,tf:2,uf:[2,2,2],threshold:.7,me:.08,re:.02,Sd:[.03,1],Pf:20,Ke:!1,mb:[2,7],F:{Oc:[3,7],quality:[0,6],position:[0,7],rotation:[5,7]},Qb:11,fd:1,Ye:1,sc:[.1,.01],qf:[.4,-.7,-.4],rf:[.3,0,0],ke:!1,Td:.001,tc:[Math.PI/10,Math.PI/6],nd:[.1,.4],od:[.009,.02],pd:[.1,.2],Pb:5,Pc:.1,Rd:[.2,.2,.15,.15,.15,.15,.5,.2,.3,.3,.2],Ze:[Ua.bind(null,.1,.7),Ua.bind(null,.1,.7),Ua.bind(null,.05,.4),Ua.bind(null,.05,.4),Ua.bind(null,.05,.6),Ua.bind(null,.05,.6),Ua.bind(null,.1,.5),Ua.bind(null,.3,.7),Ua.bind(null,
.7,.8),Ua.bind(null,.7,.8),Ua.bind(null,.15,.6)]};Z.get_nMorphs=function(){return c.Qb};var Nb=null,Ob=null,Pb=null,Qb=[];
function Rb(){function b(){1===++I&&(Lb.j(c.Rd,c.Ze),d(),Z.ready=!0,Z.ja.forEach(function(D){D()}),Z.ja.splice(0,Z.ja.length),g(),I=0)}function d(){N=new Float32Array(c.Qb);J=new Float32Array(c.Qb);Q=new Uint8Array(C*C*4);Z.get_morphTargetInfluences=function(){return N};Z.get_morphTargetInfluencesStabilized=function(){return Lb.Ee()};Z.set_morphUpdateCallback=function(D){v=D};Z.get_rotation=function(){return w};Z.get_positionScale=function(){var D=e.Fd.Be();D.vb(!1);D=D.Xb();K[0]=1-D[1][0];K[1]=D[2][0];
K[2]=D[3][0]*x[0];return K};Z.get_rotationStabilized=function(){return A};Z.switch_sleep=function(D){ba!==S.ac||D?ba=D?S.ac:S.play:g()};Z.on_detect=function(D){D(da.T);da.Sb.push(D)};Z.is_detected=function(){return da.T};Z.set_animateDelay=function(D){q=D;Jb.update({M:q})}}function g(){ba!==S.play&&(ba=S.play,Jb.stop(),h())}function h(){var D,M;return Pa(new Oa(new Ea(function(ca){switch(ca.a){case 1:a:{if("VIDEO"===z.element.nodeName){var O=z.element.currentTime-na;0>O&&(na=z.element.currentTime);
if(1E3*O<c.Pf)break a;na+=O}z.qa.refresh();O=y.Lc();O[0]===z.Ia[0]&&O[1]===z.Ia[1]||y.Kd()}D=Ib.De();M=0;case 2:if(!(M<D)){ca.a=4;break}O=e;var sa=u;L.set("s54");cb.X();O.Ua.P();z.qa.b(0);O.hb.b(1);T.h(!1,!1);O.Ua.b(0);sa.I(O.Ua);c.Ke?O=U.pf(R,Q).then(t):(U.mf(R,Q),t(),O=Promise.resolve());ca.a=3;return{value:O};case 3:++M;ca.a=2;break;case 4:O=e,cb.X(),F.P(),L.set("s57"),O.hb.b(0),T.h(!1,!1),O=Ib.ue(),l=3*(1-O)+1*O,Ib.Hd(),Z.Ca&&(cb.Jf(),L.set("s53"),z.qa.b(0),T.h(!1,!1),H.enable(H.BLEND),H.blendFunc(H.SRC_ALPHA,
H.ONE),F.b(0),T.h(!1,!1),H.disable(H.BLEND)),H.flush(),ba!==S.ac&&Jb.td(h),ca.a=0}})))}function t(){k();if(!c.ke&&da.T)for(var D=0;3>D;++D){var M=n(D+c.F.rotation[0],c.F.rotation[1]);M=(2*M-1)*c.qf[D];M+=c.rf[D];P[D]=M}r();D=Date.now();M=D-X.cd;var ca=n(c.F.quality[0],c.F.quality[1]);X.md=Ua(c.nd[0],c.nd[1],ca);ca=n(c.F.position[0],c.F.position[1]);var O=n(c.F.position[0]+1,c.F.position[1]),sa=n(c.F.position[0]+2,c.F.position[1]);X.ud=1-Ua(c.pd[0],c.pd[1],Math.sqrt(ca*ca+O*O+sa*sa)/M);ca=X.oa[0]-
P[0];O=X.oa[1]-P[1];sa=X.oa[2]-P[2];M=Math.sqrt(ca*ca+O*O+sa*sa)/M;X.oa[0]=P[0];X.oa[1]=P[1];X.oa[2]=P[2];X.qd=1-Ua(c.od[0],c.od[1],M);X.N=X.md*X.ud*X.qd;X.cd=D;X.bd[X.Kb]=X.N;X.Kb=(X.Kb+1)%c.Pb;for(D=0;D<c.Pb;++D)X.N=Math.min(X.bd[D],X.N);Lb.Ff(N,X.N,l,J);v&&v(X.N,l);if(da.T)for(D=c.sc[1]*X.N+c.sc[0]*(1-X.N),D*=l,M=0;3>M;++M)w[M]=D*P[M]+(1-D)*w[M],A[M]=w[M];else D=Date.now()*c.Td,f[0]=c.tc[0]*Math.sin(D),f[1]=c.tc[1]*Math.cos(D),A[0]=f[0],A[1]=f[1],A[2]=f[2]}function r(){var D=n(c.F.Oc[0],c.F.Oc[1]);
da.Va=c.Pc*D+(1-c.Pc)*da.Va;.6<da.Va&&!da.T?(da.Sb.forEach(function(M){M(!0)}),da.T=!0):.4>da.Va&&da.T&&(da.Sb.forEach(function(M){M(!1)}),da.T=!1)}function n(D,M){D+=C*M;return(Q[4*D]+Q[4*D+1]+Q[4*D+2]+Q[4*D+3])/1020}function k(){N.forEach(function(D,M){if(da.T){var ca=(c.fd+M)%C,O=c.Ye+Math.floor((c.fd+M)/C);O=C-1-O;ca+=C*O;O=Q.slice(4*ca,4*ca+4);ca=(O[0]+O[1]+O[2]+O[3])/1020;O=c.re*Math.sqrt((O[0]*O[0]+O[1]*O[1]+O[2]*O[2]+O[3]*O[3])/1020-ca*ca);N[M]=D>ca-O&&D<ca+O?D:ca}else N[M]=0})}function m(D){u=
new tb({Za:D.layers,Wb:"gpuRaw",Tb:function(M){var ca=e;ca.hb.Ad(1);H.viewport(0,0,1,1);L.set("s55");L.J("u38",X.N);L.Bd("u39",Kb.get(0));L.Bd("u40",c.ha);T.h(!1,!1);ca.Fd.Ad(1);L.set("s56");L.J("u38",X.N);ca.hb.b(0);T.h(!1,!1);R=M}});D=u.Ae();D!==E&&(E=D,y.Rc(),e.Ua.resize(E,E),y.Dd());C=u.Ge();b()}var p=-1,B=-1,E=64,q=c.M,u=null,C=0,x=null,e={},F=null,N=null,J=null,Q=null,v=null,R=null,P=[0,0,0],w=[0,0,0],f=[0,0,0],A=[0,0,0],K=[0,0,0],l=1,z={Of:[.5,.5],Nf:[.5,.5],element:null,qa:null,Ia:[-1,-1]},
I=0,S={ge:-4,af:-3,Dg:-2,ac:-1,play:0},ba=S.af,da={Va:0,T:!1,Sb:[]},X={N:1,ud:1,md:1,qd:1,oa:[0,0,0],cd:Date.now(),bd:new Float32Array(c.Pb),Kb:0},na=0,y={Rc:function(){p=c.width;B=c.height;Kb.j({bb:c.uf,hd:c.tf,ia:p,Cb:B,vd:c.vf,ha:c.ha,xd:!0});x=[1,p/B]},Dd:function(){L.G("s53",[{type:"1i",name:"u1",value:0}]);L.G("s54",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u42",value:x}]);L.G("s57",[{type:"1i",name:"u41",value:0},{type:"2f",name:"u42",value:x},{type:"3f",
name:"u43",value:[0,.5,1]}]);L.G("s55",[{type:"1i",name:"u44",value:0},{type:"1i",name:"u41",value:1},{type:"1f",name:"u45",value:c.wd[0]},{type:"1f",name:"u46",value:c.wd[1]},{type:"1f",name:"u47",value:c.Hf},{type:"1f",name:"u48",value:c.threshold},{type:"1f",name:"u49",value:c.me},{type:"1f",name:"u50",value:x[0]}]);L.G("s56",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u6",value:1},{type:"2f",name:"u51",value:c.Sd}])},ee:function(){L.rc([{id:"s53",name:"_",Aa:"attribute vec2 a0;uniform vec2 u52,u53;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u53+u52*a0;}",
Ea:["a0"],ta:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u52","u53"],precision:"lowp"},{id:"s54",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",Aa:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42,u52,u53;const vec2 f=vec2(.25,.5),i=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u41,f);vec2 b=a.gb,c=a.a*u42,d=a0*.5+e,h=b+(d-e)*c;vv0=u53+u52*2.*(h-.5),gl_Position=vec4(a0,0.,1.);}",
Ea:["a0"],ta:[2],f:["u1","u41","u42","u52","u53"],precision:"lowp"},{id:"s55",name:"_",Aa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u44,u41;uniform vec3 u39,u40;uniform float u45,u46,u47,u48,u50,u38,u49;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 g=texture2D(u44,vec2(.4375,.9375)),h=texture2D(u44,vec2(.5625,.9375));float i=dot(g-h,e);bool j=i>u48;vec4 a=texture2D(u41,vec2(.5,.5));j?a.r=2.:a.r>u47?a.r=0.:a.r>1.9&&(a.a>u46||a.a<u45)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u39,a.r=1.;else{float c=dot(e,texture2D(u44,vec2(.0625,.9375))),d=dot(e,texture2D(u44,vec2(.1875,.9375))),f=dot(e,texture2D(u44,vec2(.3125,.9375))),b;a.r>1.9?(b=1.-u38,b*=1.-step(abs(c),u49)*step(abs(d),u49)*step(abs(f),u49)):(b=1.,a.r=0.);float k=a.a*u50;a.gba+=vec3(c,d,f)*u40*b*k;}gl_FragColor=a;}",
f:"u44 u41 u39 u45 u46 u47 u48 u40 u50 u38 u49".split(" ")},{id:"s57",name:"_",c:"uniform sampler2D u41;uniform vec3 u43;uniform vec2 u42;varying vec2 vv0;const vec2 i=vec2(1.,1.);void main(){vec4 f=texture2D(u41,vec2(.25,.5));vec2 g=f.gb;float j=f.a;vec2 a=j*u42,c=g+a,d=g;d-=a/2.,c-=a/2.;vec2 k=.5*(d+c),h=step(d,vv0)*step(vv0,c);float l=h.x*h.y;vec2 b=2.*abs(k-vv0)/a;b=pow(b,3.*i),gl_FragColor=vec4(l*u43*max(b.x,b.y),1.);}",f:["u41","u42","u43"],precision:"lowp"},{id:"s56",name:"_",c:"uniform sampler2D u1,u6;uniform vec2 u51;uniform float u38;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u6,vv0);float c=(1.-u38)*(u51.y-u51.x)+u51.x;gl_FragColor=mix(b,a,c*f);}",
f:["u1","u6","u51","u38"]}])},Je:function(D){var M=new Float32Array([0,.5,.5,0]);D.Ua=U.instance({isPot:!0,isFloat:!1,width:E});M={width:1,height:1,isFloat:!0,isPot:!1,array:M};D.hb=ib.instance(M);D.Fd=ib.instance(M)},fe:function(){z.qa=U.instance({v:z.element,isPot:!1,isFloat:!1,isFlipY:!0});F=U.instance({isPot:!1,isFloat:!1,width:p,height:B})},j:function(){y.fe();y.Je(e);Jb.j({Yc:!1,M:q});Ib.j({Ob:0,n:c.mb[1]-c.mb[0]+1,ed:c.mb[0]});Pb?m(Pb):Sa(function(D){D=JSON.parse(D);m(D)})},i:function(){Jb.stop();
u&&(u.i(),u=null);ba=S.ge},be:function(D){Z.ob&&Z.ob();var M={video:{facingMode:{ideal:Mb.facingMode},width:{min:Mb.minWidth,max:Mb.maxWidth,ideal:Mb.idealWidth},height:{min:Mb.minHeight,max:Mb.maxHeight,ideal:Mb.idealHeight}},audio:Mb.isAudio};Ab(M,Mb.deviceId);Hb(function(ca,O){Nb=O;Z.pb&&Z.pb();D(ca)},function(){window.a&&window.a("WEBCAM_UNAVAILABLE")},M)},dd:function(D,M){y.ee();z.element=D;Ob=z.element;y.Kd();y.Rc();y.Dd();y.j();M&&M()},Lc:function(){var D=[-1,-1],M=z.element;"VIDEO"===M.nodeName?
(D[0]=M.videoWidth,D[1]=M.videoHeight):(D[0]=M.width,D[1]=M.height);return D},Kd:function(){var D=y.Lc();z.Ia[0]=D[0];z.Ia[1]=D[1];hb.Pa().width=D[0];hb.Pa().height=D[1];c.width=D[0];c.height=D[1];var M=z.Of,ca=z.Nf,O=D[1]/D[0];D=hb.O()/hb.u();O>D?1>=O?M[0]*=O:M[1]/=O:(M[0]*=O,O=1/D,M[0]*=O,M[1]*=O);M[1]*=D;M=[{type:"2f",name:"u52",value:M},{type:"2f",name:"u53",value:ca}];L.G("s54",[{type:"1i",name:"u1",value:0}].concat(M));L.G("s53",M)}};Qb.push(y);return y}Z.onLoad=function(b){Z.ready?b():Z.ja.push(b)};
Z.switch_displayVideo=function(b){Z.Ca=b;Z.Ba&&(Z.Ba.style.display=Z.Ca?"block":"none")};Z.onWebcamAsk=function(b){Z.ob=b};Z.onContextLost=function(b){Z.nb=b};Z.onWebcamGet=function(b){Z.pb=b};Z.destroy=function(){Jb.i();Ob&&Ob.srcObject&&Ob.srcObject.getTracks().forEach(function(b){b.stop()});Qb.forEach(function(b){b.i()});Qb.splice(0);hb.i();Z.switch_displayVideo(!1);Z.initialized=!1;Z.ja.splice(0)};Z.set_size=function(b,d){c.width=b;c.height=d};Z.get_size=function(){return{width:c.width,height:c.height}};
Z.get_videoStream=function(){return Nb};Z.get_video=function(){return Ob};Z.get_cv=function(){return hb.Pa()};Z.set_color=function(b){L.G("s57",[{type:"3f",name:"u43",value:b}])};
Z.init=function(b){var d=Rb(),g=b.callbackReady?b.callbackReady:function(r){console.log("ERR:",r)},h=b.callbackReady?b.callbackReady.bind(null,!1):!1;if(b.canvasId||b.canvas){var t=b.canvas?b.canvas:document.getElementById(b.canvasId);if(t)if(Z.initialized)g("ALREADY_INITIALIZED");else{Z.initialized=!0;window.a=g?function(r){g(r);window.a=!1}:!1;b.NNCPath&&(c.oc=b.NNCPath);"undefined"!==typeof b.NNC&&(Pb="string"===typeof b.NNC?JSON.parse(b.NNC):b.NNC);h&&Z.ja.push(h);if(!hb.j({Ha:t,width:c.width,
height:c.height,debug:!1,Vc:!1,Rb:function(){Z.nb&&Z.nb()},premultipliedAlpha:!1}))return g("GL_INCOMPATIBLE"),!1;Z.Ba=hb.Pa();Z.Ca||(Z.Ba.style.display="none");b.videoSettings&&b.videoSettings.videoElement?d.dd(b.videoSettings.videoElement,!1):(b.videoSettings&&Object.assign(Mb,b.videoSettings),d.be(function(r){d.dd(r,!1)}));return!0}else g("INVALID_CANVAS")}else g("NO_CANVASID")};window.JEELIZFACEEXPRESSIONS=Z;
;return JEELIZFACEEXPRESSIONS||window.JEELIZFACEEXPRESSIONS;})();